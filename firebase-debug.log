[debug] [2024-11-14T19:02:06.275Z] ----------------------------------------------------------------------
[debug] [2024-11-14T19:02:06.279Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js emulators:start
[debug] [2024-11-14T19:02:06.280Z] CLI Version:   13.24.2
[debug] [2024-11-14T19:02:06.280Z] Platform:      win32
[debug] [2024-11-14T19:02:06.280Z] Node Version:  v20.18.0
[debug] [2024-11-14T19:02:06.280Z] Time:          Fri Nov 15 2024 06:02:06 GMT+1100 (Australian Eastern Daylight Time)
[debug] [2024-11-14T19:02:06.280Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-11-14T19:02:06.441Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-11-14T19:02:06.441Z] > authorizing via signed-in user (lisakhun58@gmail.com)
[debug] [2024-11-14T19:02:06.574Z] java version "21.0.5" 2024-10-15 LTS

[debug] [2024-11-14T19:02:06.575Z] Java(TM) SE Runtime Environment (build 21.0.5+9-LTS-239)
Java HotSpot(TM) 64-Bit Server VM (build 21.0.5+9-LTS-239, mixed mode, sharing)

[debug] [2024-11-14T19:02:06.600Z] Parsed Java major version: 21
[info] i  emulators: Starting emulators: auth, functions, firestore, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, extensions"}}
[debug] [2024-11-14T19:02:06.603Z] Checked if tokens are valid: true, expires at: 1731613770367
[debug] [2024-11-14T19:02:06.603Z] Checked if tokens are valid: true, expires at: 1731613770367
[debug] [2024-11-14T19:02:06.605Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc [none]
[debug] [2024-11-14T19:02:07.480Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc 200
[debug] [2024-11-14T19:02:07.480Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc {"projectId":"notalone-de4fc","projectNumber":"784029337452","displayName":"NotAlone","name":"projects/notalone-de4fc","resources":{"hostingSite":"notalone-de4fc"},"state":"ACTIVE","etag":"1_570ddbb0-4c2c-4e94-b3b3-0005c847d3e1"}
[debug] [2024-11-14T19:02:07.496Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-14T19:02:07.497Z] [auth] Authentication Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-14T19:02:07.497Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-14T19:02:07.497Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-14T19:02:07.497Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2024-11-14T19:02:07.504Z] [hub] writing locator at C:\Users\Rob\AppData\Local\Temp\hub-notalone-de4fc.json
[debug] [2024-11-14T19:02:07.514Z] [Extensions] Started Extensions emulator, this is a noop.
[debug] [2024-11-14T19:02:07.521Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-14T19:02:07.521Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-14T19:02:07.521Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-14T19:02:07.521Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mdatabase, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2024-11-14T19:02:07.526Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-14T19:02:07.529Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[debug] [2024-11-14T19:02:07.529Z] Checked if tokens are valid: true, expires at: 1731613770367
[debug] [2024-11-14T19:02:07.529Z] Checked if tokens are valid: true, expires at: 1731613770367
[debug] [2024-11-14T19:02:07.530Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig [none]
[debug] [2024-11-14T19:02:08.244Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig 200
[debug] [2024-11-14T19:02:08.245Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig {"projectId":"notalone-de4fc","storageBucket":"notalone-de4fc.firebasestorage.app"}
[debug] [2024-11-14T19:02:08.266Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-11-14T19:02:08.266Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2024-11-14T19:02:08.266Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","C:\\Users\\Rob\\.cache\\firebase\\emulators\\cloud-firestore-emulator-v1.19.8.jar","--host","127.0.0.1","--port",8080,"--websocket_port",9150,"--project_id","notalone-de4fc","--rules","C:\\Users\\Rob\\Apps\\not-alone\\firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false,"shell":false,"port":8080} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"C:\\\\Users\\\\Rob\\\\.cache\\\\firebase\\\\emulators\\\\cloud-firestore-emulator-v1.19.8.jar\",\"--host\",\"127.0.0.1\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"notalone-de4fc\",\"--rules\",\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false,\"shell\":false,\"port\":8080}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[info] +  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2024-11-14T19:02:19.975Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:02:19.975Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:19.976Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:02:19.975Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:19.981Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:19.983Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:19.983Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:19.983Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:19.983Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:19.985Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:19.994Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-11-14T19:02:19.994Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2024-11-14T19:02:19.995Z] Starting Emulator UI with command {"binary":"node","args":["C:\\Users\\Rob\\.cache\\firebase\\emulators\\ui-v1.14.0\\server\\server.mjs"],"optionalArgs":[],"joinArgs":false,"shell":false,"port":4000} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"C:\\\\Users\\\\Rob\\\\.cache\\\\firebase\\\\emulators\\\\ui-v1.14.0\\\\server\\\\server.mjs\"],\"optionalArgs\":[],\"joinArgs\":false,\"shell\":false,\"port\":4000}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2024-11-14T19:02:20.260Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2024-11-14T19:02:20.261Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[debug] [2024-11-14T19:02:20.421Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "C:\Users\Rob\Apps\not-alone\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\Rob\\Apps\\not-alone\\functions\" for Cloud Functions..."}}
[debug] [2024-11-14T19:02:20.433Z] Validating nodejs source
[debug] [2024-11-14T19:02:21.827Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-14T19:02:21.827Z] Building nodejs source
[debug] [2024-11-14T19:02:21.828Z] Failed to find version of module node: reached end of search path C:\Users\Rob\Apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-14T19:02:21.832Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-14T19:02:21.853Z] Found firebase-functions binary at 'C:\Users\Rob\Apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8309

[debug] [2024-11-14T19:02:22.874Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:22.874Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:22.874Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:22.874Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:22.875Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-14T19:02:23.214Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"deleteChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"deleteChatHistory"},"analyzeProfileFromChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"analyzeProfileFromChat"},"saveProfileHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveProfileHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-14T19:02:27.286Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-14T19:02:27.287Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat."}}
[info] +  functions[us-central1-saveChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveChatHistory)."}}
[info] +  functions[us-central1-getChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/getChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/getChatHistory)."}}
[info] +  functions[us-central1-deleteChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/deleteChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/deleteChatHistory)."}}
[info] +  functions[us-central1-analyzeProfileFromChat]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/analyzeProfileFromChat). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/analyzeProfileFromChat)."}}
[info] +  functions[us-central1-saveProfileHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveProfileHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveProfileHistory)."}}
[info] +  functions[us-central1-processChat]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/processChat). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/processChat)."}}
[debug] [2024-11-14T19:02:27.311Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬──────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI              │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Authentication │ 127.0.0.1:9099 │ http://127.0.0.1:4000/auth       │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Firestore      │ 127.0.0.1:8080 │ http://127.0.0.1:4000/firestore  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Extensions     │ 127.0.0.1:5001 │ http://127.0.0.1:4000/extensions │
└────────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150
┌─────────────────────────┬───────────────┬─────────────────────┐
│ Extension Instance Name │ Extension Ref │ View in Emulator UI │
└─────────────────────────┴───────────────┴─────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2024-11-14T19:02:27.895Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:27.895Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:27.896Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:27.895Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:27.896Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:02:27.897Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:02:27.897Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:02:27.908Z] [worker-pool] addWorker(us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-processChat)"}}
[debug] [2024-11-14T19:02:27.909Z] [worker-pool] Adding worker with key us-central1-processChat, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-processChat, total=1"}}
[debug] [2024-11-14T19:02:29.865Z] [runtime-status] [11132] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:29.866Z] [runtime-status] [11132] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:29.866Z] [runtime-status] [11132] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-14T19:02:29.867Z] [runtime-status] [11132] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-14T19:02:29.867Z] [runtime-status] [11132] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:30.238Z] [runtime-status] [11132] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-14T19:02:30.238Z] [runtime-status] [11132] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-14T19:02:30.239Z] [runtime-status] [11132] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:30.245Z] [runtime-status] [11132] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:30.248Z] [runtime-status] [11132] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:30.248Z] [runtime-status] [11132] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-14T19:02:30.378Z] [runtime-status] [11132] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-14T19:02:30.401Z] [runtime-status] [11132] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-14T19:02:30.402Z] [runtime-status] [11132] Listening to port: \\?\pipe\fire_emu_0033fb90752da76f {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [11132] Listening to port: \\\\?\\pipe\\fire_emu_0033fb90752da76f"}}
[debug] [2024-11-14T19:02:30.444Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:02:30.444Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:02:30.445Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:02:30.451Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 5.6756ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 5.6756ms"}}
[debug] [2024-11-14T19:02:30.452Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:02:30.452Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:02:30.452Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:02:30.452Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:30.454Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:30.453Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:30.454Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:30.453Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:30.454Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:02:30.455Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:02:30.455Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:02:30.455Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:02:30.456Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } } {"user":"🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 5, {"user":"  messageLength: 5,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 5,"}}
[info] >    userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"  userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731610950478-6hvecwcis {"user":"🆕 Creating new chat session: chat-1731610950478-6hvecwcis","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731610950478-6hvecwcis"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731610950478-6hvecwcis', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731610950478-6hvecwcis', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731610950478-6hvecwcis', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: hello {"user":"💬 Sending message to Gemini: hello","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: hello"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731610950478-6hvecwcis', {"user":"  chatId: 'chat-1731610950478-6hvecwcis',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610950478-6hvecwcis',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 99, timestamp: '2024-11-14T19:02:32.458Z' } {"user":"✅ Response received: { responseLength: 99, timestamp: '2024-11-14T19:02:32.458Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 99, timestamp: '2024-11-14T19:02:32.458Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "Hello!  How can I help you with your relationships today?  I'm ready to listen and offer guidance.\n", {"user":"  message: \"Hello!  How can I help you with your relationships today?  I'm ready to listen and offer guidance.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"Hello!  How can I help you with your relationships today?  I'm ready to listen and offer guidance.\\n\","}}
[info] >    userMessage: 'hello', {"user":"  userMessage: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'hello',"}}
[info] >    timestamp: '2024-11-14T19:02:32.458Z', {"user":"  timestamp: '2024-11-14T19:02:32.458Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:02:32.458Z',"}}
[info] >    userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"  userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >    chatId: 'chat-1731610950478-6hvecwcis' {"user":"  chatId: 'chat-1731610950478-6hvecwcis'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610950478-6hvecwcis'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"  userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >    chatId: 'chat-1731610950478-6hvecwcis', {"user":"  chatId: 'chat-1731610950478-6hvecwcis',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610950478-6hvecwcis',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-14T19:02:32.459Z', {"user":"  timestamp: '2024-11-14T19:02:32.459Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:02:32.459Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:02:32.473Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:02:32.473Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:30.453Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:32.473Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:30.453Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:02:32.473Z"],"workRunningCount":2}
[debug] [2024-11-14T19:02:32.473Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-14T19:02:32.474Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:02:32.474Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-14T19:02:32.482Z] [worker-pool] addWorker(us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-analyzeProfileFromChat)"}}
[debug] [2024-11-14T19:02:32.482Z] [worker-pool] Adding worker with key us-central1-analyzeProfileFromChat, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-analyzeProfileFromChat, total=1"}}
[debug] [2024-11-14T19:02:33.990Z] [runtime-status] [19268] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:33.991Z] [runtime-status] [19268] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:33.992Z] [runtime-status] [19268] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-14T19:02:33.992Z] [runtime-status] [19268] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-14T19:02:33.993Z] [runtime-status] [19268] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:34.332Z] [runtime-status] [19268] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-14T19:02:34.332Z] [runtime-status] [19268] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-14T19:02:34.333Z] [runtime-status] [19268] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:34.338Z] [runtime-status] [19268] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:34.341Z] [runtime-status] [19268] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:34.341Z] [runtime-status] [19268] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-14T19:02:34.472Z] [runtime-status] [19268] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-14T19:02:34.496Z] [runtime-status] [19268] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-14T19:02:34.497Z] [runtime-status] [19268] Listening to port: \\?\pipe\fire_emu_3f886b6fea6ddf82 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [19268] Listening to port: \\\\?\\pipe\\fire_emu_3f886b6fea6ddf82"}}
[debug] [2024-11-14T19:02:34.524Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE"}}
[debug] [2024-11-14T19:02:34.524Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-14T19:02:34.525Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 45 36 6d 44 7a 4f 34 48 47 35 46 71 48 58 30 47 43 46 66 51 39 76 50 43 5a 72 42 68 22 2c 22 ... 295 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 45 36 6d 44 7a 4f 34 48 47 35 46 71 48 58 30 47 43 46 66 51 39 76 50 43 5a 72 42 68 22 2c 22 ... 295 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 45 36 6d 44 7a 4f 34 48 47 35 46 71 48 58 30 47 43 46 66 51 39 76 50 43 5a 72 42 68 22 2c 22 ... 295 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"      userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >        chatId: 'chat-1731610950478-6hvecwcis', {"user":"      chatId: 'chat-1731610950478-6hvecwcis',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610950478-6hvecwcis',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"  userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >    chatId: 'chat-1731610950478-6hvecwcis', {"user":"  chatId: 'chat-1731610950478-6hvecwcis',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610950478-6hvecwcis',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"  userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:02:45.345Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 10819.735ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 10819.735ms"}}
[debug] [2024-11-14T19:02:45.345Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE"}}
[debug] [2024-11-14T19:02:45.346Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:02:45.346Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:02:45.346Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:30.453Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [Array] } {"user":"    analysis: { nodes: [Array], links: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [Array] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "E6mDzO4HG5FqHX0GCFfQ9vPCZrBh", {"user":"  \"userId\": \"E6mDzO4HG5FqHX0GCFfQ9vPCZrBh\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"E6mDzO4HG5FqHX0GCFfQ9vPCZrBh\","}}
[info] >    "chatId": "chat-1731610950478-6hvecwcis", {"user":"  \"chatId\": \"chat-1731610950478-6hvecwcis\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731610950478-6hvecwcis\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "hello", {"user":"      \"content\": \"hello\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"hello\","}}
[info] >        "timestamp": "2024-11-14T19:02:45.350Z" {"user":"      \"timestamp\": \"2024-11-14T19:02:45.350Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:02:45.350Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Hello!  How can I help you with your relationships today?  I'm ready to listen and offer guidance.\n", {"user":"      \"content\": \"Hello!  How can I help you with your relationships today?  I'm ready to listen and offer guidance.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Hello!  How can I help you with your relationships today?  I'm ready to listen and offer guidance.\\n\","}}
[info] >        "timestamp": "2024-11-14T19:02:45.350Z" {"user":"      \"timestamp\": \"2024-11-14T19:02:45.350Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:02:45.350Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-14T19:02:45.350Z", {"user":"  \"timestamp\": \"2024-11-14T19:02:45.350Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-14T19:02:45.350Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "E6mDzO4HG5FqHX0GCFfQ9vPCZrBh", {"user":"    \"uid\": \"E6mDzO4HG5FqHX0GCFfQ9vPCZrBh\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"E6mDzO4HG5FqHX0GCFfQ9vPCZrBh\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:02:45.386Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:02:45.385Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:30.453Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:45.386Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:30.453Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:02:45.385Z"],"workRunningCount":2}
[debug] [2024-11-14T19:02:45.386Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-14T19:02:45.392Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:02:45.392Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:02:45.401Z] [worker-pool] addWorker(us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveChatHistory)"}}
[debug] [2024-11-14T19:02:45.402Z] [worker-pool] Adding worker with key us-central1-saveChatHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveChatHistory, total=1"}}
[debug] [2024-11-14T19:02:47.335Z] [runtime-status] [22228] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:47.337Z] [runtime-status] [22228] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:47.337Z] [runtime-status] [22228] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-14T19:02:47.337Z] [runtime-status] [22228] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-14T19:02:47.338Z] [runtime-status] [22228] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:47.711Z] [runtime-status] [22228] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-14T19:02:47.712Z] [runtime-status] [22228] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-14T19:02:47.713Z] [runtime-status] [22228] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:47.722Z] [runtime-status] [22228] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:47.728Z] [runtime-status] [22228] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:47.728Z] [runtime-status] [22228] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-14T19:02:47.899Z] [runtime-status] [22228] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-14T19:02:47.919Z] [runtime-status] [22228] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-14T19:02:47.920Z] [runtime-status] [22228] Listening to port: \\?\pipe\fire_emu_4f2e58151a5cfabc {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [22228] Listening to port: \\\\?\\pipe\\fire_emu_4f2e58151a5cfabc"}}
[debug] [2024-11-14T19:02:48.002Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE"}}
[debug] [2024-11-14T19:02:48.002Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-14T19:02:48.003Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 45 36 6d 44 7a 4f 34 48 47 35 46 71 48 58 30 47 43 46 66 51 39 76 50 43 5a 72 42 68 22 2c 22 ... 334 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 45 36 6d 44 7a 4f 34 48 47 35 46 71 48 58 30 47 43 46 66 51 39 76 50 43 5a 72 42 68 22 2c 22 ... 334 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 45 36 6d 44 7a 4f 34 48 47 35 46 71 48 58 30 47 43 46 66 51 39 76 50 43 5a 72 42 68 22 2c 22 ... 334 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"      userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >        chatId: 'chat-1731610950478-6hvecwcis', {"user":"      chatId: 'chat-1731610950478-6hvecwcis',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610950478-6hvecwcis',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-14T19:02:45.350Z' {"user":"      timestamp: '2024-11-14T19:02:45.350Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:02:45.350Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"  userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >    chatId: 'chat-1731610950478-6hvecwcis', {"user":"  chatId: 'chat-1731610950478-6hvecwcis',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610950478-6hvecwcis',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731610950478-6hvecwcis { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731610950478-6hvecwcis { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731610950478-6hvecwcis { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-14T19:02:48.419Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 415.8951ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 415.8951ms"}}
[debug] [2024-11-14T19:02:48.419Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE"}}
[debug] [2024-11-14T19:02:48.419Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:02:48.419Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:02:48.419Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:02:30.453Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:02:48.422Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 17966.769ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 17966.769ms"}}
[debug] [2024-11-14T19:02:48.423Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:02:48.423Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:02:48.423Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:02:48.423Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:48.428Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:48.428Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:02:48.428Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:48.428Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:48.428Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:02:48.429Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:02:48.429Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:02:48.436Z] [worker-pool] addWorker(us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-getChatHistory)"}}
[debug] [2024-11-14T19:02:48.436Z] [worker-pool] Adding worker with key us-central1-getChatHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-getChatHistory, total=1"}}
[debug] [2024-11-14T19:02:48.443Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:02:48.443Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:48.428Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:48.443Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:48.428Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:02:48.443Z"],"workRunningCount":2}
[debug] [2024-11-14T19:02:48.443Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:02:48.447Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:02:48.447Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:02:48.455Z] [worker-pool] addWorker(us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveProfileHistory)"}}
[debug] [2024-11-14T19:02:48.456Z] [worker-pool] Adding worker with key us-central1-saveProfileHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveProfileHistory, total=1"}}
[debug] [2024-11-14T19:02:50.187Z] [runtime-status] [2656] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.189Z] [runtime-status] [2656] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.190Z] [runtime-status] [2656] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-14T19:02:50.190Z] [runtime-status] [2656] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-14T19:02:50.191Z] [runtime-status] [2656] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.275Z] [runtime-status] [16648] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.277Z] [runtime-status] [16648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.278Z] [runtime-status] [16648] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-14T19:02:50.278Z] [runtime-status] [16648] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-14T19:02:50.279Z] [runtime-status] [16648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.571Z] [runtime-status] [2656] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-14T19:02:50.571Z] [runtime-status] [2656] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-14T19:02:50.572Z] [runtime-status] [2656] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.579Z] [runtime-status] [2656] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.582Z] [runtime-status] [2656] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.582Z] [runtime-status] [2656] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2024-11-14T19:02:50.663Z] [runtime-status] [16648] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-14T19:02:50.663Z] [runtime-status] [16648] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-14T19:02:50.664Z] [runtime-status] [16648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.670Z] [runtime-status] [16648] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.673Z] [runtime-status] [16648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-14T19:02:50.673Z] [runtime-status] [16648] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-14T19:02:50.709Z] [runtime-status] [2656] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-14T19:02:50.729Z] [runtime-status] [2656] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-14T19:02:50.730Z] [runtime-status] [2656] Listening to port: \\?\pipe\fire_emu_de4692707c96ef74 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [2656] Listening to port: \\\\?\\pipe\\fire_emu_de4692707c96ef74"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-14T19:02:50.799Z] [runtime-status] [16648] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-14T19:02:50.817Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:02:50.818Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:02:50.818Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:02:50.819Z] [runtime-status] [16648] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-14T19:02:50.819Z] [runtime-status] [16648] Listening to port: \\?\pipe\fire_emu_dccbecc7e5094c7e {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [16648] Listening to port: \\\\?\\pipe\\fire_emu_dccbecc7e5094c7e"}}
[debug] [2024-11-14T19:02:50.822Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.3027ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.3027ms"}}
[debug] [2024-11-14T19:02:50.823Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:02:50.823Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:02:50.823Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:02:50.823Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:48.428Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:50.825Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:02:50.825Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:48.428Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:50.825Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:48.428Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:02:50.825Z"],"workRunningCount":2}
[debug] [2024-11-14T19:02:50.825Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:02:50.826Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:02:50.826Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:02:50.827Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:02:50.827Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 45 36 6d 44 7a 4f 34 48 47 35 46 71 48 58 30 47 43 46 66 51 39 76 50 43 5a 72 42 68 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 45 36 6d 44 7a 4f 34 48 47 35 46 71 48 58 30 47 43 46 66 51 39 76 50 43 5a 72 42 68 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 45 36 6d 44 7a 4f 34 48 47 35 46 71 48 58 30 47 43 46 66 51 39 76 50 43 5a 72 42 68 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', token: [Object] }, {"user":"    auth: { uid: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"      userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >        chatId: 'chat-1731610950478-6hvecwcis' {"user":"      chatId: 'chat-1731610950478-6hvecwcis'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610950478-6hvecwcis'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:02:50.929Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:02:50.929Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:02:50.930Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:02:50.934Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 4.3176ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 4.3176ms"}}
[debug] [2024-11-14T19:02:50.934Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:02:50.934Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:02:50.935Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:02:50.935Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:02:50.825Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:50.936Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:50.936Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:02:50.825Z"],"workRunningCount":1}
[debug] [2024-11-14T19:02:50.936Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:02:50.825Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:50.936Z"],"workRunningCount":2}
[debug] [2024-11-14T19:02:50.936Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:02:50.937Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:02:50.937Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:02:50.937Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:02:50.938Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh' } {"user":"  data: { userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"  userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: E6mDzO4HG5FqHX0GCFfQ9vPCZrBh { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: E6mDzO4HG5FqHX0GCFfQ9vPCZrBh { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: E6mDzO4HG5FqHX0GCFfQ9vPCZrBh { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:02:51.261Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 433.7631ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 433.7631ms"}}
[debug] [2024-11-14T19:02:51.262Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:02:51.262Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:02:51.262Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:02:51.262Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:02:50.936Z"],"workRunningCount":1}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh', {"user":"  userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:02:48.392Z', {"user":"  createdAt: '2024-11-14T19:02:48.392Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:02:48.392Z',"}}
[info] >    lastUpdated: '2024-11-14T19:02:48.392Z', {"user":"  lastUpdated: '2024-11-14T19:02:48.392Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:02:48.392Z',"}}
[info] >    chatId: 'chat-1731610950478-6hvecwcis', {"user":"  chatId: 'chat-1731610950478-6hvecwcis',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610950478-6hvecwcis',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:02:45.350Z' {"user":"      timestamp: '2024-11-14T19:02:45.350Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:02:45.350Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello!  How can I help you with your relationships today?  I'm ready to listen and offer guidance.\n", {"user":"      content: \"Hello!  How can I help you with your relationships today?  I'm ready to listen and offer guidance.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello!  How can I help you with your relationships today?  I'm ready to listen and offer guidance.\\n\","}}
[info] >        timestamp: '2024-11-14T19:02:45.350Z' {"user":"      timestamp: '2024-11-14T19:02:45.350Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:02:45.350Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh' {"user":"  userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'E6mDzO4HG5FqHX0GCFfQ9vPCZrBh'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: E6mDzO4HG5FqHX0GCFfQ9vPCZrBh { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: E6mDzO4HG5FqHX0GCFfQ9vPCZrBh { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: E6mDzO4HG5FqHX0GCFfQ9vPCZrBh { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:02:51.534Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 595.8312ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 595.8312ms"}}
[debug] [2024-11-14T19:02:51.534Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:02:51.535Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:02:51.535Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:02:51.535Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:01.311Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-14T19:03:01.311Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"9714a7f2-749e-4844-b66d-33bc4584e03b","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-14T19:03:01.311Z","data":{"uid":"eXGzB2SCOiaBgSiX2dxPlfwf8AiO","email":"grass.otter.236@example.com","emailVerified":true,"displayName":"Grass Otter","metadata":{"creationTime":"2024-11-14T19:03:01.310Z","lastSignInTime":"2024-11-14T19:03:01.310Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"0869428881706238348988184697824484316697","federatedId":"0869428881706238348988184697824484316697","displayName":"Grass Otter","email":"grass.otter.236@example.com","screenName":"otter_grass"}]}}
[debug] [2024-11-14T19:03:01.321Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-14T19:03:01.322Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-14T19:03:01.383Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:01.383Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:01.384Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:01.383Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:01.384Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:03:01.388Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:01.389Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:01.389Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:03:01.390Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:03:01.394Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.8408ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.8408ms"}}
[debug] [2024-11-14T19:03:01.396Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:03:01.396Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:01.396Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:01.396Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:01.402Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:01.402Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:01.402Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:01.402Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:01.402Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:03:01.407Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:01.408Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:01.408Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:03:01.409Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:03:01.411Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:01.411Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:01.402Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:01.411Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:01.402Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:01.411Z"],"workRunningCount":2}
[debug] [2024-11-14T19:03:01.411Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:03:01.414Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:01.414Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:01.415Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:03:01.415Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:03:01.418Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 9.205ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 9.205ms"}}
[debug] [2024-11-14T19:03:01.419Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:03:01.419Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:01.419Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:01.419Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:01.411Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[debug] [2024-11-14T19:03:01.422Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:01.422Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:01.411Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:01.423Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:01.411Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:01.422Z"],"workRunningCount":2}
[debug] [2024-11-14T19:03:01.423Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:03:01.426Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:01.426Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:01.427Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:03:01.429Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', chatId: 'default-chat' } {"user":"    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-14T19:03:01.470Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 54.7041ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 54.7041ms"}}
[debug] [2024-11-14T19:03:01.471Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:03:01.471Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:01.471Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:01.471Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:01.422Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 0, totalLinks: 0 }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-14T19:03:01.482Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 52.8019ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 52.8019ms"}}
[debug] [2024-11-14T19:03:01.482Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:03:01.482Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:01.482Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:01.483Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:03.352Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.352Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:03.352Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.352Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:03.353Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:03:03.354Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:03.354Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:03:03.354Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:03:03.355Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:03:03.358Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 3.7642ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 3.7642ms"}}
[debug] [2024-11-14T19:03:03.359Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:03:03.359Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:03.360Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:03.360Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:03.361Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.361Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:03.361Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.361Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:03.361Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:03:03.362Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:03.363Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:03:03.363Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:03:03.364Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } } {"user":"🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 5, {"user":"  messageLength: 5,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 5,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731610983368-36fynyh1n {"user":"🆕 Creating new chat session: chat-1731610983368-36fynyh1n","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731610983368-36fynyh1n"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731610983368-36fynyh1n', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731610983368-36fynyh1n', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731610983368-36fynyh1n', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: hello {"user":"💬 Sending message to Gemini: hello","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: hello"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 205, timestamp: '2024-11-14T19:03:05.128Z' } {"user":"✅ Response received: { responseLength: 205, timestamp: '2024-11-14T19:03:05.128Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 205, timestamp: '2024-11-14T19:03:05.128Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"  message: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >    userMessage: 'hello', {"user":"  userMessage: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'hello',"}}
[info] >    timestamp: '2024-11-14T19:03:05.128Z', {"user":"  timestamp: '2024-11-14T19:03:05.128Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:03:05.128Z',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-14T19:03:05.129Z', {"user":"  timestamp: '2024-11-14T19:03:05.129Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:03:05.129Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:05.139Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:03:05.139Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.361Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:05.139Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.361Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:03:05.139Z"],"workRunningCount":2}
[debug] [2024-11-14T19:03:05.139Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-14T19:03:05.140Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:05.141Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-14T19:03:05.141Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-14T19:03:05.141Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 401 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 401 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 401 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n', {"user":"      chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:13.506Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 8364.9547ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 8364.9547ms"}}
[debug] [2024-11-14T19:03:13.507Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE"}}
[debug] [2024-11-14T19:03:13.507Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:13.507Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:13.507Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.361Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [Array] } {"user":"    analysis: { nodes: [Array], links: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [Array] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"  \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >    "chatId": "chat-1731610983368-36fynyh1n", {"user":"  \"chatId\": \"chat-1731610983368-36fynyh1n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731610983368-36fynyh1n\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "hello", {"user":"      \"content\": \"hello\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"hello\","}}
[info] >        "timestamp": "2024-11-14T19:03:13.509Z" {"user":"      \"timestamp\": \"2024-11-14T19:03:13.509Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:03:13.509Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      \"content\": \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        "timestamp": "2024-11-14T19:03:13.509Z" {"user":"      \"timestamp\": \"2024-11-14T19:03:13.509Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:03:13.509Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-14T19:03:13.509Z", {"user":"  \"timestamp\": \"2024-11-14T19:03:13.509Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-14T19:03:13.509Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"    \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:13.539Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:03:13.539Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.361Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:13.539Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.361Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:03:13.539Z"],"workRunningCount":2}
[debug] [2024-11-14T19:03:13.540Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-14T19:03:13.542Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:13.542Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:13.542Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-14T19:03:13.543Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 440 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 440 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 440 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n', {"user":"      chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:13.581Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 37.7542ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 37.7542ms"}}
[debug] [2024-11-14T19:03:13.582Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE"}}
[debug] [2024-11-14T19:03:13.582Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:13.582Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:13.582Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:03.361Z"],"workRunningCount":1}
[info] >  ✅ Chat history saved/updated: chat-1731610983368-36fynyh1n { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731610983368-36fynyh1n { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731610983368-36fynyh1n { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:13.586Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 10222.338ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 10222.338ms"}}
[debug] [2024-11-14T19:03:13.587Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:03:13.587Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:13.587Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:13.587Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:13.591Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:13.591Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:13.591Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:13.591Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:13.591Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:03:13.595Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:13.595Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:13.596Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:03:13.597Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:03:13.601Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 4.3406ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 4.3406ms"}}
[debug] [2024-11-14T19:03:13.602Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:03:13.602Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:13.602Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:13.603Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:13.604Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:13.604Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:13.604Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:13.604Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:13.604Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:03:13.607Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:13.607Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:13.607Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:03:13.608Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:03:13.610Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:13.610Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:13.604Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:13.610Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:13.604Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:13.610Z"],"workRunningCount":2}
[debug] [2024-11-14T19:03:13.610Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:03:13.613Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:13.614Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:13.614Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:03:13.616Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:13.623Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 7.0488ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 7.0488ms"}}
[debug] [2024-11-14T19:03:13.624Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:03:13.624Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:13.624Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:13.624Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:13.604Z"],"workRunningCount":1}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-14T19:03:13.626Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:13.626Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:13.604Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:13.626Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:13.604Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:13.626Z"],"workRunningCount":2}
[debug] [2024-11-14T19:03:13.626Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:03:13.629Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:13.629Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:13.629Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:03:13.630Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    lastUpdated: '2024-11-14T19:03:13.562Z', {"user":"  lastUpdated: '2024-11-14T19:03:13.562Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:13.562Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:03:13.684Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 76.1667ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 76.1667ms"}}
[debug] [2024-11-14T19:03:13.684Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:03:13.685Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:13.685Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:13.685Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:03:13.626Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:03:13.691Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 60.9905ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 60.9905ms"}}
[debug] [2024-11-14T19:03:13.692Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:03:13.692Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:13.692Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:13.692Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:50.325Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.325Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:50.325Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.325Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:50.326Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:03:50.329Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:50.329Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:03:50.329Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:03:50.330Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:03:50.335Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 4.7411ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 4.7411ms"}}
[debug] [2024-11-14T19:03:50.335Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:03:50.335Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:50.335Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:50.335Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:50.337Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.337Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:50.337Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.337Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:50.337Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:03:50.340Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:50.340Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:03:50.340Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:03:50.341Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'my name is moly', {"user":"    message: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'my name is moly',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731610983368-36fynyh1n {"user":"📝 Using chat ID: chat-1731610983368-36fynyh1n","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731610983368-36fynyh1n"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 15, {"user":"  messageLength: 15,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 15,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: my name is moly {"user":"💬 Sending message to Gemini: my name is moly","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: my name is moly"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    historyLength: 8, {"user":"  historyLength: 8,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 8,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] }, {"user":"    { role: 'model', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 241, timestamp: '2024-11-14T19:03:52.630Z' } {"user":"✅ Response received: { responseLength: 241, timestamp: '2024-11-14T19:03:52.630Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 241, timestamp: '2024-11-14T19:03:52.630Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"  message: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >    userMessage: 'my name is moly', {"user":"  userMessage: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'my name is moly',"}}
[info] >    timestamp: '2024-11-14T19:03:52.630Z', {"user":"  timestamp: '2024-11-14T19:03:52.630Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:03:52.630Z',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-14T19:03:52.631Z', {"user":"  timestamp: '2024-11-14T19:03:52.631Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:03:52.631Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:52.642Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:03:52.642Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.337Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:52.642Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.337Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:03:52.642Z"],"workRunningCount":2}
[debug] [2024-11-14T19:03:52.643Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-14T19:03:52.644Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:52.644Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-14T19:03:52.644Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-14T19:03:52.645Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 447 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 447 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 447 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n', {"user":"      chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:56.238Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 3592.8066ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 3592.8066ms"}}
[debug] [2024-11-14T19:03:56.238Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE"}}
[debug] [2024-11-14T19:03:56.238Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:56.238Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:56.238Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.337Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [] } {"user":"    analysis: { nodes: [Array], links: [] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"  \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >    "chatId": "chat-1731610983368-36fynyh1n", {"user":"  \"chatId\": \"chat-1731610983368-36fynyh1n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731610983368-36fynyh1n\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "my name is moly", {"user":"      \"content\": \"my name is moly\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"my name is moly\","}}
[info] >        "timestamp": "2024-11-14T19:03:56.239Z" {"user":"      \"timestamp\": \"2024-11-14T19:03:56.239Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:03:56.239Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      \"content\": \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        "timestamp": "2024-11-14T19:03:56.239Z" {"user":"      \"timestamp\": \"2024-11-14T19:03:56.239Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:03:56.239Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-14T19:03:56.239Z", {"user":"  \"timestamp\": \"2024-11-14T19:03:56.239Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-14T19:03:56.239Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"    \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:56.266Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:03:56.266Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.337Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:56.266Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.337Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:03:56.266Z"],"workRunningCount":2}
[debug] [2024-11-14T19:03:56.266Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-14T19:03:56.267Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:56.267Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:56.267Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-14T19:03:56.268Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 486 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 486 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 486 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n', {"user":"      chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:56.297Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 29.1383ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 29.1383ms"}}
[debug] [2024-11-14T19:03:56.297Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE"}}
[debug] [2024-11-14T19:03:56.297Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:56.298Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:56.298Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:03:50.337Z"],"workRunningCount":1}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731610983368-36fynyh1n { totalMessageCount: 4, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731610983368-36fynyh1n { totalMessageCount: 4, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731610983368-36fynyh1n { totalMessageCount: 4, newMessagesAdded: 2 }"}}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 4 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 4 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 4 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:56.302Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 5961.5218ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 5961.5218ms"}}
[debug] [2024-11-14T19:03:56.302Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:03:56.303Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:56.303Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:56.303Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:56.308Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:56.308Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:56.308Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:56.308Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:56.308Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:03:56.311Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:56.311Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:56.311Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:03:56.313Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:03:56.316Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 3.1098ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 3.1098ms"}}
[debug] [2024-11-14T19:03:56.317Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:03:56.317Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:56.317Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:56.317Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:56.318Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:56.318Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:03:56.318Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:03:56.318Z"],"workRunningCount":1}
[debug] [2024-11-14T19:03:56.318Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:03:56.322Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:03:56.322Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:03:56.322Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:03:56.323Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:03:56.364Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 41.2636ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 41.2636ms"}}
[debug] [2024-11-14T19:03:56.365Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:03:56.365Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:03:56.365Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:03:56.365Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:04:34.182Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:34.182Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:34.182Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:34.182Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:34.182Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:34.184Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:34.185Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:34.185Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:34.185Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:04:34.189Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 3.791ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 3.791ms"}}
[debug] [2024-11-14T19:04:34.190Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:34.190Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:34.190Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:34.190Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:34.191Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:34.191Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:34.191Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:34.191Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:34.191Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:34.194Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:34.195Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:34.195Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:34.196Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:34.239Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 43.693ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 43.693ms"}}
[debug] [2024-11-14T19:04:34.240Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:34.240Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:34.240Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:34.240Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:04:35.425Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:35.425Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:35.425Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:35.425Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:35.425Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:04:35.425Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:35.426Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:35.426Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:04:35.426Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:04:35.427Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:35.427Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:35.425Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:35.427Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:35.425Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:35.427Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:35.428Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:35.428Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:35.428Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:35.428Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:35.429Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:04:35.430Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.25ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.25ms"}}
[debug] [2024-11-14T19:04:35.431Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:04:35.431Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:35.431Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:35.431Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:35.427Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:35.433Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:35.433Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:35.427Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:35.433Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:35.427Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:35.433Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:35.433Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:04:35.435Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:35.435Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:35.435Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:04:35.435Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611075419-3z1czme9b' {"user":"      chatId: 'chat-1731611075419-3z1czme9b'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611075419-3z1czme9b'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:35.457Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 21.5932ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 21.5932ms"}}
[debug] [2024-11-14T19:04:35.457Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:04:35.457Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:35.458Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:35.458Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:35.427Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:04:35.473Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 44.323ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 44.323ms"}}
[debug] [2024-11-14T19:04:35.473Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:35.473Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:35.473Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:35.474Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:39.720Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:39.720Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:39.721Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:39.720Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:39.721Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:04:39.722Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:39.722Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:39.722Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:04:39.723Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:04:39.725Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:39.725Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:39.720Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:39.725Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:39.720Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:39.725Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:39.725Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:39.726Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:39.726Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:39.726Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:39.727Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611079711-rb1ed2ufo' {"user":"      chatId: 'chat-1731611079711-rb1ed2ufo'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611079711-rb1ed2ufo'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:39.772Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 44.6892ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 44.6892ms"}}
[debug] [2024-11-14T19:04:39.772Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:39.773Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:39.773Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:39.773Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:39.720Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:39.774Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 51.4121ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 51.4121ms"}}
[debug] [2024-11-14T19:04:39.775Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:04:39.775Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:39.775Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:39.775Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-14T19:04:39.780Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:39.780Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:39.780Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:39.780Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:39.780Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:39.781Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:39.781Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:39.782Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:39.782Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:39.824Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 41.7498ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 41.7498ms"}}
[debug] [2024-11-14T19:04:39.825Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:39.825Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:39.825Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:39.825Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:04:40.183Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.183Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:40.183Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.183Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:40.183Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:04:40.184Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:40.184Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:40.184Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:04:40.185Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:04:40.186Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:40.186Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.183Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:40.186Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.183Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:40.186Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:40.186Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:40.187Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:40.187Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:40.187Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:40.188Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:04:40.255Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 70.0732ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 70.0732ms"}}
[debug] [2024-11-14T19:04:40.255Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:04:40.256Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:40.256Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:40.256Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:40.186Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:40.257Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 69.0313ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 69.0313ms"}}
[debug] [2024-11-14T19:04:40.257Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:40.258Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:40.258Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:40.258Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-14T19:04:40.974Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.974Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:40.974Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.974Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:40.974Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:04:40.975Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:40.975Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:40.975Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:04:40.976Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:04:40.977Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:40.977Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.974Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:40.977Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.974Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:40.977Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:40.977Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:40.978Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:40.978Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:40.978Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:40.979Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:04:40.980Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.7014ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.7014ms"}}
[debug] [2024-11-14T19:04:40.981Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:04:40.981Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:40.981Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:40.982Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:40.977Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:40.986Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.986Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:40.977Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:40.987Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:40.977Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.986Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:40.987Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:04:40.988Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:40.988Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:40.988Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:04:40.989Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611080967-7r2ib15tl' {"user":"      chatId: 'chat-1731611080967-7r2ib15tl'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611080967-7r2ib15tl'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:04:41.050Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 71.4402ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 71.4402ms"}}
[debug] [2024-11-14T19:04:41.051Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:41.051Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:41.051Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:41.051Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:40.986Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-14T19:04:41.055Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 66.9437ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 66.9437ms"}}
[debug] [2024-11-14T19:04:41.056Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:04:41.057Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:41.057Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:41.057Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:41.552Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:41.552Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:41.552Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:41.552Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:41.552Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:04:41.553Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:41.553Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:41.553Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:04:41.553Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:04:41.554Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:41.554Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:41.552Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:41.554Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:41.552Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:41.554Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:41.554Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:41.555Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:41.555Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:41.555Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:41.555Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:04:41.606Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 53.1673ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 53.1673ms"}}
[debug] [2024-11-14T19:04:41.607Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:04:41.607Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:41.607Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:41.607Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:41.554Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:41.608Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 52.7905ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 52.7905ms"}}
[debug] [2024-11-14T19:04:41.609Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:41.609Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:41.609Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:41.609Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-14T19:04:43.099Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:43.099Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:43.099Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:43.099Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:43.099Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:04:43.100Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:43.100Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:43.100Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:04:43.101Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:04:43.102Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:43.102Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:43.099Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:43.102Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:04:43.099Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:43.102Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:43.102Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:43.103Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:43.103Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:43.103Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:43.104Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:04:43.150Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 48.8532ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 48.8532ms"}}
[debug] [2024-11-14T19:04:43.150Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:04:43.150Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:43.150Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:43.150Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:43.102Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:43.151Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 47.5213ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 47.5213ms"}}
[debug] [2024-11-14T19:04:43.152Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:43.152Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:43.152Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:43.152Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-14T19:04:49.288Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.288Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:49.288Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.288Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:49.288Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:04:49.291Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:49.291Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:04:49.291Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:04:49.291Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:04:49.295Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 3.4588ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 3.4588ms"}}
[debug] [2024-11-14T19:04:49.295Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:04:49.295Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:49.295Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:49.295Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:49.297Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.297Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:49.297Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.297Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:49.298Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:04:49.301Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:49.302Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:04:49.302Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:04:49.303Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'hello my boyfriends name is robert', {"user":"    message: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'hello my boyfriends name is robert',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731611083093-cbkn3zqsb {"user":"📝 Using chat ID: chat-1731611083093-cbkn3zqsb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731611083093-cbkn3zqsb"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 34, {"user":"  messageLength: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 34,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731611083093-cbkn3zqsb {"user":"🆕 Creating new chat session: chat-1731611083093-cbkn3zqsb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731611083093-cbkn3zqsb"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731611083093-cbkn3zqsb', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731611083093-cbkn3zqsb', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731611083093-cbkn3zqsb', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: hello my boyfriends name is robert {"user":"💬 Sending message to Gemini: hello my boyfriends name is robert","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: hello my boyfriends name is robert"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 353, timestamp: '2024-11-14T19:04:51.625Z' } {"user":"✅ Response received: { responseLength: 353, timestamp: '2024-11-14T19:04:51.625Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 353, timestamp: '2024-11-14T19:04:51.625Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"  message: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >    userMessage: 'hello my boyfriends name is robert', {"user":"  userMessage: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'hello my boyfriends name is robert',"}}
[info] >    timestamp: '2024-11-14T19:04:51.625Z', {"user":"  timestamp: '2024-11-14T19:04:51.625Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:04:51.625Z',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-14T19:04:51.625Z', {"user":"  timestamp: '2024-11-14T19:04:51.625Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:04:51.625Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:51.639Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:04:51.639Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.297Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:51.640Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.297Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:04:51.639Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:51.640Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-14T19:04:51.640Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:51.640Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-14T19:04:51.641Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-14T19:04:51.641Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 578 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 578 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 578 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:59.019Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 7377.4601ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 7377.4601ms"}}
[debug] [2024-11-14T19:04:59.019Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE"}}
[debug] [2024-11-14T19:04:59.019Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:59.019Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:59.019Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.297Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [Array] } {"user":"    analysis: { nodes: [Array], links: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [Array] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"  \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >    "chatId": "chat-1731611083093-cbkn3zqsb", {"user":"  \"chatId\": \"chat-1731611083093-cbkn3zqsb\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731611083093-cbkn3zqsb\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "hello my boyfriends name is robert", {"user":"      \"content\": \"hello my boyfriends name is robert\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"hello my boyfriends name is robert\","}}
[info] >        "timestamp": "2024-11-14T19:04:59.021Z" {"user":"      \"timestamp\": \"2024-11-14T19:04:59.021Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:04:59.021Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      \"content\": \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        "timestamp": "2024-11-14T19:04:59.021Z" {"user":"      \"timestamp\": \"2024-11-14T19:04:59.021Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:04:59.021Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-14T19:04:59.021Z", {"user":"  \"timestamp\": \"2024-11-14T19:04:59.021Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-14T19:04:59.021Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"    \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:59.046Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:04:59.046Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.297Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:59.046Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.297Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:04:59.046Z"],"workRunningCount":2}
[debug] [2024-11-14T19:04:59.046Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-14T19:04:59.048Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:59.048Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:59.048Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-14T19:04:59.049Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 617 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 617 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 617 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731611083093-cbkn3zqsb { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731611083093-cbkn3zqsb { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731611083093-cbkn3zqsb { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-14T19:04:59.085Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 36.4189ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 36.4189ms"}}
[debug] [2024-11-14T19:04:59.086Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE"}}
[debug] [2024-11-14T19:04:59.086Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:59.086Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:59.086Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:04:49.297Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:59.088Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 9785.5336ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 9785.5336ms"}}
[debug] [2024-11-14T19:04:59.089Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:04:59.089Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:59.089Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:59.089Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:59.093Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:59.093Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:59.093Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:59.093Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:59.093Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:59.095Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:59.095Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:59.095Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:59.096Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:04:59.098Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 2.4952ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 2.4952ms"}}
[debug] [2024-11-14T19:04:59.099Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:59.099Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:59.099Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:59.099Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:59.100Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:59.100Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:04:59.100Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:04:59.100Z"],"workRunningCount":1}
[debug] [2024-11-14T19:04:59.100Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:04:59.102Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:04:59.103Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:04:59.103Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:04:59.103Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 2, {"user":"  documentsFound: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 2,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:04:59.130Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 27.0488ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 27.0488ms"}}
[debug] [2024-11-14T19:04:59.131Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:04:59.131Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:04:59.131Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:04:59.131Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    lastUpdated: '2024-11-14T19:04:59.074Z', {"user":"  lastUpdated: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:05:01.092Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.092Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:01.092Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.092Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:01.092Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:01.093Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:01.094Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:01.094Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:01.094Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:01.096Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:01.096Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.092Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:01.096Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.092Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:01.096Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:01.096Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:01.097Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:01.097Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:01.097Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:01.097Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:05:01.099Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.3511ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.3511ms"}}
[debug] [2024-11-14T19:05:01.099Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:01.099Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:01.099Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:01.100Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:01.096Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:01.105Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.105Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:01.096Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:01.106Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:01.096Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.105Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:01.106Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:01.106Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:01.106Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:01.106Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:01.107Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:05:01.156Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 58.4526ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 58.4526ms"}}
[debug] [2024-11-14T19:05:01.156Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:01.156Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:01.156Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:01.156Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.105Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:01.161Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 54.4603ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 54.4603ms"}}
[debug] [2024-11-14T19:05:01.162Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:01.162Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:01.162Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:01.162Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:01.633Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.633Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:01.633Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.633Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:01.633Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:01.633Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:01.634Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:01.634Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:01.634Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:01.635Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:01.635Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.633Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:01.635Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:01.633Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:01.635Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:01.635Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:01.636Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:01.636Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:01.636Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:01.637Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:01.674Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 39.904ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 39.904ms"}}
[debug] [2024-11-14T19:05:01.674Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:01.676Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:01.676Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:01.676Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:01.635Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:01.680Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 42.6367ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 42.6367ms"}}
[debug] [2024-11-14T19:05:01.680Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:01.680Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:01.680Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:01.680Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    lastUpdated: '2024-11-14T19:04:59.074Z', {"user":"  lastUpdated: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }"}}
[debug] [2024-11-14T19:05:02.203Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:02.203Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:02.203Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:02.203Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:02.203Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:02.204Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:02.204Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:02.204Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:02.205Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:02.207Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:02.207Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:02.203Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:02.207Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:02.203Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:02.207Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:02.207Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:02.208Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:02.208Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:02.208Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:02.209Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:05:02.267Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 58.7915ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 58.7915ms"}}
[debug] [2024-11-14T19:05:02.268Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:02.268Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:02.269Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:02.269Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:02.203Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:02.274Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 68.8611ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 68.8611ms"}}
[debug] [2024-11-14T19:05:02.274Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:02.275Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:02.275Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:02.275Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:02.559Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:02.559Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:02.559Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:02.559Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:02.559Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:02.561Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:02.561Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:02.561Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:02.562Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:02.563Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:02.563Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:02.559Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:02.563Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:02.559Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:02.563Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:02.563Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:02.564Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:02.564Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:02.565Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:02.565Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    lastUpdated: '2024-11-14T19:04:59.074Z', {"user":"  lastUpdated: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }"}}
[debug] [2024-11-14T19:05:02.627Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 65.3432ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 65.3432ms"}}
[debug] [2024-11-14T19:05:02.627Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:02.627Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:02.628Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:02.628Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:02.563Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:02.629Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 63.8815ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 63.8815ms"}}
[debug] [2024-11-14T19:05:02.630Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:02.630Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:02.630Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:02.630Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:12.674Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.674Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:12.674Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.674Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:12.674Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:12.677Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:12.677Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:12.677Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:12.678Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:05:12.680Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 2.7072ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 2.7072ms"}}
[debug] [2024-11-14T19:05:12.681Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:12.681Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:12.681Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:12.681Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:12.682Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.682Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:12.683Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.682Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:12.683Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:12.686Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:12.686Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:12.686Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:12.686Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'my name is moly and my boyfriend is robert', {"user":"    message: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'my name is moly and my boyfriend is robert',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731611083093-cbkn3zqsb {"user":"📝 Using chat ID: chat-1731611083093-cbkn3zqsb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731611083093-cbkn3zqsb"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 42, {"user":"  messageLength: 42,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 42,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: my name is moly and my boyfriend is robert {"user":"💬 Sending message to Gemini: my name is moly and my boyfriend is robert","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: my name is moly and my boyfriend is robert"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    historyLength: 8, {"user":"  historyLength: 8,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 8,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] }, {"user":"    { role: 'model', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 443, timestamp: '2024-11-14T19:05:15.278Z' } {"user":"✅ Response received: { responseLength: 443, timestamp: '2024-11-14T19:05:15.278Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 443, timestamp: '2024-11-14T19:05:15.278Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"  message: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >    userMessage: 'my name is moly and my boyfriend is robert', {"user":"  userMessage: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'my name is moly and my boyfriend is robert',"}}
[info] >    timestamp: '2024-11-14T19:05:15.278Z', {"user":"  timestamp: '2024-11-14T19:05:15.278Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:05:15.278Z',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-14T19:05:15.278Z', {"user":"  timestamp: '2024-11-14T19:05:15.278Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:05:15.278Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:15.291Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:05:15.291Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.682Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:15.291Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.682Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:05:15.291Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:15.291Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-14T19:05:15.292Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:15.292Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:15.292Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-14T19:05:15.293Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 676 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 676 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 676 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❌ Profile Analysis Error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}} {"user":"❌ Profile Analysis Error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ❌ Profile Analysis Error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}"}}
[info] >      at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:27) {"user":"    at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      ... 5 lines matching cause stack trace ... {"user":"    ... 5 lines matching cause stack trace ...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     ... 5 lines matching cause stack trace ..."}}
[info] >      at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"    at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >    stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\profileAnalysis.js:131:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\profileAnalysis.js:131:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\profileAnalysis.js:131:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\profileAnalysis.js:131:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\profileAnalysis.js:131:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\profileAnalysis.js:131:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:15.741Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 448.2192ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 448.2192ms"}}
[debug] [2024-11-14T19:05:15.742Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE"}}
[debug] [2024-11-14T19:05:15.742Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:15.742Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:15.742Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.682Z"],"workRunningCount":1}
[info] >  ❌ Profile analysis error: [FunctionsError [FirebaseError]: Failed to analyze profile from chat] { {"user":"❌ Profile analysis error: [FunctionsError [FirebaseError]: Failed to analyze profile from chat] {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ❌ Profile analysis error: [FunctionsError [FirebaseError]: Failed to analyze profile from chat] {"}}
[info] >    code: 'functions/internal', {"user":"  code: 'functions/internal',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'functions/internal',"}}
[info] >    customData: undefined, {"user":"  customData: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customData: undefined,"}}
[info] >    details: '[VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}}' {"user":"  details: '[VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   details: '[VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"  \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >    "chatId": "chat-1731611083093-cbkn3zqsb", {"user":"  \"chatId\": \"chat-1731611083093-cbkn3zqsb\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731611083093-cbkn3zqsb\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "my name is moly and my boyfriend is robert", {"user":"      \"content\": \"my name is moly and my boyfriend is robert\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"my name is moly and my boyfriend is robert\","}}
[info] >        "timestamp": "2024-11-14T19:05:15.744Z" {"user":"      \"timestamp\": \"2024-11-14T19:05:15.744Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:05:15.744Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      \"content\": \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        "timestamp": "2024-11-14T19:05:15.744Z" {"user":"      \"timestamp\": \"2024-11-14T19:05:15.744Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:05:15.744Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-14T19:05:15.744Z", {"user":"  \"timestamp\": \"2024-11-14T19:05:15.744Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-14T19:05:15.744Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"    \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:15.773Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:05:15.773Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.682Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:15.773Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.682Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:05:15.773Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:15.773Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-14T19:05:15.774Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:15.774Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:15.775Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-14T19:05:15.775Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 715 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 715 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 715 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731611083093-cbkn3zqsb { totalMessageCount: 4, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731611083093-cbkn3zqsb { totalMessageCount: 4, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731611083093-cbkn3zqsb { totalMessageCount: 4, newMessagesAdded: 2 }"}}
[debug] [2024-11-14T19:05:15.814Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 39.7542ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 39.7542ms"}}
[debug] [2024-11-14T19:05:15.816Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE"}}
[debug] [2024-11-14T19:05:15.816Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:15.816Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:15.816Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:12.682Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 4 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 4 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 4 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:15.818Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 3132.1268ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 3132.1268ms"}}
[debug] [2024-11-14T19:05:15.819Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:15.819Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:15.819Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:15.819Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:15.823Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:15.823Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:15.823Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:15.823Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:15.823Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:15.824Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:15.825Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:15.825Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:15.825Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:05:15.828Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 2.7136ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 2.7136ms"}}
[debug] [2024-11-14T19:05:15.828Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:15.828Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:15.829Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:15.829Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:15.830Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:15.830Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:15.830Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:15.830Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:15.830Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:15.833Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:15.833Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:15.833Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:15.834Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 2, {"user":"  documentsFound: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 2,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:15.865Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 31.2742ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 31.2742ms"}}
[debug] [2024-11-14T19:05:15.866Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:15.866Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:15.866Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:15.866Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:05:15.801Z', {"user":"  lastUpdated: '2024-11-14T19:05:15.801Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:05:15.801Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly and my boyfriend is robert', {"user":"      content: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly and my boyfriend is robert',"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:05:17.486Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.486Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:17.486Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.486Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:17.486Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:17.487Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:17.487Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:17.487Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:17.487Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:17.489Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:17.489Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.486Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:17.489Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.486Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:17.489Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:17.489Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:17.490Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:17.490Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:17.490Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:17.491Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:05:17.492Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.1505ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.1505ms"}}
[debug] [2024-11-14T19:05:17.492Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:17.492Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:17.492Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:17.492Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:17.489Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:17.497Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.497Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:17.489Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:17.497Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:17.489Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.497Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:17.497Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:17.498Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:17.498Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:17.498Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:17.499Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:05:17.538Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 39.9529ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 39.9529ms"}}
[debug] [2024-11-14T19:05:17.539Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:17.539Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:17.541Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:17.541Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:17.489Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:17.542Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 51.5439ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 51.5439ms"}}
[debug] [2024-11-14T19:05:17.543Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:17.543Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:17.543Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:17.543Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:17.774Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.774Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:17.775Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.774Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:17.775Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:17.775Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:17.776Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:17.776Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:17.776Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:17.777Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:17.777Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.774Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:17.777Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.774Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:17.777Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:17.777Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:17.778Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:17.778Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:17.778Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:17.779Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:05:15.801Z', {"user":"  lastUpdated: '2024-11-14T19:05:15.801Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:05:15.801Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly and my boyfriend is robert', {"user":"      content: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly and my boyfriend is robert',"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }"}}
[debug] [2024-11-14T19:05:17.829Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 50.3614ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 50.3614ms"}}
[debug] [2024-11-14T19:05:17.830Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:17.830Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:17.830Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:17.830Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:17.774Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:17.834Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 58.211ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 58.211ms"}}
[debug] [2024-11-14T19:05:17.835Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:17.835Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:17.835Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:17.835Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:18.630Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:18.630Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:18.630Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:18.630Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:18.630Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:18.631Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:18.631Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:18.632Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:18.632Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:18.633Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:18.633Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:18.630Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:18.633Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:18.630Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:18.633Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:18.633Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:18.634Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:18.634Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:18.634Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:18.634Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611118623-jbaobfbw7' {"user":"      chatId: 'chat-1731611118623-jbaobfbw7'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611118623-jbaobfbw7'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 2, {"user":"  documentsFound: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 2,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:05:15.801Z', {"user":"  lastUpdated: '2024-11-14T19:05:15.801Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:05:15.801Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly and my boyfriend is robert', {"user":"      content: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly and my boyfriend is robert',"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:05:18.702Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 67.6026ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 67.6026ms"}}
[debug] [2024-11-14T19:05:18.703Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:18.703Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:18.703Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:18.703Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:18.630Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:18.704Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 71.9728ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 71.9728ms"}}
[debug] [2024-11-14T19:05:18.705Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:18.705Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:18.705Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:18.705Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:19.454Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.454Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:19.454Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.454Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:19.454Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:19.455Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:19.455Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:19.455Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:19.456Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:19.457Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:19.457Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.454Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:19.457Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.454Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:19.457Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:19.458Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:19.459Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:19.459Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:19.459Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:19.460Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:05:15.801Z', {"user":"  lastUpdated: '2024-11-14T19:05:15.801Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:05:15.801Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly and my boyfriend is robert', {"user":"      content: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly and my boyfriend is robert',"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }"}}
[debug] [2024-11-14T19:05:19.508Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 48.7946ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 48.7946ms"}}
[debug] [2024-11-14T19:05:19.509Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:19.509Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:19.509Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:19.509Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.454Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:19.513Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 56.9978ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 56.9978ms"}}
[debug] [2024-11-14T19:05:19.514Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:19.514Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:19.514Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:19.514Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:19.995Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.995Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:19.996Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.995Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:19.996Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:19.996Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:19.997Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:19.997Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:19.997Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:19.998Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:19.998Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.995Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:19.998Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.995Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:19.998Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:19.998Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:19.999Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:19.999Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:19.999Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:19.999Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:05:20.053Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 53.4519ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 53.4519ms"}}
[debug] [2024-11-14T19:05:20.053Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:20.054Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:20.054Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:20.054Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:19.995Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:20.060Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 62.6815ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 62.6815ms"}}
[debug] [2024-11-14T19:05:20.060Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:20.061Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:20.061Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:20.061Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:20.307Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:20.307Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:20.307Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:20.307Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:20.308Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:20.308Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:20.308Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:20.309Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:20.309Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:20.311Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:20.311Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:20.307Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:20.311Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:20.307Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:20.311Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:20.311Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:20.312Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:20.312Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:20.312Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:20.312Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:05:15.801Z', {"user":"  lastUpdated: '2024-11-14T19:05:15.801Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:05:15.801Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly and my boyfriend is robert', {"user":"      content: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly and my boyfriend is robert',"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }"}}
[debug] [2024-11-14T19:05:20.365Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 52.6223ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 52.6223ms"}}
[debug] [2024-11-14T19:05:20.366Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:20.366Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:20.366Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:20.366Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:20.307Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:20.370Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 61.479ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 61.479ms"}}
[debug] [2024-11-14T19:05:20.371Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:20.371Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:20.371Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:20.371Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:33.029Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:33.029Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:33.029Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:33.029Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:33.029Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:33.032Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:33.032Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:33.032Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:33.033Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:05:33.035Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 2.4247ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 2.4247ms"}}
[debug] [2024-11-14T19:05:33.036Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:33.036Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:33.036Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:33.036Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:33.037Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:33.037Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:33.037Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:33.037Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:33.037Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:33.040Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:33.040Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:33.040Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:33.040Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'i also have a mother', {"user":"    message: 'i also have a mother',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'i also have a mother',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731611083093-cbkn3zqsb {"user":"📝 Using chat ID: chat-1731611083093-cbkn3zqsb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731611083093-cbkn3zqsb"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 20, {"user":"  messageLength: 20,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 20,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: i also have a mother {"user":"💬 Sending message to Gemini: i also have a mother","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: i also have a mother"}}
[info] >  💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}} {"user":"💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}"}}
[info] >      at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:27) {"user":"    at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      ... 6 lines matching cause stack trace ... {"user":"    ... 6 lines matching cause stack trace ...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     ... 6 lines matching cause stack trace ..."}}
[info] >      at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"    at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >    stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:33.496Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 456.0911ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 456.0911ms"}}
[debug] [2024-11-14T19:05:33.497Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:33.497Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:33.497Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:33.497Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:38.506Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:38.505Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:38.506Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:38.505Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:38.506Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:38.508Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:38.508Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:38.508Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:38.508Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:05:38.511Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 2.6027ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 2.6027ms"}}
[debug] [2024-11-14T19:05:38.511Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:38.511Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:38.511Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:38.511Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:38.512Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:38.512Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:38.512Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:38.512Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:38.512Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:38.514Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:38.514Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:38.514Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:38.515Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'i also have a mother', {"user":"    message: 'i also have a mother',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'i also have a mother',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731611083093-cbkn3zqsb {"user":"📝 Using chat ID: chat-1731611083093-cbkn3zqsb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731611083093-cbkn3zqsb"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 20, {"user":"  messageLength: 20,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 20,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: i also have a mother {"user":"💬 Sending message to Gemini: i also have a mother","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: i also have a mother"}}
[info] >  💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}} {"user":"💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}"}}
[info] >      at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:27) {"user":"    at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      ... 6 lines matching cause stack trace ... {"user":"    ... 6 lines matching cause stack trace ...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     ... 6 lines matching cause stack trace ..."}}
[info] >      at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"    at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >    stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:38.793Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 277.9859ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 277.9859ms"}}
[debug] [2024-11-14T19:05:38.793Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:38.793Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:38.793Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:38.793Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:43.808Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:43.808Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:43.809Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:43.808Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:43.809Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:43.810Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:43.810Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:43.810Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:43.810Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:05:43.813Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 2.6901ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 2.6901ms"}}
[debug] [2024-11-14T19:05:43.814Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:43.814Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:43.814Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:43.814Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:43.815Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:43.815Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:43.815Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:43.815Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:43.815Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:43.815Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:43.816Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:43.816Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:43.816Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'i also have a mother', {"user":"    message: 'i also have a mother',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'i also have a mother',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731611083093-cbkn3zqsb {"user":"📝 Using chat ID: chat-1731611083093-cbkn3zqsb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731611083093-cbkn3zqsb"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 20, {"user":"  messageLength: 20,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 20,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: i also have a mother {"user":"💬 Sending message to Gemini: i also have a mother","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: i also have a mother"}}
[info] >  💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}} {"user":"💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}"}}
[info] >      at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:27) {"user":"    at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      ... 6 lines matching cause stack trace ... {"user":"    ... 6 lines matching cause stack trace ...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     ... 6 lines matching cause stack trace ..."}}
[info] >      at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"    at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >    stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:44.115Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 298.3918ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 298.3918ms"}}
[debug] [2024-11-14T19:05:44.115Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:44.115Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:44.115Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:44.115Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:49.133Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:49.133Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:49.133Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:49.133Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:49.133Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:49.135Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:49.135Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:49.136Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:49.136Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:05:49.138Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 2.0743ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 2.0743ms"}}
[debug] [2024-11-14T19:05:49.139Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:49.139Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:49.139Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:49.139Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:49.140Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:49.140Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:49.140Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:05:49.140Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:49.140Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:05:49.143Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:49.143Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:05:49.143Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:05:49.144Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'i also have a mother', {"user":"    message: 'i also have a mother',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'i also have a mother',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731611083093-cbkn3zqsb {"user":"📝 Using chat ID: chat-1731611083093-cbkn3zqsb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731611083093-cbkn3zqsb"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 20, {"user":"  messageLength: 20,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 20,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: i also have a mother {"user":"💬 Sending message to Gemini: i also have a mother","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: i also have a mother"}}
[info] >  💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}} {"user":"💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}"}}
[info] >      at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:27) {"user":"    at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      ... 6 lines matching cause stack trace ... {"user":"    ... 6 lines matching cause stack trace ...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     ... 6 lines matching cause stack trace ..."}}
[info] >      at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"    at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >    stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:49.450Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 306.2273ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 306.2273ms"}}
[debug] [2024-11-14T19:05:49.451Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:05:49.451Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:49.451Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:49.451Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:51.625Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.625Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:51.625Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.625Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:51.625Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:51.626Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:51.626Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:51.626Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:51.627Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:51.628Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:51.628Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.625Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:51.628Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.625Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:51.628Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:51.628Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:51.628Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:51.629Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:51.629Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:51.629Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:05:51.630Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 3.5871ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 3.5871ms"}}
[debug] [2024-11-14T19:05:51.631Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:51.631Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:51.631Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:51.631Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:51.628Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:51.632Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 2.9226ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 2.9226ms"}}
[debug] [2024-11-14T19:05:51.632Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:51.632Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:51.632Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:51.632Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:51.633Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.633Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:51.633Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.633Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:51.633Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:51.635Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:51.635Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:51.636Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:51.636Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:51.637Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:51.637Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.633Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:51.637Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.633Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:51.637Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:51.637Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:51.639Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:51.639Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:51.639Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:51.640Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:51.663Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 26.9936ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 26.9936ms"}}
[debug] [2024-11-14T19:05:51.663Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:51.663Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:51.663Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:51.663Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:51.637Z"],"workRunningCount":1}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:05:51.670Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 30.4404ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 30.4404ms"}}
[debug] [2024-11-14T19:05:51.671Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:51.671Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:51.671Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:51.671Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:05:51.881Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.881Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:51.881Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.881Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:51.881Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:51.882Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:51.882Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:51.882Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:51.882Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:51.884Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:51.883Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.881Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:51.884Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.881Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:51.883Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:51.884Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:51.884Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:51.884Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:51.885Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:51.885Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:05:15.801Z', {"user":"  lastUpdated: '2024-11-14T19:05:15.801Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:05:15.801Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly and my boyfriend is robert', {"user":"      content: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly and my boyfriend is robert',"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }"}}
[debug] [2024-11-14T19:05:51.928Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 42.7675ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 42.7675ms"}}
[debug] [2024-11-14T19:05:51.928Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:51.928Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:51.928Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:51.928Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:51.881Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:51.931Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 48.7319ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 48.7319ms"}}
[debug] [2024-11-14T19:05:51.932Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:51.932Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:51.932Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:51.932Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:52.563Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:52.563Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:52.563Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:52.563Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:52.563Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:52.564Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:52.564Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:52.564Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:52.564Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:52.565Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:52.565Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:52.563Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:52.566Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:52.563Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:52.565Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:52.566Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:52.566Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:52.566Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:52.566Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:52.567Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-14T19:05:52.597Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 33.2061ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 33.2061ms"}}
[debug] [2024-11-14T19:05:52.598Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:52.598Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:52.598Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:52.598Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:52.565Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:52.601Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 34.7619ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 34.7619ms"}}
[debug] [2024-11-14T19:05:52.602Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:52.602Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:52.602Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:52.602Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:05:52.900Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:52.900Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:05:52.900Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:52.900Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:52.900Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:05:52.901Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:52.901Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:52.901Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:05:52.902Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:05:52.903Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:52.902Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:52.900Z"],"workRunningCount":1}
[debug] [2024-11-14T19:05:52.903Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:52.900Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:05:52.902Z"],"workRunningCount":2}
[debug] [2024-11-14T19:05:52.903Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:05:52.903Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:05:52.903Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:05:52.903Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:05:52.904Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:05:15.801Z', {"user":"  lastUpdated: '2024-11-14T19:05:15.801Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:05:15.801Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly and my boyfriend is robert', {"user":"      content: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly and my boyfriend is robert',"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }"}}
[debug] [2024-11-14T19:05:52.944Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 40.5262ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 40.5262ms"}}
[debug] [2024-11-14T19:05:52.945Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:05:52.945Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:52.945Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:52.945Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:05:52.900Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-14T19:05:52.950Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 48.6918ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 48.6918ms"}}
[debug] [2024-11-14T19:05:52.951Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:05:52.951Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:05:52.951Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:05:52.951Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:16.152Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.152Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:16.152Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.152Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:16.152Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:06:16.156Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:16.156Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:06:16.157Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:06:16.157Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[debug] [2024-11-14T19:06:16.162Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 4.591ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 4.591ms"}}
[debug] [2024-11-14T19:06:16.163Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:06:16.163Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:16.163Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:16.163Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:16.164Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.164Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:16.164Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.164Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:16.164Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-14T19:06:16.167Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:16.167Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-14T19:06:16.168Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-14T19:06:16.168Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'i also have a mother', {"user":"    message: 'i also have a mother',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'i also have a mother',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731611083093-cbkn3zqsb {"user":"📝 Using chat ID: chat-1731611083093-cbkn3zqsb","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731611083093-cbkn3zqsb"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 20, {"user":"  messageLength: 20,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 20,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: i also have a mother {"user":"💬 Sending message to Gemini: i also have a mother","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: i also have a mother"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    historyLength: 14, {"user":"  historyLength: 14,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 14,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 182, timestamp: '2024-11-14T19:06:18.008Z' } {"user":"✅ Response received: { responseLength: 182, timestamp: '2024-11-14T19:06:18.008Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 182, timestamp: '2024-11-14T19:06:18.008Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\n", {"user":"  message: \"Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\\n\","}}
[info] >    userMessage: 'i also have a mother', {"user":"  userMessage: 'i also have a mother',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'i also have a mother',"}}
[info] >    timestamp: '2024-11-14T19:06:18.008Z', {"user":"  timestamp: '2024-11-14T19:06:18.008Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:06:18.008Z',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-14T19:06:18.008Z', {"user":"  timestamp: '2024-11-14T19:06:18.008Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-14T19:06:18.008Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:06:18.019Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:06:18.019Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.164Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:18.019Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.164Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-14T19:06:18.019Z"],"workRunningCount":2}
[debug] [2024-11-14T19:06:18.019Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-14T19:06:18.020Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:18.020Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-14T19:06:18.020Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-14T19:06:18.021Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 393 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 393 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 393 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:06:23.787Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 5766.8642ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 5766.8642ms"}}
[debug] [2024-11-14T19:06:23.788Z] [worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-88a8b6f6-a672-40df-babd-731f83f3738e]: IDLE"}}
[debug] [2024-11-14T19:06:23.788Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:23.788Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:23.788Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.164Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [] } {"user":"    analysis: { nodes: [Array], links: [] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"  \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >    "chatId": "chat-1731611083093-cbkn3zqsb", {"user":"  \"chatId\": \"chat-1731611083093-cbkn3zqsb\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731611083093-cbkn3zqsb\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "i also have a mother", {"user":"      \"content\": \"i also have a mother\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"i also have a mother\","}}
[info] >        "timestamp": "2024-11-14T19:06:23.789Z" {"user":"      \"timestamp\": \"2024-11-14T19:06:23.789Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:06:23.789Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\n", {"user":"      \"content\": \"Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\\n\","}}
[info] >        "timestamp": "2024-11-14T19:06:23.789Z" {"user":"      \"timestamp\": \"2024-11-14T19:06:23.789Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-14T19:06:23.789Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-14T19:06:23.789Z", {"user":"  \"timestamp\": \"2024-11-14T19:06:23.789Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-14T19:06:23.789Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "eXGzB2SCOiaBgSiX2dxPlfwf8AiO", {"user":"    \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"eXGzB2SCOiaBgSiX2dxPlfwf8AiO\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:06:23.815Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:06:23.815Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.164Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:23.815Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.164Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-14T19:06:23.815Z"],"workRunningCount":2}
[debug] [2024-11-14T19:06:23.815Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-14T19:06:23.817Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:23.817Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:06:23.817Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-14T19:06:23.818Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 432 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 432 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 432 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-14T19:06:23.789Z' {"user":"      timestamp: '2024-11-14T19:06:23.789Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:06:23.789Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:06:23.846Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 27.6798ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 27.6798ms"}}
[debug] [2024-11-14T19:06:23.846Z] [worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-020b642e-7a69-4bd8-876f-34ba19963fe7]: IDLE"}}
[debug] [2024-11-14T19:06:23.846Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:23.846Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:23.846Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-14T19:06:16.164Z"],"workRunningCount":1}
[info] >  ✅ Chat history saved/updated: chat-1731611083093-cbkn3zqsb { totalMessageCount: 6, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731611083093-cbkn3zqsb { totalMessageCount: 6, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731611083093-cbkn3zqsb { totalMessageCount: 6, newMessagesAdded: 2 }"}}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 6 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 6 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 6 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:06:23.851Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 7682.813ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 7682.813ms"}}
[debug] [2024-11-14T19:06:23.851Z] [worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-bcc872a7-8132-40a2-badf-b974b5695e55]: IDLE"}}
[debug] [2024-11-14T19:06:23.851Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:23.852Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:23.852Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:23.856Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:23.856Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:23.856Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:23.856Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:23.856Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:06:23.858Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:23.858Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:06:23.859Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:06:23.859Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:06:23.862Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 2.9391ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 2.9391ms"}}
[debug] [2024-11-14T19:06:23.863Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:06:23.863Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:23.863Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:23.863Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:23.865Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:23.865Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:23.865Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:23.865Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:23.865Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:06:23.868Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:23.868Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:06:23.868Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:06:23.869Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' } {"user":"  data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 2, {"user":"  documentsFound: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 2,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:06:23.897Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 28.9164ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 28.9164ms"}}
[debug] [2024-11-14T19:06:23.898Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:06:23.898Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:23.899Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:23.899Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:06:23.830Z', {"user":"  lastUpdated: '2024-11-14T19:06:23.830Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:06:23.830Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly and my boyfriend is robert', {"user":"      content: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly and my boyfriend is robert',"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'i also have a mother', {"user":"      content: 'i also have a mother',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'i also have a mother',"}}
[info] >        timestamp: '2024-11-14T19:06:23.789Z' {"user":"      timestamp: '2024-11-14T19:06:23.789Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:06:23.789Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\n", {"user":"      content: \"Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\\n\","}}
[info] >        timestamp: '2024-11-14T19:06:23.789Z' {"user":"      timestamp: '2024-11-14T19:06:23.789Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:06:23.789Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 2, chatId: 'All chats' }"}}
[debug] [2024-11-14T19:06:26.521Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.521Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:26.521Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.521Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:26.521Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:06:26.522Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:26.522Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:06:26.522Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:06:26.522Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:06:26.524Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:26.524Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.521Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:26.524Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.521Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:26.524Z"],"workRunningCount":2}
[debug] [2024-11-14T19:06:26.524Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:06:26.525Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:26.525Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:06:26.525Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:06:26.526Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[debug] [2024-11-14T19:06:26.527Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.8404ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.8404ms"}}
[debug] [2024-11-14T19:06:26.528Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:06:26.528Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:26.528Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:26.528Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:26.524Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731610983368-36fynyh1n' {"user":"    chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-14T19:06:26.533Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.533Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:26.524Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:26.533Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:26.524Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.533Z"],"workRunningCount":2}
[debug] [2024-11-14T19:06:26.533Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:06:26.534Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:26.534Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:06:26.534Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:06:26.535Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731610983368-36fynyh1n' {"user":"      chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n' {"user":"  chatId: 'chat-1731610983368-36fynyh1n'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:03:13.561Z', {"user":"  createdAt: '2024-11-14T19:03:13.561Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:03:13.561Z',"}}
[info] >    chatId: 'chat-1731610983368-36fynyh1n', {"user":"  chatId: 'chat-1731610983368-36fynyh1n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731610983368-36fynyh1n',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:03:56.283Z', {"user":"  lastUpdated: '2024-11-14T19:03:56.283Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:03:56.283Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello', {"user":"      content: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello',"}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\n", {"user":"      content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello there! How can I help you today?  Are you looking to discuss a specific relationship, or are you interested in learning more about relationship dynamics in general?  Let me know what's on your mind.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:13.509Z' {"user":"      timestamp: '2024-11-14T19:03:13.509Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:13.509Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly', {"user":"      content: 'my name is moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly',"}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\n", {"user":"      content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly!  How can I help you today?  Remember, I'm here to listen and offer support, but I'm not a substitute for a licensed therapist.  If you're facing significant challenges, please consider seeking professional help.\\n\","}}
[info] >        timestamp: '2024-11-14T19:03:56.239Z' {"user":"      timestamp: '2024-11-14T19:03:56.239Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:03:56.239Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731610983368-36fynyh1n' }"}}
[debug] [2024-11-14T19:06:26.578Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 51.9961ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 51.9961ms"}}
[debug] [2024-11-14T19:06:26.578Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:06:26.578Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:26.578Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:26.579Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.533Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 0 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 0 }"}}
[debug] [2024-11-14T19:06:26.583Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 48.4251ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 48.4251ms"}}
[debug] [2024-11-14T19:06:26.584Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:06:26.584Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:26.584Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:26.584Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:26.996Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.996Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-14T19:06:26.996Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.996Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:26.996Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-14T19:06:26.997Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:26.997Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-14T19:06:26.997Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-14T19:06:26.997Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: BUSY"}}
[debug] [2024-11-14T19:06:26.998Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:26.998Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.996Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:26.998Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.996Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-14T19:06:26.998Z"],"workRunningCount":2}
[debug] [2024-11-14T19:06:26.998Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-14T19:06:26.999Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-14T19:06:26.999Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-14T19:06:26.999Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-14T19:06:27.000Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 58 47 7a 42 32 53 43 4f 69 61 42 67 53 69 58 32 64 78 50 6c 66 77 66 38 41 69 4f 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] }, {"user":"    auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >        chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"      chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >      chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"    chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb' {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-14T19:04:59.074Z', {"user":"  createdAt: '2024-11-14T19:04:59.074Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-14T19:04:59.074Z',"}}
[info] >    chatId: 'chat-1731611083093-cbkn3zqsb', {"user":"  chatId: 'chat-1731611083093-cbkn3zqsb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731611083093-cbkn3zqsb',"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    lastUpdated: '2024-11-14T19:06:23.830Z', {"user":"  lastUpdated: '2024-11-14T19:06:23.830Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-14T19:06:23.830Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my boyfriends name is robert', {"user":"      content: 'hello my boyfriends name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my boyfriends name is robert',"}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\n", {"user":"      content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's great that you're thinking about your relationships! To help me understand your relationships better, could you tell me more about which relationship(s) you're focusing on?  For example, are you concerned about your relationship with your boyfriend, Robert, or perhaps a different relationship?  Knowing this will help me give you relevant advice.\\n\","}}
[info] >        timestamp: '2024-11-14T19:04:59.021Z' {"user":"      timestamp: '2024-11-14T19:04:59.021Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:04:59.021Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'my name is moly and my boyfriend is robert', {"user":"      content: 'my name is moly and my boyfriend is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'my name is moly and my boyfriend is robert',"}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\n", {"user":"      content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, it's good you're thinking about this.  To help me understand better, perhaps we can focus on specific areas of your relationship with Robert?  For example, are you facing a particular challenge, or is there something specific you'd like to discuss?  We could talk about communication, trust, conflict resolution, or anything else that's on your mind.  What feels most pressing for you right now concerning your relationship with Robert?\\n\","}}
[info] >        timestamp: '2024-11-14T19:05:15.744Z' {"user":"      timestamp: '2024-11-14T19:05:15.744Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:05:15.744Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'i also have a mother', {"user":"      content: 'i also have a mother',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'i also have a mother',"}}
[info] >        timestamp: '2024-11-14T19:06:23.789Z' {"user":"      timestamp: '2024-11-14T19:06:23.789Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:06:23.789Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\n", {"user":"      content: \"Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, that's a good starting point.  Let's focus on your relationship with Robert for now.  Is there anything specific you'd like to talk about regarding your relationship with him?\\n\","}}
[info] >        timestamp: '2024-11-14T19:06:23.789Z' {"user":"      timestamp: '2024-11-14T19:06:23.789Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-14T19:06:23.789Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' } {"user":"✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalChats: 1, chatId: 'chat-1731611083093-cbkn3zqsb' }"}}
[debug] [2024-11-14T19:06:27.055Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 55.0894ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 55.0894ms"}}
[debug] [2024-11-14T19:06:27.056Z] [worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-44e394c6-f058-45fd-ac44-497ece8f2281]: IDLE"}}
[debug] [2024-11-14T19:06:27.056Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:27.056Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:27.056Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-14T19:06:26.996Z"],"workRunningCount":1}
[debug] [2024-11-14T19:06:27.057Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 59.5ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 59.5ms"}}
[debug] [2024-11-14T19:06:27.057Z] [worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-c40246d1-6796-4754-b36b-4c407fa91b6f]: IDLE"}}
[debug] [2024-11-14T19:06:27.058Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-14T19:06:27.058Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-14T19:06:27.058Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO', {"user":"  userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eXGzB2SCOiaBgSiX2dxPlfwf8AiO',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 0 } {"user":"✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: eXGzB2SCOiaBgSiX2dxPlfwf8AiO { totalNodes: 2, totalLinks: 0 }"}}
[debug] [2024-11-15T21:53:06.708Z] ----------------------------------------------------------------------
[debug] [2024-11-15T21:53:06.712Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js emulators:start
[debug] [2024-11-15T21:53:06.712Z] CLI Version:   13.24.2
[debug] [2024-11-15T21:53:06.712Z] Platform:      win32
[debug] [2024-11-15T21:53:06.712Z] Node Version:  v20.18.0
[debug] [2024-11-15T21:53:06.713Z] Time:          Sat Nov 16 2024 08:53:06 GMT+1100 (Australian Eastern Daylight Time)
[debug] [2024-11-15T21:53:06.713Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-11-15T21:53:06.717Z] >>> [apiv2][query] GET https://firebase-public.firebaseio.com/cli.json [none]
[debug] [2024-11-15T21:53:06.872Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-11-15T21:53:06.872Z] > authorizing via signed-in user (lisakhun58@gmail.com)
[debug] [2024-11-15T21:53:07.104Z] java version "21.0.5" 2024-10-15 LTS

[debug] [2024-11-15T21:53:07.105Z] Java(TM) SE Runtime Environment (build 21.0.5+9-LTS-239)
Java HotSpot(TM) 64-Bit Server VM (build 21.0.5+9-LTS-239, mixed mode, sharing)

[debug] [2024-11-15T21:53:07.134Z] Parsed Java major version: 21
[info] i  emulators: Starting emulators: auth, functions, firestore, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, extensions"}}
[debug] [2024-11-15T21:53:07.137Z] Checked if tokens are valid: false, expires at: 1731634484957
[debug] [2024-11-15T21:53:07.137Z] Checked if tokens are valid: false, expires at: 1731634484957
[debug] [2024-11-15T21:53:07.138Z] > refreshing access token with scopes: []
[debug] [2024-11-15T21:53:07.139Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2024-11-15T21:53:07.139Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-11-15T21:53:07.307Z] <<< [apiv2][status] GET https://firebase-public.firebaseio.com/cli.json 200
[debug] [2024-11-15T21:53:07.307Z] <<< [apiv2][body] GET https://firebase-public.firebaseio.com/cli.json {"cloudBuildErrorAfter":1594252800000,"cloudBuildWarnAfter":1590019200000,"defaultNode10After":1594252800000,"minVersion":"3.0.5","node8DeploysDisabledAfter":1613390400000,"node8RuntimeDisabledAfter":1615809600000,"node8WarnAfter":1600128000000}
[debug] [2024-11-15T21:53:07.439Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2024-11-15T21:53:07.439Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-11-15T21:53:07.448Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc [none]
[debug] [2024-11-15T21:53:08.425Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc 200
[debug] [2024-11-15T21:53:08.426Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc {"projectId":"notalone-de4fc","projectNumber":"784029337452","displayName":"NotAlone","name":"projects/notalone-de4fc","resources":{"hostingSite":"notalone-de4fc"},"state":"ACTIVE","etag":"1_570ddbb0-4c2c-4e94-b3b3-0005c847d3e1"}
[debug] [2024-11-15T21:53:08.441Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-15T21:53:08.441Z] [auth] Authentication Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-15T21:53:08.441Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-15T21:53:08.441Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[warn] !  ui: Emulator UI unable to start on port 4000, starting on 4001 instead. {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI unable to start on port 4000, starting on 4001 instead."}}
[debug] [2024-11-15T21:53:08.443Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4001},{"address":"::1","family":"IPv6","port":4001}]},"metadata":{"message":"assigned listening specs for emulators"}}
[warn] !  emulators: It seems that you are running multiple instances of the emulator suite for project notalone-de4fc. This may result in unexpected behavior. 
[debug] [2024-11-15T21:53:08.449Z] [hub] writing locator at C:\Users\Rob\AppData\Local\Temp\hub-notalone-de4fc.json
[debug] [2024-11-15T21:53:08.458Z] [Extensions] Started Extensions emulator, this is a noop.
[debug] [2024-11-15T21:53:08.465Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-15T21:53:08.465Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-15T21:53:08.465Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-15T21:53:08.465Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4001},{"address":"::1","family":"IPv6","port":4001}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mdatabase, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2024-11-15T21:53:08.470Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-15T21:53:08.473Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[debug] [2024-11-15T21:53:08.473Z] Checked if tokens are valid: true, expires at: 1731711186439
[debug] [2024-11-15T21:53:08.473Z] Checked if tokens are valid: true, expires at: 1731711186439
[debug] [2024-11-15T21:53:08.474Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig [none]
[debug] [2024-11-15T21:53:09.247Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig 200
[debug] [2024-11-15T21:53:09.247Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig {"projectId":"notalone-de4fc","storageBucket":"notalone-de4fc.firebasestorage.app"}
[debug] [2024-11-15T21:53:09.266Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-11-15T21:53:09.266Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2024-11-15T21:53:09.266Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","C:\\Users\\Rob\\.cache\\firebase\\emulators\\cloud-firestore-emulator-v1.19.8.jar","--host","127.0.0.1","--port",8080,"--websocket_port",9150,"--project_id","notalone-de4fc","--rules","C:\\Users\\Rob\\Apps\\not-alone\\firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false,"shell":false,"port":8080} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"C:\\\\Users\\\\Rob\\\\.cache\\\\firebase\\\\emulators\\\\cloud-firestore-emulator-v1.19.8.jar\",\"--host\",\"127.0.0.1\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"notalone-de4fc\",\"--rules\",\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false,\"shell\":false,\"port\":8080}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[info] +  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2024-11-15T21:53:19.749Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-11-15T21:53:19.749Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2024-11-15T21:53:19.750Z] Starting Emulator UI with command {"binary":"node","args":["C:\\Users\\Rob\\.cache\\firebase\\emulators\\ui-v1.14.0\\server\\server.mjs"],"optionalArgs":[],"joinArgs":false,"shell":false,"port":4000} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"C:\\\\Users\\\\Rob\\\\.cache\\\\firebase\\\\emulators\\\\ui-v1.14.0\\\\server\\\\server.mjs\"],\"optionalArgs\":[],\"joinArgs\":false,\"shell\":false,\"port\":4000}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2024-11-15T21:53:19.960Z] Web / API server started at 127.0.0.1:4001
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4001\n"}}
[debug] [2024-11-15T21:53:19.960Z] Web / API server started at ::1:4001
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4001\n"}}
[debug] [2024-11-15T21:53:19.986Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "C:\Users\Rob\Apps\not-alone\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\Rob\\Apps\\not-alone\\functions\" for Cloud Functions..."}}
[debug] [2024-11-15T21:53:19.993Z] Validating nodejs source
[debug] [2024-11-15T21:53:21.473Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-15T21:53:21.474Z] Building nodejs source
[debug] [2024-11-15T21:53:21.475Z] Failed to find version of module node: reached end of search path C:\Users\Rob\Apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-15T21:53:21.481Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-15T21:53:21.507Z] Found firebase-functions binary at 'C:\Users\Rob\Apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8556

[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-15T21:53:23.225Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"deleteChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"deleteChatHistory"},"analyzeProfileFromChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"analyzeProfileFromChat"},"saveProfileHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveProfileHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-15T21:53:27.293Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-15T21:53:27.294Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat."}}
[info] +  functions[us-central1-saveChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveChatHistory)."}}
[info] +  functions[us-central1-getChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/getChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/getChatHistory)."}}
[info] +  functions[us-central1-deleteChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/deleteChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/deleteChatHistory)."}}
[info] +  functions[us-central1-analyzeProfileFromChat]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/analyzeProfileFromChat). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/analyzeProfileFromChat)."}}
[info] +  functions[us-central1-saveProfileHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveProfileHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveProfileHistory)."}}
[info] +  functions[us-central1-processChat]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/processChat). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/processChat)."}}
[debug] [2024-11-15T21:53:27.312Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4001/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬──────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI              │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Authentication │ 127.0.0.1:9099 │ http://127.0.0.1:4001/auth       │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4001/functions  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Firestore      │ 127.0.0.1:8080 │ http://127.0.0.1:4001/firestore  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Extensions     │ 127.0.0.1:5001 │ http://127.0.0.1:4001/extensions │
└────────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150
┌─────────────────────────┬───────────────┬─────────────────────┐
│ Extension Instance Name │ Extension Ref │ View in Emulator UI │
└─────────────────────────┴───────────────┴─────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2024-11-15T23:35:29.160Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-15T23:35:29.161Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"e06c76a8-9c57-4c67-810d-8bc1954754d1","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-15T23:35:29.158Z","data":{"uid":"NwIgRTMlgHi2etT8GS7zBqiUJyp2","email":"peach.algae.969@example.com","emailVerified":true,"displayName":"Peach Algae","metadata":{"creationTime":"2024-11-15T23:35:29.156Z","lastSignInTime":"2024-11-15T23:35:29.156Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"8603389476957390678854789791373261145608","federatedId":"8603389476957390678854789791373261145608","displayName":"Peach Algae","email":"peach.algae.969@example.com","screenName":"algae_peach"}]}}
[debug] [2024-11-15T23:35:29.176Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-15T23:35:29.176Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-15T23:35:29.251Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:29.250Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:29.251Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:29.250Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:29.252Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-15T23:35:29.258Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:29.259Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:29.276Z] [worker-pool] addWorker(us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-getChatHistory)"}}
[debug] [2024-11-15T23:35:29.277Z] [worker-pool] Adding worker with key us-central1-getChatHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-getChatHistory, total=1"}}
[debug] [2024-11-15T23:35:29.282Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:29.282Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:29.250Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:29.283Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:29.250Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:29.282Z"],"workRunningCount":2}
[debug] [2024-11-15T23:35:29.283Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-15T23:35:29.286Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:29.286Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:29.294Z] [worker-pool] addWorker(us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveProfileHistory)"}}
[debug] [2024-11-15T23:35:29.295Z] [worker-pool] Adding worker with key us-central1-saveProfileHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveProfileHistory, total=1"}}
[debug] [2024-11-15T23:35:31.564Z] [runtime-status] [27108] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:31.565Z] [runtime-status] [6140] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:31.567Z] [runtime-status] [6140] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:31.568Z] [runtime-status] [6140] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-15T23:35:31.568Z] [runtime-status] [6140] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-15T23:35:31.570Z] [runtime-status] [27108] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:31.570Z] [runtime-status] [27108] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-15T23:35:31.570Z] [runtime-status] [27108] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-15T23:35:31.570Z] [runtime-status] [27108] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:31.571Z] [runtime-status] [6140] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:32.152Z] [runtime-status] [6140] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-15T23:35:32.152Z] [runtime-status] [6140] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-15T23:35:32.153Z] [runtime-status] [6140] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:32.157Z] [runtime-status] [27108] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-15T23:35:32.158Z] [runtime-status] [27108] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-15T23:35:32.158Z] [runtime-status] [27108] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:32.160Z] [runtime-status] [6140] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:32.164Z] [runtime-status] [6140] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:32.165Z] [runtime-status] [6140] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2024-11-15T23:35:32.165Z] [runtime-status] [27108] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:32.169Z] [runtime-status] [27108] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:32.169Z] [runtime-status] [27108] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-15T23:35:32.317Z] [runtime-status] [6140] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[debug] [2024-11-15T23:35:32.318Z] [runtime-status] [27108] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-15T23:35:32.342Z] [runtime-status] [27108] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-15T23:35:32.343Z] [runtime-status] [6140] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-15T23:35:32.344Z] [runtime-status] [27108] Listening to port: \\?\pipe\fire_emu_30ce460f8644057e {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [27108] Listening to port: \\\\?\\pipe\\fire_emu_30ce460f8644057e"}}
[debug] [2024-11-15T23:35:32.346Z] [runtime-status] [6140] Listening to port: \\?\pipe\fire_emu_e0b3cc793d2cd802 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [6140] Listening to port: \\\\?\\pipe\\fire_emu_e0b3cc793d2cd802"}}
[debug] [2024-11-15T23:35:32.361Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-15T23:35:32.361Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-15T23:35:32.371Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[debug] [2024-11-15T23:35:32.405Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 34.4802ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 34.4802ms"}}
[debug] [2024-11-15T23:35:32.406Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-15T23:35:32.406Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:32.407Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:32.407Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:29.250Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:32.409Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:32.408Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:29.250Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:32.409Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:29.250Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:32.408Z"],"workRunningCount":2}
[debug] [2024-11-15T23:35:32.409Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-15T23:35:32.411Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:32.412Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:32.412Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-15T23:35:32.413Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[debug] [2024-11-15T23:35:32.437Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-15T23:35:32.438Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-15T23:35:32.438Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[debug] [2024-11-15T23:35:32.446Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 7.8797ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 7.8797ms"}}
[debug] [2024-11-15T23:35:32.447Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-15T23:35:32.447Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:32.447Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:32.448Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:32.408Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:32.449Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:32.449Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:32.408Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:32.449Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:32.408Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:32.449Z"],"workRunningCount":2}
[debug] [2024-11-15T23:35:32.450Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-15T23:35:32.451Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:32.452Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:32.452Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-15T23:35:32.453Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] }, {"user":"    auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] },"}}
[info] >      data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', chatId: 'default-chat' } {"user":"    data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' } {"user":"  data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [] {"user":"🔍 Available Collections: []","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: []"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-15T23:35:33.125Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 673.0079ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 673.0079ms"}}
[debug] [2024-11-15T23:35:33.126Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-15T23:35:33.126Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:33.127Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:33.127Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:32.408Z"],"workRunningCount":1}
[info] >  ✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 0, totalLinks: 0 }"}}
[debug] [2024-11-15T23:35:33.201Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 788.314ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 788.314ms"}}
[debug] [2024-11-15T23:35:33.201Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-15T23:35:33.202Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:33.202Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:33.202Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:39.130Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:39.130Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:39.130Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:39.130Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:39.131Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-15T23:35:39.134Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:39.134Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:39.134Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-15T23:35:39.135Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[debug] [2024-11-15T23:35:39.138Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 3.4334ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 3.4334ms"}}
[debug] [2024-11-15T23:35:39.139Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-15T23:35:39.139Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:39.139Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:39.139Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:39.140Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:39.140Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:39.140Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:39.140Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:39.140Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-15T23:35:39.142Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:39.143Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-15T23:35:39.152Z] [worker-pool] addWorker(us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-processChat)"}}
[debug] [2024-11-15T23:35:39.152Z] [worker-pool] Adding worker with key us-central1-processChat, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-processChat, total=1"}}
[debug] [2024-11-15T23:35:39.154Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:39.154Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:39.140Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:39.154Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:39.140Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:39.154Z"],"workRunningCount":2}
[debug] [2024-11-15T23:35:39.154Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-15T23:35:39.157Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:39.157Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:39.158Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-15T23:35:39.158Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] }, {"user":"    auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] },"}}
[info] >      data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', chatId: 'default-chat' } {"user":"    data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-15T23:35:39.197Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 39.0163ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 39.0163ms"}}
[debug] [2024-11-15T23:35:39.198Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-15T23:35:39.198Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:39.198Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:39.198Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:39.140Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 0, totalLinks: 0 }"}}
[debug] [2024-11-15T23:35:41.043Z] [runtime-status] [26928] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:41.045Z] [runtime-status] [26928] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:41.045Z] [runtime-status] [26928] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-15T23:35:41.045Z] [runtime-status] [26928] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-15T23:35:41.046Z] [runtime-status] [26928] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:41.408Z] [runtime-status] [26928] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-15T23:35:41.410Z] [runtime-status] [26928] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-15T23:35:41.410Z] [runtime-status] [26928] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:41.416Z] [runtime-status] [26928] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:41.420Z] [runtime-status] [26928] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:41.420Z] [runtime-status] [26928] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-15T23:35:41.563Z] [runtime-status] [26928] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-15T23:35:41.587Z] [runtime-status] [26928] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-15T23:35:41.588Z] [runtime-status] [26928] Listening to port: \\?\pipe\fire_emu_b23fb1c4a0edb07c {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [26928] Listening to port: \\\\?\\pipe\\fire_emu_b23fb1c4a0edb07c"}}
[debug] [2024-11-15T23:35:41.629Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE"}}
[debug] [2024-11-15T23:35:41.630Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-15T23:35:41.630Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: BUSY"}}
[debug] [2024-11-15T23:35:41.635Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 4.806ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 4.806ms"}}
[debug] [2024-11-15T23:35:41.636Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE"}}
[debug] [2024-11-15T23:35:41.636Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:41.636Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:41.636Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:41.638Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:41.638Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:41.639Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:41.638Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:41.639Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-15T23:35:41.640Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:41.640Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-15T23:35:41.640Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-15T23:35:41.641Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello my name is robert' } } {"user":"🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello my name is robert' } }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello my name is robert' } }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 23, {"user":"  messageLength: 23,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 23,"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731713741659-krx21i92e {"user":"🆕 Creating new chat session: chat-1731713741659-krx21i92e","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731713741659-krx21i92e"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731713741659-krx21i92e', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731713741659-krx21i92e', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731713741659-krx21i92e', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: hello my name is robert {"user":"💬 Sending message to Gemini: hello my name is robert","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: hello my name is robert"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731713741659-krx21i92e', {"user":"  chatId: 'chat-1731713741659-krx21i92e',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731713741659-krx21i92e',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 434, timestamp: '2024-11-15T23:35:44.861Z' } {"user":"✅ Response received: { responseLength: 434, timestamp: '2024-11-15T23:35:44.861Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 434, timestamp: '2024-11-15T23:35:44.861Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\n", {"user":"  message: \"Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\\n\","}}
[info] >    userMessage: 'hello my name is robert', {"user":"  userMessage: 'hello my name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'hello my name is robert',"}}
[info] >    timestamp: '2024-11-15T23:35:44.862Z', {"user":"  timestamp: '2024-11-15T23:35:44.862Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-15T23:35:44.862Z',"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    chatId: 'chat-1731713741659-krx21i92e' {"user":"  chatId: 'chat-1731713741659-krx21i92e'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731713741659-krx21i92e'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    chatId: 'chat-1731713741659-krx21i92e', {"user":"  chatId: 'chat-1731713741659-krx21i92e',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731713741659-krx21i92e',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-15T23:35:44.862Z', {"user":"  timestamp: '2024-11-15T23:35:44.862Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-15T23:35:44.862Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-15T23:35:44.880Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-15T23:35:44.880Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:41.638Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:44.880Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:41.638Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-15T23:35:44.880Z"],"workRunningCount":2}
[debug] [2024-11-15T23:35:44.880Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-15T23:35:44.881Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:44.882Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-15T23:35:44.891Z] [worker-pool] addWorker(us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-analyzeProfileFromChat)"}}
[debug] [2024-11-15T23:35:44.891Z] [worker-pool] Adding worker with key us-central1-analyzeProfileFromChat, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-analyzeProfileFromChat, total=1"}}
[debug] [2024-11-15T23:35:46.531Z] [runtime-status] [24084] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:46.532Z] [runtime-status] [24084] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:46.533Z] [runtime-status] [24084] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-15T23:35:46.533Z] [runtime-status] [24084] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-15T23:35:46.534Z] [runtime-status] [24084] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:46.866Z] [runtime-status] [24084] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-15T23:35:46.866Z] [runtime-status] [24084] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-15T23:35:46.867Z] [runtime-status] [24084] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:46.872Z] [runtime-status] [24084] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:46.875Z] [runtime-status] [24084] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:46.875Z] [runtime-status] [24084] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-15T23:35:46.982Z] [runtime-status] [24084] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-15T23:35:47.001Z] [runtime-status] [24084] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-15T23:35:47.002Z] [runtime-status] [24084] Listening to port: \\?\pipe\fire_emu_60e02bd41c594b2a {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [24084] Listening to port: \\\\?\\pipe\\fire_emu_60e02bd41c594b2a"}}
[debug] [2024-11-15T23:35:47.060Z] [worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: IDLE"}}
[debug] [2024-11-15T23:35:47.061Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-15T23:35:47.061Z] [worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 648 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 648 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 648 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"      userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >        chatId: 'chat-1731713741659-krx21i92e', {"user":"      chatId: 'chat-1731713741659-krx21i92e',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731713741659-krx21i92e',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    chatId: 'chat-1731713741659-krx21i92e', {"user":"  chatId: 'chat-1731713741659-krx21i92e',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731713741659-krx21i92e',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-15T23:35:51.154Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 4092.8425ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 4092.8425ms"}}
[debug] [2024-11-15T23:35:51.155Z] [worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: IDLE"}}
[debug] [2024-11-15T23:35:51.155Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:51.155Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:51.155Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:41.638Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [] } {"user":"    analysis: { nodes: [Array], links: [] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "NwIgRTMlgHi2etT8GS7zBqiUJyp2", {"user":"  \"userId\": \"NwIgRTMlgHi2etT8GS7zBqiUJyp2\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"NwIgRTMlgHi2etT8GS7zBqiUJyp2\","}}
[info] >    "chatId": "chat-1731713741659-krx21i92e", {"user":"  \"chatId\": \"chat-1731713741659-krx21i92e\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731713741659-krx21i92e\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "hello my name is robert", {"user":"      \"content\": \"hello my name is robert\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"hello my name is robert\","}}
[info] >        "timestamp": "2024-11-15T23:35:51.160Z" {"user":"      \"timestamp\": \"2024-11-15T23:35:51.160Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-15T23:35:51.160Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\n", {"user":"      \"content\": \"Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\\n\","}}
[info] >        "timestamp": "2024-11-15T23:35:51.160Z" {"user":"      \"timestamp\": \"2024-11-15T23:35:51.160Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-15T23:35:51.160Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-15T23:35:51.160Z", {"user":"  \"timestamp\": \"2024-11-15T23:35:51.160Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-15T23:35:51.160Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "NwIgRTMlgHi2etT8GS7zBqiUJyp2", {"user":"    \"uid\": \"NwIgRTMlgHi2etT8GS7zBqiUJyp2\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"NwIgRTMlgHi2etT8GS7zBqiUJyp2\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-15T23:35:51.201Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-15T23:35:51.201Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:41.638Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:51.201Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:41.638Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-15T23:35:51.201Z"],"workRunningCount":2}
[debug] [2024-11-15T23:35:51.202Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-15T23:35:51.204Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:51.204Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:51.214Z] [worker-pool] addWorker(us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveChatHistory)"}}
[debug] [2024-11-15T23:35:51.214Z] [worker-pool] Adding worker with key us-central1-saveChatHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveChatHistory, total=1"}}
[debug] [2024-11-15T23:35:52.810Z] [runtime-status] [26608] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:52.811Z] [runtime-status] [26608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:52.812Z] [runtime-status] [26608] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-15T23:35:52.812Z] [runtime-status] [26608] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-15T23:35:52.814Z] [runtime-status] [26608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:53.160Z] [runtime-status] [26608] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-15T23:35:53.161Z] [runtime-status] [26608] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-15T23:35:53.161Z] [runtime-status] [26608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:53.167Z] [runtime-status] [26608] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:53.169Z] [runtime-status] [26608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-15T23:35:53.170Z] [runtime-status] [26608] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-15T23:35:53.280Z] [runtime-status] [26608] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-15T23:35:53.299Z] [runtime-status] [26608] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-15T23:35:53.299Z] [runtime-status] [26608] Listening to port: \\?\pipe\fire_emu_6cc9a68741cd0b0d {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26608] Listening to port: \\\\?\\pipe\\fire_emu_6cc9a68741cd0b0d"}}
[debug] [2024-11-15T23:35:53.381Z] [worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: IDLE"}}
[debug] [2024-11-15T23:35:53.381Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-15T23:35:53.382Z] [worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 687 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 687 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 687 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"      userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >        chatId: 'chat-1731713741659-krx21i92e', {"user":"      chatId: 'chat-1731713741659-krx21i92e',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731713741659-krx21i92e',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-15T23:35:51.160Z' {"user":"      timestamp: '2024-11-15T23:35:51.160Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-15T23:35:51.160Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    chatId: 'chat-1731713741659-krx21i92e', {"user":"  chatId: 'chat-1731713741659-krx21i92e',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731713741659-krx21i92e',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731713741659-krx21i92e { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731713741659-krx21i92e { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731713741659-krx21i92e { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-15T23:35:53.789Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 407.5657ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 407.5657ms"}}
[debug] [2024-11-15T23:35:53.790Z] [worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: IDLE"}}
[debug] [2024-11-15T23:35:53.791Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:53.791Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:53.791Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-15T23:35:41.638Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-15T23:35:53.795Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 12154.922ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 12154.922ms"}}
[debug] [2024-11-15T23:35:53.796Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE"}}
[debug] [2024-11-15T23:35:53.796Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:53.797Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:53.797Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:53.801Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.801Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:53.801Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.801Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:53.801Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-15T23:35:53.802Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:53.802Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:53.802Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-15T23:35:53.803Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[debug] [2024-11-15T23:35:53.807Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 4.6635ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 4.6635ms"}}
[debug] [2024-11-15T23:35:53.808Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-15T23:35:53.809Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:53.809Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:53.809Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:53.809Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.809Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-15T23:35:53.809Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.809Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:53.809Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-15T23:35:53.813Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:53.814Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:53.814Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-15T23:35:53.814Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[debug] [2024-11-15T23:35:53.822Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:53.821Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.809Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:53.822Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.809Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:53.821Z"],"workRunningCount":2}
[debug] [2024-11-15T23:35:53.822Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-15T23:35:53.828Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:53.828Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:53.829Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-15T23:35:53.830Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' } {"user":"  data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-15T23:35:53.839Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 9.8602ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 9.8602ms"}}
[debug] [2024-11-15T23:35:53.840Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-15T23:35:53.841Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:53.841Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:53.841Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.809Z"],"workRunningCount":1}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-15T23:35:53.844Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:53.844Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.809Z"],"workRunningCount":1}
[debug] [2024-11-15T23:35:53.844Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.809Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-15T23:35:53.844Z"],"workRunningCount":2}
[debug] [2024-11-15T23:35:53.844Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-15T23:35:53.848Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-15T23:35:53.848Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-15T23:35:53.848Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-15T23:35:53.850Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] }, {"user":"    auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"      userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >        chatId: 'chat-1731713741659-krx21i92e' {"user":"      chatId: 'chat-1731713741659-krx21i92e'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731713741659-krx21i92e'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-15T23:35:53.740Z', {"user":"  createdAt: '2024-11-15T23:35:53.740Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-15T23:35:53.740Z',"}}
[info] >    lastUpdated: '2024-11-15T23:35:53.740Z', {"user":"  lastUpdated: '2024-11-15T23:35:53.740Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-15T23:35:53.740Z',"}}
[info] >    chatId: 'chat-1731713741659-krx21i92e', {"user":"  chatId: 'chat-1731713741659-krx21i92e',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731713741659-krx21i92e',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my name is robert', {"user":"      content: 'hello my name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my name is robert',"}}
[info] >        timestamp: '2024-11-15T23:35:51.160Z' {"user":"      timestamp: '2024-11-15T23:35:51.160Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-15T23:35:51.160Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\n", {"user":"      content: \"Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\\n\","}}
[info] >        timestamp: '2024-11-15T23:35:51.160Z' {"user":"      timestamp: '2024-11-15T23:35:51.160Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-15T23:35:51.160Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-15T23:35:53.931Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 81.4237ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 81.4237ms"}}
[debug] [2024-11-15T23:35:53.932Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-15T23:35:53.932Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:53.932Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:53.933Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-15T23:35:53.809Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-15T23:35:53.941Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 126.93ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 126.93ms"}}
[debug] [2024-11-15T23:35:53.942Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-15T23:35:53.942Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-15T23:35:53.942Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-15T23:35:53.943Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  ✅ Retrieved chat histories for user: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-16T00:04:15.830Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:15.830Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:15.831Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:15.830Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:15.831Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T00:04:15.835Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:15.835Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:15.835Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T00:04:15.836Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[debug] [2024-11-16T00:04:15.838Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:15.838Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:15.830Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:15.838Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:15.830Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:15.838Z"],"workRunningCount":2}
[debug] [2024-11-16T00:04:15.838Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T00:04:15.841Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:15.841Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:15.841Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T00:04:15.842Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[debug] [2024-11-16T00:04:15.844Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 8.4331ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 8.4331ms"}}
[debug] [2024-11-16T00:04:15.846Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-16T00:04:15.846Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:15.846Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:15.846Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:15.838Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:15.847Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.7327ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.7327ms"}}
[debug] [2024-11-16T00:04:15.847Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T00:04:15.847Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:15.848Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:15.848Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:15.848Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:15.848Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:15.848Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:15.848Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:15.848Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T00:04:15.851Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:15.851Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:15.851Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T00:04:15.852Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[debug] [2024-11-16T00:04:15.853Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:15.853Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:15.848Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:15.853Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:15.848Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:15.853Z"],"workRunningCount":2}
[debug] [2024-11-16T00:04:15.853Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T00:04:15.856Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:15.856Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:15.856Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T00:04:15.857Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' } {"user":"  data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 77 49 67 52 54 4d 6c 67 48 69 32 65 74 54 38 47 53 37 7a 42 71 69 55 4a 79 70 32 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] }, {"user":"    auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', token: [Object] },"}}
[info] >      data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', chatId: 'default-chat' } {"user":"    data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-15T23:35:53.740Z', {"user":"  createdAt: '2024-11-15T23:35:53.740Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-15T23:35:53.740Z',"}}
[info] >    lastUpdated: '2024-11-15T23:35:53.740Z', {"user":"  lastUpdated: '2024-11-15T23:35:53.740Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-15T23:35:53.740Z',"}}
[info] >    chatId: 'chat-1731713741659-krx21i92e', {"user":"  chatId: 'chat-1731713741659-krx21i92e',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731713741659-krx21i92e',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my name is robert', {"user":"      content: 'hello my name is robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my name is robert',"}}
[info] >        timestamp: '2024-11-15T23:35:51.160Z' {"user":"      timestamp: '2024-11-15T23:35:51.160Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-15T23:35:51.160Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\n", {"user":"      content: \"Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hello Robert! It's nice to meet you.  To help me understand your relationships better, could you tell me a little more about what's on your mind?  For example, are you having challenges in a specific relationship?  Are you looking for advice on improving a particular aspect of your relationships?  Are you generally curious about how to build stronger relationships?  The more information you can share, the better I can assist you.\\n\","}}
[info] >        timestamp: '2024-11-15T23:35:51.160Z' {"user":"      timestamp: '2024-11-15T23:35:51.160Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-15T23:35:51.160Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2' {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-16T00:04:15.909Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 57.4146ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 57.4146ms"}}
[debug] [2024-11-16T00:04:15.910Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-16T00:04:15.910Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:15.910Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:15.910Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:15.853Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2', {"user":"  userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'NwIgRTMlgHi2etT8GS7zBqiUJyp2',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: NwIgRTMlgHi2etT8GS7zBqiUJyp2 { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-16T00:04:15.914Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 57.0884ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 57.0884ms"}}
[debug] [2024-11-16T00:04:15.915Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T00:04:15.915Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:15.915Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:15.915Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:38.890Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-16T00:04:38.890Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"3b6e0bee-eef3-4c8f-91c2-79ae89fc57e5","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-16T00:04:38.890Z","data":{"uid":"zCREfMSFzBOeCxLEpMkaWLDRMtXe","email":"panda.mountain.232@example.com","emailVerified":true,"displayName":"Panda Mountain","metadata":{"creationTime":"2024-11-16T00:04:38.890Z","lastSignInTime":"2024-11-16T00:04:38.890Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"3106235095589413515635906954040460221408","federatedId":"3106235095589413515635906954040460221408","displayName":"Panda Mountain","email":"panda.mountain.232@example.com","screenName":"mountain_panda"}]}}
[debug] [2024-11-16T00:04:38.896Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-16T00:04:38.896Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-16T00:04:38.965Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:38.965Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:38.965Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:38.965Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:38.966Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T00:04:38.969Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:38.969Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:38.970Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T00:04:38.971Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[debug] [2024-11-16T00:04:38.974Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 3.5934ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 3.5934ms"}}
[debug] [2024-11-16T00:04:38.975Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-16T00:04:38.975Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:38.975Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:38.975Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:39.005Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:39.005Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:39.006Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:39.005Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:39.006Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T00:04:39.009Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:39.009Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:39.009Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T00:04:39.010Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' } {"user":"  data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-16T00:04:39.046Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 36.662ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 36.662ms"}}
[debug] [2024-11-16T00:04:39.047Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-16T00:04:39.047Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:39.048Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:39.048Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:40.842Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:40.842Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:40.843Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:40.842Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:40.843Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T00:04:40.844Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:40.845Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:40.845Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T00:04:40.846Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[debug] [2024-11-16T00:04:40.848Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:40.848Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:40.842Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:40.849Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:40.842Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:40.848Z"],"workRunningCount":2}
[debug] [2024-11-16T00:04:40.849Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T00:04:40.850Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:40.850Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:40.850Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T00:04:40.851Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' } {"user":"  data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T00:04:40.859Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 7.4001ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 7.4001ms"}}
[debug] [2024-11-16T00:04:40.860Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T00:04:40.860Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:40.860Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:40.860Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:40.842Z"],"workRunningCount":1}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-16T00:04:40.864Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:40.864Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:40.842Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:40.864Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:04:40.842Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:40.864Z"],"workRunningCount":2}
[debug] [2024-11-16T00:04:40.864Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T00:04:40.867Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:40.867Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:40.867Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T00:04:40.868Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] }, {"user":"    auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },"}}
[info] >      data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' } {"user":"    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-16T00:04:40.935Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 88.8357ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 88.8357ms"}}
[debug] [2024-11-16T00:04:40.936Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-16T00:04:40.936Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:40.936Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:40.936Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:40.864Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:40.937Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 68.8289ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 68.8289ms"}}
[debug] [2024-11-16T00:04:40.938Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T00:04:40.938Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:40.938Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:40.938Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 0, totalLinks: 0 }"}}
[debug] [2024-11-16T00:04:48.959Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:48.959Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:48.959Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:48.959Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:48.959Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T00:04:48.963Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:48.963Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:48.963Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T00:04:48.964Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[debug] [2024-11-16T00:04:48.966Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.965Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:48.959Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:48.966Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:48.959Z","/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.965Z"],"workRunningCount":2}
[debug] [2024-11-16T00:04:48.966Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-16T00:04:48.971Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:48.971Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-16T00:04:48.972Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-16T00:04:48.972Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: BUSY"}}
[debug] [2024-11-16T00:04:48.975Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 10.9138ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 10.9138ms"}}
[debug] [2024-11-16T00:04:48.976Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T00:04:48.976Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:48.976Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:48.976Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.965Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:48.977Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 5.507ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 5.507ms"}}
[debug] [2024-11-16T00:04:48.979Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE"}}
[debug] [2024-11-16T00:04:48.979Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:48.979Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:48.979Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:48.980Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:48.980Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:04:48.980Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:48.980Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:48.980Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T00:04:48.985Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:48.985Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T00:04:48.985Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T00:04:48.986Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[debug] [2024-11-16T00:04:48.988Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.988Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:48.980Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:48.988Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:04:48.980Z","/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.988Z"],"workRunningCount":2}
[debug] [2024-11-16T00:04:48.988Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-16T00:04:48.992Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:48.993Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-16T00:04:48.993Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-16T00:04:48.993Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] }, {"user":"    auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },"}}
[info] >      data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' } {"user":"    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'hello my name is robert and i have a girlfriend anmed emiliy' {"user":"    message: 'hello my name is robert and i have a girlfriend anmed emiliy'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'hello my name is robert and i have a girlfriend anmed emiliy'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 60, {"user":"  messageLength: 60,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 60,"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731715488999-tgrd1q32x {"user":"🆕 Creating new chat session: chat-1731715488999-tgrd1q32x","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731715488999-tgrd1q32x"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731715488999-tgrd1q32x', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731715488999-tgrd1q32x', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731715488999-tgrd1q32x', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: hello my name is robert and i have a girlfriend anmed emiliy {"user":"💬 Sending message to Gemini: hello my name is robert and i have a girlfriend anmed emiliy","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: hello my name is robert and i have a girlfriend anmed emiliy"}}
[debug] [2024-11-16T00:04:49.078Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 92.794ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 92.794ms"}}
[debug] [2024-11-16T00:04:49.080Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T00:04:49.080Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:04:49.080Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:04:49.081Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.988Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 0, totalLinks: 0 }"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731715488999-tgrd1q32x', {"user":"  chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 969, timestamp: '2024-11-16T00:04:54.136Z' } {"user":"✅ Response received: { responseLength: 969, timestamp: '2024-11-16T00:04:54.136Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 969, timestamp: '2024-11-16T00:04:54.136Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\n" + {"user":"  message: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\n' + {"user":"    '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +"}}
[info] >      '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\n' + {"user":"    '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +"}}
[info] >      '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\n' + {"user":"    '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +"}}
[info] >      '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\n' + {"user":"    '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +"}}
[info] >      '* **Intimacy:** Are you both feeling emotionally and physically connected?\n' + {"user":"    '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +"}}
[info] >      '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\n' + {"user":"    '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +"}}
[info] >      '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\n' + {"user":"    '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      "Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\n", {"user":"    \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\","}}
[info] >    userMessage: 'hello my name is robert and i have a girlfriend anmed emiliy', {"user":"  userMessage: 'hello my name is robert and i have a girlfriend anmed emiliy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'hello my name is robert and i have a girlfriend anmed emiliy',"}}
[info] >    timestamp: '2024-11-16T00:04:54.136Z', {"user":"  timestamp: '2024-11-16T00:04:54.136Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-16T00:04:54.136Z',"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: 'chat-1731715488999-tgrd1q32x' {"user":"  chatId: 'chat-1731715488999-tgrd1q32x'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731715488999-tgrd1q32x'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: 'chat-1731715488999-tgrd1q32x', {"user":"  chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-16T00:04:54.137Z', {"user":"  timestamp: '2024-11-16T00:04:54.137Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-16T00:04:54.137Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T00:04:54.158Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-16T00:04:54.158Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.988Z"],"workRunningCount":1}
[debug] [2024-11-16T00:04:54.158Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.988Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-16T00:04:54.158Z"],"workRunningCount":2}
[debug] [2024-11-16T00:04:54.158Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-16T00:04:54.158Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:04:54.159Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-16T00:04:54.159Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-16T00:04:54.159Z] [worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1231 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1231 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1231 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"      userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >        chatId: 'chat-1731715488999-tgrd1q32x', {"user":"      chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: 'chat-1731715488999-tgrd1q32x', {"user":"  chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T00:05:01.239Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 7080.2896ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 7080.2896ms"}}
[debug] [2024-11-16T00:05:01.240Z] [worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: IDLE"}}
[debug] [2024-11-16T00:05:01.240Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:05:01.240Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:05:01.240Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.988Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [Array] } {"user":"    analysis: { nodes: [Array], links: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [Array] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "zCREfMSFzBOeCxLEpMkaWLDRMtXe", {"user":"  \"userId\": \"zCREfMSFzBOeCxLEpMkaWLDRMtXe\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"zCREfMSFzBOeCxLEpMkaWLDRMtXe\","}}
[info] >    "chatId": "chat-1731715488999-tgrd1q32x", {"user":"  \"chatId\": \"chat-1731715488999-tgrd1q32x\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731715488999-tgrd1q32x\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "hello my name is robert and i have a girlfriend anmed emiliy", {"user":"      \"content\": \"hello my name is robert and i have a girlfriend anmed emiliy\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"hello my name is robert and i have a girlfriend anmed emiliy\","}}
[info] >        "timestamp": "2024-11-16T00:05:01.243Z" {"user":"      \"timestamp\": \"2024-11-16T00:05:01.243Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-16T00:05:01.243Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\n\n* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\n* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\n* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\n* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\n* **Intimacy:** Are you both feeling emotionally and physically connected?\n* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\n* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\n\n\nLet's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\n", {"user":"      \"content\": \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\\n* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n* **Intimacy:** Are you both feeling emotionally and physically connected?\\n* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n\\n\\nLet's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\\n* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n* **Intimacy:** Are you both feeling emotionally and physically connected?\\n* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n\\n\\nLet's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\","}}
[info] >        "timestamp": "2024-11-16T00:05:01.243Z" {"user":"      \"timestamp\": \"2024-11-16T00:05:01.243Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-16T00:05:01.243Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-16T00:05:01.243Z", {"user":"  \"timestamp\": \"2024-11-16T00:05:01.243Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-16T00:05:01.243Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "zCREfMSFzBOeCxLEpMkaWLDRMtXe", {"user":"    \"uid\": \"zCREfMSFzBOeCxLEpMkaWLDRMtXe\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"zCREfMSFzBOeCxLEpMkaWLDRMtXe\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T00:05:01.295Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-16T00:05:01.295Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.988Z"],"workRunningCount":1}
[debug] [2024-11-16T00:05:01.295Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.988Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-16T00:05:01.295Z"],"workRunningCount":2}
[debug] [2024-11-16T00:05:01.295Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-16T00:05:01.298Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:05:01.298Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-16T00:05:01.299Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-16T00:05:01.299Z] [worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1270 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1270 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1270 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"      userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >        chatId: 'chat-1731715488999-tgrd1q32x', {"user":"      chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-16T00:05:01.243Z' {"user":"      timestamp: '2024-11-16T00:05:01.243Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T00:05:01.243Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: 'chat-1731715488999-tgrd1q32x', {"user":"  chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731715488999-tgrd1q32x { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731715488999-tgrd1q32x { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731715488999-tgrd1q32x { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-16T00:05:01.375Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 76.3408ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 76.3408ms"}}
[debug] [2024-11-16T00:05:01.376Z] [worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: IDLE"}}
[debug] [2024-11-16T00:05:01.377Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:05:01.377Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:05:01.377Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T00:04:48.988Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T00:05:01.384Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 12390.6762ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 12390.6762ms"}}
[debug] [2024-11-16T00:05:01.386Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: IDLE"}}
[debug] [2024-11-16T00:05:01.387Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:05:01.387Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:05:01.388Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:05:01.391Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:05:01.390Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:05:01.391Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:05:01.390Z"],"workRunningCount":1}
[debug] [2024-11-16T00:05:01.391Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T00:05:01.394Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:05:01.395Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T00:05:01.395Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T00:05:01.396Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[debug] [2024-11-16T00:05:01.399Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 3.5157ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 3.5157ms"}}
[debug] [2024-11-16T00:05:01.401Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-16T00:05:01.401Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:05:01.401Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:05:01.401Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:05:01.402Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:05:01.402Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:05:01.402Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T00:05:01.402Z"],"workRunningCount":1}
[debug] [2024-11-16T00:05:01.402Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T00:05:01.405Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:05:01.405Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T00:05:01.405Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T00:05:01.406Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' } {"user":"  data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T00:05:01.440Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 34.2639ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 34.2639ms"}}
[debug] [2024-11-16T00:05:01.441Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-16T00:05:01.441Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:05:01.441Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:05:01.441Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-16T00:05:01.342Z', {"user":"  createdAt: '2024-11-16T00:05:01.342Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-16T00:05:01.342Z',"}}
[info] >    lastUpdated: '2024-11-16T00:05:01.342Z', {"user":"  lastUpdated: '2024-11-16T00:05:01.342Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-16T00:05:01.342Z',"}}
[info] >    chatId: 'chat-1731715488999-tgrd1q32x', {"user":"  chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my name is robert and i have a girlfriend anmed emiliy', {"user":"      content: 'hello my name is robert and i have a girlfriend anmed emiliy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my name is robert and i have a girlfriend anmed emiliy',"}}
[info] >        timestamp: '2024-11-16T00:05:01.243Z' {"user":"      timestamp: '2024-11-16T00:05:01.243Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T00:05:01.243Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\n" + {"user":"      content: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\n' + {"user":"        '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +"}}
[info] >          '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\n' + {"user":"        '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +"}}
[info] >          '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\n' + {"user":"        '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +"}}
[info] >          '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\n' + {"user":"        '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +"}}
[info] >          '* **Intimacy:** Are you both feeling emotionally and physically connected?\n' + {"user":"        '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +"}}
[info] >          '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\n' + {"user":"        '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +"}}
[info] >          '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\n' + {"user":"        '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\n", {"user":"        \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\","}}
[info] >        timestamp: '2024-11-16T00:05:01.243Z' {"user":"      timestamp: '2024-11-16T00:05:01.243Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T00:05:01.243Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-16T00:05:01.472Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:05:01.472Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:05:01.472Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:05:01.472Z"],"workRunningCount":1}
[debug] [2024-11-16T00:05:01.472Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T00:05:01.475Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:05:01.476Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T00:05:01.476Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T00:05:01.477Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[debug] [2024-11-16T00:05:01.482Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 5.3678ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 5.3678ms"}}
[debug] [2024-11-16T00:05:01.483Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T00:05:01.483Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:05:01.484Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:05:01.484Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:05:01.485Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:05:01.485Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T00:05:01.485Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T00:05:01.485Z"],"workRunningCount":1}
[debug] [2024-11-16T00:05:01.485Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T00:05:01.488Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T00:05:01.489Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T00:05:01.489Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T00:05:01.489Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] }, {"user":"    auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"      userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >        chatId: 'chat-1731715488999-tgrd1q32x' {"user":"      chatId: 'chat-1731715488999-tgrd1q32x'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731715488999-tgrd1q32x'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T00:05:01.537Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 47.396ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 47.396ms"}}
[debug] [2024-11-16T00:05:01.538Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T00:05:01.538Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T00:05:01.538Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T00:05:01.538Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-16T04:00:38.152Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:00:38.152Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:00:38.153Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:00:38.152Z"],"workRunningCount":1}
[debug] [2024-11-16T04:00:38.153Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T04:00:38.159Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:00:38.160Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T04:00:38.160Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T04:00:38.162Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[debug] [2024-11-16T04:00:38.164Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:00:38.164Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:00:38.152Z"],"workRunningCount":1}
[debug] [2024-11-16T04:00:38.164Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:00:38.152Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:00:38.164Z"],"workRunningCount":2}
[debug] [2024-11-16T04:00:38.164Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T04:00:38.167Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:00:38.167Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T04:00:38.167Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T04:00:38.168Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[debug] [2024-11-16T04:00:38.181Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 13.5428ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 13.5428ms"}}
[debug] [2024-11-16T04:00:38.182Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T04:00:38.183Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:00:38.183Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:00:38.183Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:00:38.152Z"],"workRunningCount":1}
[debug] [2024-11-16T04:00:38.184Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 21.6065ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 21.6065ms"}}
[debug] [2024-11-16T04:00:38.184Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-16T04:00:38.185Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:00:38.185Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:00:38.185Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:00:38.185Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:00:38.185Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:00:38.185Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:00:38.185Z"],"workRunningCount":1}
[debug] [2024-11-16T04:00:38.186Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T04:00:38.188Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:00:38.188Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T04:00:38.188Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T04:00:38.188Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: BUSY"}}
[debug] [2024-11-16T04:00:38.190Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:00:38.190Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:00:38.185Z"],"workRunningCount":1}
[debug] [2024-11-16T04:00:38.190Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:00:38.185Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:00:38.190Z"],"workRunningCount":2}
[debug] [2024-11-16T04:00:38.190Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T04:00:38.193Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:00:38.193Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T04:00:38.193Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T04:00:38.194Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] }, {"user":"    auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },"}}
[info] >      data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' } {"user":"    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' } {"user":"  data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-16T04:00:38.276Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 88.0351ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 88.0351ms"}}
[debug] [2024-11-16T04:00:38.277Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: IDLE"}}
[debug] [2024-11-16T04:00:38.277Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:00:38.278Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:00:38.278Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:00:38.190Z"],"workRunningCount":1}
[debug] [2024-11-16T04:00:38.279Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 85.396ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 85.396ms"}}
[debug] [2024-11-16T04:00:38.280Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: IDLE"}}
[debug] [2024-11-16T04:00:38.280Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:00:38.280Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:00:38.280Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-16T00:05:01.342Z', {"user":"  createdAt: '2024-11-16T00:05:01.342Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-16T00:05:01.342Z',"}}
[info] >    lastUpdated: '2024-11-16T00:05:01.342Z', {"user":"  lastUpdated: '2024-11-16T00:05:01.342Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-16T00:05:01.342Z',"}}
[info] >    chatId: 'chat-1731715488999-tgrd1q32x', {"user":"  chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my name is robert and i have a girlfriend anmed emiliy', {"user":"      content: 'hello my name is robert and i have a girlfriend anmed emiliy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my name is robert and i have a girlfriend anmed emiliy',"}}
[info] >        timestamp: '2024-11-16T00:05:01.243Z' {"user":"      timestamp: '2024-11-16T00:05:01.243Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T00:05:01.243Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\n" + {"user":"      content: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\n' + {"user":"        '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +"}}
[info] >          '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\n' + {"user":"        '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +"}}
[info] >          '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\n' + {"user":"        '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +"}}
[info] >          '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\n' + {"user":"        '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +"}}
[info] >          '* **Intimacy:** Are you both feeling emotionally and physically connected?\n' + {"user":"        '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +"}}
[info] >          '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\n' + {"user":"        '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +"}}
[info] >          '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\n' + {"user":"        '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\n", {"user":"        \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\","}}
[info] >        timestamp: '2024-11-16T00:05:01.243Z' {"user":"      timestamp: '2024-11-16T00:05:01.243Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T00:05:01.243Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-16T04:09:26.938Z] File C:\Users\Rob\Apps\not-alone\functions\src\profileAnalysis.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\src\\profileAnalysis.ts changed, reloading triggers"}}
[debug] [2024-11-16T04:09:27.948Z] Validating nodejs source
[debug] [2024-11-16T04:09:28.954Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-16T04:09:28.954Z] Building nodejs source
[debug] [2024-11-16T04:09:28.954Z] Failed to find version of module node: reached end of search path C:\Users\Rob\Apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-16T04:09:28.956Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-16T04:09:28.969Z] Found firebase-functions binary at 'C:\Users\Rob\Apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8249

[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-16T04:09:29.916Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"deleteChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"deleteChatHistory"},"analyzeProfileFromChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"analyzeProfileFromChat"},"saveProfileHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveProfileHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-16T04:09:33.959Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-16T04:09:33.960Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat."}}
[debug] [2024-11-16T04:09:33.961Z] [worker-pool] Shutting down IDLE worker (us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-getChatHistory)"}}
[debug] [2024-11-16T04:09:33.961Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: FINISHING"}}
[debug] [2024-11-16T04:09:33.961Z] [worker-pool] Shutting down IDLE worker (us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-saveProfileHistory)"}}
[debug] [2024-11-16T04:09:33.961Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: FINISHING"}}
[debug] [2024-11-16T04:09:33.961Z] [worker-pool] Shutting down IDLE worker (us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-processChat)"}}
[debug] [2024-11-16T04:09:33.961Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: FINISHING"}}
[debug] [2024-11-16T04:09:33.962Z] [worker-pool] Shutting down IDLE worker (us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-analyzeProfileFromChat)"}}
[debug] [2024-11-16T04:09:33.962Z] [worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: FINISHING"}}
[debug] [2024-11-16T04:09:33.962Z] [worker-pool] Shutting down IDLE worker (us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-saveChatHistory)"}}
[debug] [2024-11-16T04:09:33.962Z] [worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: FINISHING"}}
[debug] [2024-11-16T04:09:33.989Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: exited"}}
[debug] [2024-11-16T04:09:33.989Z] [worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-88e0f3e6-4977-4dc0-bd4d-bba13ebf40ca]: FINISHED"}}
[debug] [2024-11-16T04:09:33.989Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: exited"}}
[debug] [2024-11-16T04:09:33.989Z] [worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-f5116949-a778-4b1b-acdf-0687766ca690]: FINISHED"}}
[debug] [2024-11-16T04:09:33.991Z] [worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: exited"}}
[debug] [2024-11-16T04:09:33.991Z] [worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-17d2b7e8-ade5-4833-a90d-a38429892d0f]: FINISHED"}}
[debug] [2024-11-16T04:09:33.992Z] [worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: exited"}}
[debug] [2024-11-16T04:09:33.992Z] [worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-62d9278d-ca02-4e73-bc33-9449c850aed6]: FINISHED"}}
[debug] [2024-11-16T04:09:33.994Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: exited"}}
[debug] [2024-11-16T04:09:33.994Z] [worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-271d5920-01fd-40e7-b2b4-213bcaf2e361]: FINISHED"}}
[debug] [2024-11-16T04:11:18.767Z] File C:\Users\Rob\Apps\not-alone\functions\src\profileAnalysis.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\src\\profileAnalysis.ts changed, reloading triggers"}}
[debug] [2024-11-16T04:11:19.773Z] Validating nodejs source
[debug] [2024-11-16T04:11:20.637Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-16T04:11:20.638Z] Building nodejs source
[debug] [2024-11-16T04:11:20.638Z] Failed to find version of module node: reached end of search path C:\Users\Rob\Apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-16T04:11:20.640Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-16T04:11:20.650Z] Found firebase-functions binary at 'C:\Users\Rob\Apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8598

[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-16T04:11:21.430Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"deleteChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"deleteChatHistory"},"analyzeProfileFromChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"analyzeProfileFromChat"},"saveProfileHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveProfileHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-16T04:11:25.460Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-16T04:11:25.461Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat."}}
[debug] [2024-11-16T04:11:43.457Z] File C:\Users\Rob\Apps\not-alone\functions\lib\chatHistory.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\chatHistory.js.map changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.457Z] File C:\Users\Rob\Apps\not-alone\functions\lib\chatHistory.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\chatHistory.js changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.467Z] File C:\Users\Rob\Apps\not-alone\functions\lib\deleteChatHistory.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\deleteChatHistory.js.map changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.469Z] File C:\Users\Rob\Apps\not-alone\functions\lib\deleteChatHistory.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\deleteChatHistory.js changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.478Z] File C:\Users\Rob\Apps\not-alone\functions\lib\getChatHistory.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\getChatHistory.js.map changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.481Z] File C:\Users\Rob\Apps\not-alone\functions\lib\getChatHistory.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\getChatHistory.js changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.498Z] File C:\Users\Rob\Apps\not-alone\functions\lib\profileAnalysis.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\profileAnalysis.js.map changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.501Z] File C:\Users\Rob\Apps\not-alone\functions\lib\profileAnalysis.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\profileAnalysis.js changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.508Z] File C:\Users\Rob\Apps\not-alone\functions\lib\profileHistory.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\profileHistory.js.map changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.510Z] File C:\Users\Rob\Apps\not-alone\functions\lib\profileHistory.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\profileHistory.js changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.532Z] File C:\Users\Rob\Apps\not-alone\functions\lib\index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js.map changed, reloading triggers"}}
[debug] [2024-11-16T04:11:43.534Z] File C:\Users\Rob\Apps\not-alone\functions\lib\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js changed, reloading triggers"}}
[debug] [2024-11-16T04:11:44.540Z] Validating nodejs source
[debug] [2024-11-16T04:11:46.081Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-16T04:11:46.081Z] Building nodejs source
[debug] [2024-11-16T04:11:46.081Z] Failed to find version of module node: reached end of search path C:\Users\Rob\Apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-16T04:11:46.082Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-16T04:11:46.092Z] Found firebase-functions binary at 'C:\Users\Rob\Apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8619

[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-16T04:11:46.882Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"deleteChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"deleteChatHistory"},"analyzeProfileFromChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"analyzeProfileFromChat"},"saveProfileHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveProfileHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-16T04:11:50.919Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-16T04:11:50.920Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat."}}
[debug] [2024-11-16T04:12:12.584Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:12.584Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:12.585Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:12.584Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:12.585Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T04:12:12.588Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:12.588Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:12.588Z] [worker-pool] Cleaned up workers for us-central1-getChatHistory: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-getChatHistory: 1 --> 0"}}
[debug] [2024-11-16T04:12:12.588Z] [worker-pool] Cleaned up workers for us-central1-saveProfileHistory: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-saveProfileHistory: 1 --> 0"}}
[debug] [2024-11-16T04:12:12.588Z] [worker-pool] Cleaned up workers for us-central1-processChat: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-processChat: 1 --> 0"}}
[debug] [2024-11-16T04:12:12.588Z] [worker-pool] Cleaned up workers for us-central1-analyzeProfileFromChat: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-analyzeProfileFromChat: 1 --> 0"}}
[debug] [2024-11-16T04:12:12.588Z] [worker-pool] Cleaned up workers for us-central1-saveChatHistory: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-saveChatHistory: 1 --> 0"}}
[debug] [2024-11-16T04:12:12.597Z] [worker-pool] addWorker(us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-getChatHistory)"}}
[debug] [2024-11-16T04:12:12.597Z] [worker-pool] Adding worker with key us-central1-getChatHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-getChatHistory, total=1"}}
[debug] [2024-11-16T04:12:12.599Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:12.598Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:12.584Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:12.599Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:12.584Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:12.598Z"],"workRunningCount":2}
[debug] [2024-11-16T04:12:12.599Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T04:12:12.602Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:12.602Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:12.608Z] [worker-pool] addWorker(us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveProfileHistory)"}}
[debug] [2024-11-16T04:12:12.609Z] [worker-pool] Adding worker with key us-central1-saveProfileHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveProfileHistory, total=1"}}
[debug] [2024-11-16T04:12:14.997Z] [runtime-status] [23888] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:14.999Z] [runtime-status] [23888] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.000Z] [runtime-status] [23628] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.000Z] [runtime-status] [23888] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-16T04:12:15.000Z] [runtime-status] [23888] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-16T04:12:15.001Z] [runtime-status] [23888] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.003Z] [runtime-status] [23628] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.003Z] [runtime-status] [23628] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-16T04:12:15.003Z] [runtime-status] [23628] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-16T04:12:15.005Z] [runtime-status] [23628] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.448Z] [runtime-status] [23888] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-16T04:12:15.448Z] [runtime-status] [23888] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-16T04:12:15.449Z] [runtime-status] [23888] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.455Z] [runtime-status] [23888] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.458Z] [runtime-status] [23888] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.458Z] [runtime-status] [23888] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2024-11-16T04:12:15.464Z] [runtime-status] [23628] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-16T04:12:15.465Z] [runtime-status] [23628] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-16T04:12:15.465Z] [runtime-status] [23628] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.471Z] [runtime-status] [23628] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.475Z] [runtime-status] [23628] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:15.475Z] [runtime-status] [23628] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-16T04:12:15.596Z] [runtime-status] [23888] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-16T04:12:15.618Z] [runtime-status] [23888] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-16T04:12:15.619Z] [runtime-status] [23888] Listening to port: \\?\pipe\fire_emu_16d2575fd1f69b6a {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [23888] Listening to port: \\\\?\\pipe\\fire_emu_16d2575fd1f69b6a"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-16T04:12:15.623Z] [runtime-status] [23628] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-16T04:12:15.646Z] [runtime-status] [23628] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-16T04:12:15.647Z] [runtime-status] [23628] Listening to port: \\?\pipe\fire_emu_e4504417dea8313e {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [23628] Listening to port: \\\\?\\pipe\\fire_emu_e4504417dea8313e"}}
[debug] [2024-11-16T04:12:15.688Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T04:12:15.688Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T04:12:15.689Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T04:12:15.692Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T04:12:15.692Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T04:12:15.693Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-16T04:12:15.694Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 4.7853ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 4.7853ms"}}
[debug] [2024-11-16T04:12:15.694Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T04:12:15.694Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:15.694Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:15.694Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:12.598Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:15.697Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:15.696Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:12.598Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:15.697Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:12.598Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:15.696Z"],"workRunningCount":2}
[debug] [2024-11-16T04:12:15.697Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T04:12:15.698Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:15.698Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:15.698Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T04:12:15.698Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T04:12:15.700Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 7.2326ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 7.2326ms"}}
[debug] [2024-11-16T04:12:15.700Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T04:12:15.700Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:15.700Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:15.700Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:15.696Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:15.702Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:15.701Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:15.696Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:15.702Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:15.696Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:15.701Z"],"workRunningCount":2}
[debug] [2024-11-16T04:12:15.702Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T04:12:15.702Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:15.702Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:15.703Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T04:12:15.703Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' } {"user":"  data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] }, {"user":"    auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },"}}
[info] >      data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' } {"user":"    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-16T00:05:01.342Z', {"user":"  createdAt: '2024-11-16T00:05:01.342Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-16T00:05:01.342Z',"}}
[info] >    lastUpdated: '2024-11-16T00:05:01.342Z', {"user":"  lastUpdated: '2024-11-16T00:05:01.342Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-16T00:05:01.342Z',"}}
[info] >    chatId: 'chat-1731715488999-tgrd1q32x', {"user":"  chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my name is robert and i have a girlfriend anmed emiliy', {"user":"      content: 'hello my name is robert and i have a girlfriend anmed emiliy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my name is robert and i have a girlfriend anmed emiliy',"}}
[info] >        timestamp: '2024-11-16T00:05:01.243Z' {"user":"      timestamp: '2024-11-16T00:05:01.243Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T00:05:01.243Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\n" + {"user":"      content: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\n' + {"user":"        '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +"}}
[info] >          '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\n' + {"user":"        '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +"}}
[info] >          '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\n' + {"user":"        '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +"}}
[info] >          '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\n' + {"user":"        '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +"}}
[info] >          '* **Intimacy:** Are you both feeling emotionally and physically connected?\n' + {"user":"        '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +"}}
[info] >          '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\n' + {"user":"        '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +"}}
[info] >          '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\n' + {"user":"        '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\n", {"user":"        \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\","}}
[info] >        timestamp: '2024-11-16T00:05:01.243Z' {"user":"      timestamp: '2024-11-16T00:05:01.243Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T00:05:01.243Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-16T04:12:16.388Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 684.9881ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 684.9881ms"}}
[debug] [2024-11-16T04:12:16.389Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T04:12:16.390Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:16.390Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:16.390Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:15.696Z"],"workRunningCount":1}
[info] >  ✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-16T04:12:16.405Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 706.94ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 706.94ms"}}
[debug] [2024-11-16T04:12:16.406Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T04:12:16.406Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:16.406Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:16.407Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:28.042Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:28.041Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:28.042Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:28.041Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:28.042Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T04:12:28.046Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:28.046Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:28.047Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T04:12:28.047Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-16T04:12:28.050Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:28.050Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:28.041Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:28.050Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:28.041Z","/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:28.050Z"],"workRunningCount":2}
[debug] [2024-11-16T04:12:28.050Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-16T04:12:28.053Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:28.053Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-16T04:12:28.064Z] [worker-pool] addWorker(us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-processChat)"}}
[debug] [2024-11-16T04:12:28.065Z] [worker-pool] Adding worker with key us-central1-processChat, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-processChat, total=1"}}
[debug] [2024-11-16T04:12:28.068Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 20.628ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 20.628ms"}}
[debug] [2024-11-16T04:12:28.069Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T04:12:28.069Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:28.069Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:28.069Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:28.050Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:28.071Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:28.071Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:28.050Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:28.072Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:28.050Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:28.071Z"],"workRunningCount":2}
[debug] [2024-11-16T04:12:28.072Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T04:12:28.075Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:28.075Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:28.075Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T04:12:28.076Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] }, {"user":"    auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },"}}
[info] >      data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' } {"user":"    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-16T04:12:28.127Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 51.6666ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 51.6666ms"}}
[debug] [2024-11-16T04:12:28.128Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T04:12:28.129Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:28.129Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:28.129Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:28.050Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:29.944Z] [runtime-status] [2248] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:29.946Z] [runtime-status] [2248] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:29.946Z] [runtime-status] [2248] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-16T04:12:29.947Z] [runtime-status] [2248] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-16T04:12:29.947Z] [runtime-status] [2248] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:30.308Z] [runtime-status] [2248] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-16T04:12:30.309Z] [runtime-status] [2248] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-16T04:12:30.309Z] [runtime-status] [2248] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:30.315Z] [runtime-status] [2248] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:30.317Z] [runtime-status] [2248] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:30.317Z] [runtime-status] [2248] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-16T04:12:30.432Z] [runtime-status] [2248] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-16T04:12:30.453Z] [runtime-status] [2248] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-16T04:12:30.454Z] [runtime-status] [2248] Listening to port: \\?\pipe\fire_emu_b02c4fde5182beeb {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [2248] Listening to port: \\\\?\\pipe\\fire_emu_b02c4fde5182beeb"}}
[debug] [2024-11-16T04:12:30.486Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-16T04:12:30.486Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-16T04:12:30.487Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-16T04:12:30.491Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 4.0054ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 4.0054ms"}}
[debug] [2024-11-16T04:12:30.491Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-16T04:12:30.492Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:30.492Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:30.492Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:30.492Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:30.492Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:30.492Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:30.492Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:30.492Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-16T04:12:30.493Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:30.493Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-16T04:12:30.493Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-16T04:12:30.494Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { message: 'i have a father and mother i want to talk about' } {"user":"  data: { message: 'i have a father and mother i want to talk about' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { message: 'i have a father and mother i want to talk about' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 47, {"user":"  messageLength: 47,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 47,"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731730350512-imi04288a {"user":"🆕 Creating new chat session: chat-1731730350512-imi04288a","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731730350512-imi04288a"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731730350512-imi04288a', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731730350512-imi04288a', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731730350512-imi04288a', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: i have a father and mother i want to talk about {"user":"💬 Sending message to Gemini: i have a father and mother i want to talk about","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: i have a father and mother i want to talk about"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731730350512-imi04288a', {"user":"  chatId: 'chat-1731730350512-imi04288a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731730350512-imi04288a',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 1158, timestamp: '2024-11-16T04:12:36.545Z' } {"user":"✅ Response received: { responseLength: 1158, timestamp: '2024-11-16T04:12:36.545Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 1158, timestamp: '2024-11-16T04:12:36.545Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "Okay, let's talk about your relationship with your parents.  To best help you, I need some more information.  Please tell me about:\n" + {"user":"  message: \"Okay, let's talk about your relationship with your parents.  To best help you, I need some more information.  Please tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"Okay, let's talk about your relationship with your parents.  To best help you, I need some more information.  Please tell me about:\\n\" +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '* **Your current relationship with your mother:**  How would you describe your relationship with your mother? Is it close, distant, strained, supportive, conflicted?  Are there specific examples you can share that illustrate the nature of your relationship?  What are some of the positive and negative aspects?\n' + {"user":"    '* **Your current relationship with your mother:**  How would you describe your relationship with your mother? Is it close, distant, strained, supportive, conflicted?  Are there specific examples you can share that illustrate the nature of your relationship?  What are some of the positive and negative aspects?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Your current relationship with your mother:**  How would you describe your relationship with your mother? Is it close, distant, strained, supportive, conflicted?  Are there specific examples you can share that illustrate the nature of your relationship?  What are some of the positive and negative aspects?\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '* **Your current relationship with your father:** Similar to above, how would you describe your relationship with your father?  What are some positive and negative aspects? Are there specific examples you can share?\n' + {"user":"    '* **Your current relationship with your father:** Similar to above, how would you describe your relationship with your father?  What are some positive and negative aspects? Are there specific examples you can share?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Your current relationship with your father:** Similar to above, how would you describe your relationship with your father?  What are some positive and negative aspects? Are there specific examples you can share?\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      "* **What are your goals for these relationships?** What would you like to change or improve?  Are there specific issues you'd like to address?\n" + {"user":"    \"* **What are your goals for these relationships?** What would you like to change or improve?  Are there specific issues you'd like to address?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"* **What are your goals for these relationships?** What would you like to change or improve?  Are there specific issues you'd like to address?\\n\" +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '* **What are your biggest challenges or concerns?**  Are there recurring conflicts?  Do you feel understood and supported by them? Do you feel you understand and support them?\n' + {"user":"    '* **What are your biggest challenges or concerns?**  Are there recurring conflicts?  Do you feel understood and supported by them? Do you feel you understand and support them?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **What are your biggest challenges or concerns?**  Are there recurring conflicts?  Do you feel understood and supported by them? Do you feel you understand and support them?\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      "The more detail you provide, the better I can understand your situation and offer helpful advice or suggestions. Remember, I'm here to listen and offer support, not to judge.\n", {"user":"    \"The more detail you provide, the better I can understand your situation and offer helpful advice or suggestions. Remember, I'm here to listen and offer support, not to judge.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"The more detail you provide, the better I can understand your situation and offer helpful advice or suggestions. Remember, I'm here to listen and offer support, not to judge.\\n\","}}
[info] >    userMessage: 'i have a father and mother i want to talk about', {"user":"  userMessage: 'i have a father and mother i want to talk about',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'i have a father and mother i want to talk about',"}}
[info] >    timestamp: '2024-11-16T04:12:36.545Z', {"user":"  timestamp: '2024-11-16T04:12:36.545Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-16T04:12:36.545Z',"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: 'chat-1731730350512-imi04288a' {"user":"  chatId: 'chat-1731730350512-imi04288a'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731730350512-imi04288a'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: 'chat-1731730350512-imi04288a', {"user":"  chatId: 'chat-1731730350512-imi04288a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731730350512-imi04288a',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-16T04:12:36.545Z', {"user":"  timestamp: '2024-11-16T04:12:36.545Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-16T04:12:36.545Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T04:12:36.563Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-16T04:12:36.563Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:30.492Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:36.563Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:30.492Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-16T04:12:36.563Z"],"workRunningCount":2}
[debug] [2024-11-16T04:12:36.563Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-16T04:12:36.565Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:36.565Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-16T04:12:36.574Z] [worker-pool] addWorker(us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-analyzeProfileFromChat)"}}
[debug] [2024-11-16T04:12:36.575Z] [worker-pool] Adding worker with key us-central1-analyzeProfileFromChat, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-analyzeProfileFromChat, total=1"}}
[debug] [2024-11-16T04:12:38.508Z] [runtime-status] [26584] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:38.511Z] [runtime-status] [26584] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:38.512Z] [runtime-status] [26584] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-16T04:12:38.512Z] [runtime-status] [26584] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-16T04:12:38.513Z] [runtime-status] [26584] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:39.016Z] [runtime-status] [26584] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-16T04:12:39.016Z] [runtime-status] [26584] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-16T04:12:39.017Z] [runtime-status] [26584] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:39.025Z] [runtime-status] [26584] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:39.030Z] [runtime-status] [26584] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:39.031Z] [runtime-status] [26584] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-16T04:12:39.210Z] [runtime-status] [26584] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-16T04:12:39.251Z] [runtime-status] [26584] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-16T04:12:39.253Z] [runtime-status] [26584] Listening to port: \\?\pipe\fire_emu_2f5d020e33a67784 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26584] Listening to port: \\\\?\\pipe\\fire_emu_2f5d020e33a67784"}}
[debug] [2024-11-16T04:12:39.333Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE"}}
[debug] [2024-11-16T04:12:39.333Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-16T04:12:39.334Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1406 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1406 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1406 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"      userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >        chatId: 'chat-1731730350512-imi04288a', {"user":"      chatId: 'chat-1731730350512-imi04288a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731730350512-imi04288a',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: 'chat-1731730350512-imi04288a', {"user":"  chatId: 'chat-1731730350512-imi04288a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731730350512-imi04288a',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Found existing profile: { nodesCount: 2, linksCount: 1 } {"user":"📄 Found existing profile: { nodesCount: 2, linksCount: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Found existing profile: { nodesCount: 2, linksCount: 1 }"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    nodesCount: 4, {"user":"  nodesCount: 4,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 4,"}}
[info] >    linksCount: 3 {"user":"  linksCount: 3","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 3"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T04:12:54.670Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 15335.9678ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 15335.9678ms"}}
[debug] [2024-11-16T04:12:54.670Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE"}}
[debug] [2024-11-16T04:12:54.671Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:54.671Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:54.671Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:30.492Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [Array] } {"user":"    analysis: { nodes: [Array], links: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [Array] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "zCREfMSFzBOeCxLEpMkaWLDRMtXe", {"user":"  \"userId\": \"zCREfMSFzBOeCxLEpMkaWLDRMtXe\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"zCREfMSFzBOeCxLEpMkaWLDRMtXe\","}}
[info] >    "chatId": "chat-1731730350512-imi04288a", {"user":"  \"chatId\": \"chat-1731730350512-imi04288a\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731730350512-imi04288a\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "i have a father and mother i want to talk about", {"user":"      \"content\": \"i have a father and mother i want to talk about\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"i have a father and mother i want to talk about\","}}
[info] >        "timestamp": "2024-11-16T04:12:54.676Z" {"user":"      \"timestamp\": \"2024-11-16T04:12:54.676Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-16T04:12:54.676Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Okay, let's talk about your relationship with your parents.  To best help you, I need some more information.  Please tell me about:\n\n* **Your current relationship with your mother:**  How would you describe your relationship with your mother? Is it close, distant, strained, supportive, conflicted?  Are there specific examples you can share that illustrate the nature of your relationship?  What are some of the positive and negative aspects?\n\n* **Your current relationship with your father:** Similar to above, how would you describe your relationship with your father?  What are some positive and negative aspects? Are there specific examples you can share?\n\n* **What are your goals for these relationships?** What would you like to change or improve?  Are there specific issues you'd like to address?\n\n* **What are your biggest challenges or concerns?**  Are there recurring conflicts?  Do you feel understood and supported by them? Do you feel you understand and support them?\n\nThe more detail you provide, the better I can understand your situation and offer helpful advice or suggestions. Remember, I'm here to listen and offer support, not to judge.\n", {"user":"      \"content\": \"Okay, let's talk about your relationship with your parents.  To best help you, I need some more information.  Please tell me about:\\n\\n* **Your current relationship with your mother:**  How would you describe your relationship with your mother? Is it close, distant, strained, supportive, conflicted?  Are there specific examples you can share that illustrate the nature of your relationship?  What are some of the positive and negative aspects?\\n\\n* **Your current relationship with your father:** Similar to above, how would you describe your relationship with your father?  What are some positive and negative aspects? Are there specific examples you can share?\\n\\n* **What are your goals for these relationships?** What would you like to change or improve?  Are there specific issues you'd like to address?\\n\\n* **What are your biggest challenges or concerns?**  Are there recurring conflicts?  Do you feel understood and supported by them? Do you feel you understand and support them?\\n\\nThe more detail you provide, the better I can understand your situation and offer helpful advice or suggestions. Remember, I'm here to listen and offer support, not to judge.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Okay, let's talk about your relationship with your parents.  To best help you, I need some more information.  Please tell me about:\\n\\n* **Your current relationship with your mother:**  How would you describe your relationship with your mother? Is it close, distant, strained, supportive, conflicted?  Are there specific examples you can share that illustrate the nature of your relationship?  What are some of the positive and negative aspects?\\n\\n* **Your current relationship with your father:** Similar to above, how would you describe your relationship with your father?  What are some positive and negative aspects? Are there specific examples you can share?\\n\\n* **What are your goals for these relationships?** What would you like to change or improve?  Are there specific issues you'd like to address?\\n\\n* **What are your biggest challenges or concerns?**  Are there recurring conflicts?  Do you feel understood and supported by them? Do you feel you understand and support them?\\n\\nThe more detail you provide, the better I can understand your situation and offer helpful advice or suggestions. Remember, I'm here to listen and offer support, not to judge.\\n\","}}
[info] >        "timestamp": "2024-11-16T04:12:54.676Z" {"user":"      \"timestamp\": \"2024-11-16T04:12:54.676Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-16T04:12:54.676Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-16T04:12:54.676Z", {"user":"  \"timestamp\": \"2024-11-16T04:12:54.676Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-16T04:12:54.676Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "zCREfMSFzBOeCxLEpMkaWLDRMtXe", {"user":"    \"uid\": \"zCREfMSFzBOeCxLEpMkaWLDRMtXe\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"zCREfMSFzBOeCxLEpMkaWLDRMtXe\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T04:12:54.709Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-16T04:12:54.709Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:30.492Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:54.709Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:30.492Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-16T04:12:54.709Z"],"workRunningCount":2}
[debug] [2024-11-16T04:12:54.710Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-16T04:12:54.713Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:54.713Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:54.721Z] [worker-pool] addWorker(us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveChatHistory)"}}
[debug] [2024-11-16T04:12:54.722Z] [worker-pool] Adding worker with key us-central1-saveChatHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveChatHistory, total=1"}}
[debug] [2024-11-16T04:12:56.775Z] [runtime-status] [23352] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:56.778Z] [runtime-status] [23352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:56.779Z] [runtime-status] [23352] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-16T04:12:56.779Z] [runtime-status] [23352] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-16T04:12:56.780Z] [runtime-status] [23352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:57.222Z] [runtime-status] [23352] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-16T04:12:57.222Z] [runtime-status] [23352] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-16T04:12:57.223Z] [runtime-status] [23352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:57.231Z] [runtime-status] [23352] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:57.234Z] [runtime-status] [23352] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-16T04:12:57.235Z] [runtime-status] [23352] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-16T04:12:57.359Z] [runtime-status] [23352] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-16T04:12:57.381Z] [runtime-status] [23352] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-16T04:12:57.382Z] [runtime-status] [23352] Listening to port: \\?\pipe\fire_emu_b3e366e1552990c8 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [23352] Listening to port: \\\\?\\pipe\\fire_emu_b3e366e1552990c8"}}
[debug] [2024-11-16T04:12:57.454Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE"}}
[debug] [2024-11-16T04:12:57.454Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-16T04:12:57.454Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1445 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1445 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 1445 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"      userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >        chatId: 'chat-1731730350512-imi04288a', {"user":"      chatId: 'chat-1731730350512-imi04288a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731730350512-imi04288a',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-16T04:12:54.676Z' {"user":"      timestamp: '2024-11-16T04:12:54.676Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T04:12:54.676Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: 'chat-1731730350512-imi04288a', {"user":"  chatId: 'chat-1731730350512-imi04288a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731730350512-imi04288a',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731730350512-imi04288a { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731730350512-imi04288a { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731730350512-imi04288a { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-16T04:12:57.938Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 483.4841ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 483.4841ms"}}
[debug] [2024-11-16T04:12:57.939Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE"}}
[debug] [2024-11-16T04:12:57.939Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:57.939Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:57.939Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T04:12:30.492Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T04:12:57.943Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 27450.2329ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 27450.2329ms"}}
[debug] [2024-11-16T04:12:57.944Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-16T04:12:57.944Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:57.944Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:57.944Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:57.950Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:57.950Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:57.950Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:57.950Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:57.950Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T04:12:57.951Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:57.951Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:57.951Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T04:12:57.952Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T04:12:57.955Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 3.5902ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 3.5902ms"}}
[debug] [2024-11-16T04:12:57.956Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T04:12:57.956Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:57.956Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:57.956Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:57.957Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:57.957Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:57.957Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:57.957Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:57.957Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T04:12:57.959Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:57.960Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:57.960Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T04:12:57.960Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' } {"user":"  data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-16T04:12:57.994Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:57.994Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:57.957Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:57.994Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T04:12:57.957Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:57.994Z"],"workRunningCount":2}
[debug] [2024-11-16T04:12:57.995Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T04:12:57.997Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:57.998Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:57.998Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T04:12:57.998Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 2, {"user":"  documentsFound: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 2,"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-16T04:12:57.898Z', {"user":"  createdAt: '2024-11-16T04:12:57.898Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-16T04:12:57.898Z',"}}
[info] >    lastUpdated: '2024-11-16T04:12:57.898Z', {"user":"  lastUpdated: '2024-11-16T04:12:57.898Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-16T04:12:57.898Z',"}}
[info] >    chatId: 'chat-1731730350512-imi04288a', {"user":"  chatId: 'chat-1731730350512-imi04288a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731730350512-imi04288a',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'i have a father and mother i want to talk about', {"user":"      content: 'i have a father and mother i want to talk about',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'i have a father and mother i want to talk about',"}}
[info] >        timestamp: '2024-11-16T04:12:54.676Z' {"user":"      timestamp: '2024-11-16T04:12:54.676Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T04:12:54.676Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Okay, let's talk about your relationship with your parents.  To best help you, I need some more information.  Please tell me about:\n" + {"user":"      content: \"Okay, let's talk about your relationship with your parents.  To best help you, I need some more information.  Please tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Okay, let's talk about your relationship with your parents.  To best help you, I need some more information.  Please tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Your current relationship with your mother:**  How would you describe your relationship with your mother? Is it close, distant, strained, supportive, conflicted?  Are there specific examples you can share that illustrate the nature of your relationship?  What are some of the positive and negative aspects?\n' + {"user":"        '* **Your current relationship with your mother:**  How would you describe your relationship with your mother? Is it close, distant, strained, supportive, conflicted?  Are there specific examples you can share that illustrate the nature of your relationship?  What are some of the positive and negative aspects?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your current relationship with your mother:**  How would you describe your relationship with your mother? Is it close, distant, strained, supportive, conflicted?  Are there specific examples you can share that illustrate the nature of your relationship?  What are some of the positive and negative aspects?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Your current relationship with your father:** Similar to above, how would you describe your relationship with your father?  What are some positive and negative aspects? Are there specific examples you can share?\n' + {"user":"        '* **Your current relationship with your father:** Similar to above, how would you describe your relationship with your father?  What are some positive and negative aspects? Are there specific examples you can share?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your current relationship with your father:** Similar to above, how would you describe your relationship with your father?  What are some positive and negative aspects? Are there specific examples you can share?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "* **What are your goals for these relationships?** What would you like to change or improve?  Are there specific issues you'd like to address?\n" + {"user":"        \"* **What are your goals for these relationships?** What would you like to change or improve?  Are there specific issues you'd like to address?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **What are your goals for these relationships?** What would you like to change or improve?  Are there specific issues you'd like to address?\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **What are your biggest challenges or concerns?**  Are there recurring conflicts?  Do you feel understood and supported by them? Do you feel you understand and support them?\n' + {"user":"        '* **What are your biggest challenges or concerns?**  Are there recurring conflicts?  Do you feel understood and supported by them? Do you feel you understand and support them?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **What are your biggest challenges or concerns?**  Are there recurring conflicts?  Do you feel understood and supported by them? Do you feel you understand and support them?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more detail you provide, the better I can understand your situation and offer helpful advice or suggestions. Remember, I'm here to listen and offer support, not to judge.\n", {"user":"        \"The more detail you provide, the better I can understand your situation and offer helpful advice or suggestions. Remember, I'm here to listen and offer support, not to judge.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more detail you provide, the better I can understand your situation and offer helpful advice or suggestions. Remember, I'm here to listen and offer support, not to judge.\\n\","}}
[info] >        timestamp: '2024-11-16T04:12:54.676Z' {"user":"      timestamp: '2024-11-16T04:12:54.676Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T04:12:54.676Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-16T00:05:01.342Z', {"user":"  createdAt: '2024-11-16T00:05:01.342Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-16T00:05:01.342Z',"}}
[info] >    lastUpdated: '2024-11-16T00:05:01.342Z', {"user":"  lastUpdated: '2024-11-16T00:05:01.342Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-16T00:05:01.342Z',"}}
[info] >    chatId: 'chat-1731715488999-tgrd1q32x', {"user":"  chatId: 'chat-1731715488999-tgrd1q32x',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731715488999-tgrd1q32x',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'hello my name is robert and i have a girlfriend anmed emiliy', {"user":"      content: 'hello my name is robert and i have a girlfriend anmed emiliy',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'hello my name is robert and i have a girlfriend anmed emiliy',"}}
[info] >        timestamp: '2024-11-16T00:05:01.243Z' {"user":"      timestamp: '2024-11-16T00:05:01.243Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T00:05:01.243Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\n" + {"user":"      content: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"Hi Robert, it's great to meet you.  To help you understand your relationship with Emily, I need some information.  Perhaps we could talk about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\n' + {"user":"        '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Communication:** How do you and Emily communicate?  Are you both feeling heard and understood?\\n' +"}}
[info] >          '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\n' + {"user":"        '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Conflict Resolution:** How do you handle disagreements?  Do you feel you resolve conflicts constructively?\\n' +"}}
[info] >          '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\n' + {"user":"        '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Shared Values and Goals:** Do you and Emily share similar values and life goals?\\n' +"}}
[info] >          '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\n' + {"user":"        '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Quality Time:**  Do you spend enough quality time together?  What activities do you enjoy doing as a couple?\\n' +"}}
[info] >          '* **Intimacy:** Are you both feeling emotionally and physically connected?\n' + {"user":"        '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Intimacy:** Are you both feeling emotionally and physically connected?\\n' +"}}
[info] >          '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\n' + {"user":"        '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Trust and Honesty:** Do you trust Emily, and does she trust you?  Is there honesty in your relationship?\\n' +"}}
[info] >          '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\n' + {"user":"        '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Support and Affection:** Do you feel supported and loved by Emily?  Does she feel supported and loved by you?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\n", {"user":"        \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"Let's start with one of these areas.  Which aspect of your relationship with Emily would you like to discuss first?\\n\","}}
[info] >        timestamp: '2024-11-16T00:05:01.243Z' {"user":"      timestamp: '2024-11-16T00:05:01.243Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T00:05:01.243Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe' {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T04:12:58.029Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 69.0999ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 69.0999ms"}}
[debug] [2024-11-16T04:12:58.030Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T04:12:58.030Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:58.030Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:58.030Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:57.994Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:58.031Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 32.7355ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 32.7355ms"}}
[debug] [2024-11-16T04:12:58.032Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T04:12:58.032Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:58.032Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:58.032Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  ✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 2, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 2, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalChats: 2, chatId: 'All chats' }"}}
[debug] [2024-11-16T04:12:58.034Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:58.034Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T04:12:58.034Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T04:12:58.034Z"],"workRunningCount":1}
[debug] [2024-11-16T04:12:58.034Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T04:12:58.036Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T04:12:58.036Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T04:12:58.036Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T04:12:58.037Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 7a 43 52 45 66 4d 53 46 7a 42 4f 65 43 78 4c 45 70 4d 6b 61 57 4c 44 52 4d 74 58 65 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] }, {"user":"    auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"      userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >        chatId: 'chat-1731730350512-imi04288a' {"user":"      chatId: 'chat-1731730350512-imi04288a'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731730350512-imi04288a'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe', {"user":"  userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'zCREfMSFzBOeCxLEpMkaWLDRMtXe',"}}
[info] >    nodesCount: 4, {"user":"  nodesCount: 4,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 4,"}}
[info] >    linksCount: 3 {"user":"  linksCount: 3","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 3"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 4, totalLinks: 3 } {"user":"✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 4, totalLinks: 3 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: zCREfMSFzBOeCxLEpMkaWLDRMtXe { totalNodes: 4, totalLinks: 3 }"}}
[debug] [2024-11-16T04:12:58.079Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 42.187ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 42.187ms"}}
[debug] [2024-11-16T04:12:58.080Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T04:12:58.080Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T04:12:58.080Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T04:12:58.080Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:30.763Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-16T20:57:30.764Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"c64aa371-18b9-4f2f-97ef-d91ffbcea78b","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-16T20:57:30.762Z","data":{"uid":"82FVAyu1hXQITmAboaNkItV2DAxD","email":"otter.grass.317@example.com","emailVerified":true,"displayName":"Otter Grass","metadata":{"creationTime":"2024-11-16T20:57:30.761Z","lastSignInTime":"2024-11-16T20:57:30.761Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"0997739837023595780690413619017422140442","federatedId":"0997739837023595780690413619017422140442","displayName":"Otter Grass","email":"otter.grass.317@example.com","screenName":"grass_otter"}]}}
[debug] [2024-11-16T20:57:30.775Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-16T20:57:30.775Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-16T20:57:30.858Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:30.857Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:30.858Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:30.857Z"],"workRunningCount":1}
[debug] [2024-11-16T20:57:30.858Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T20:57:30.864Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T20:57:30.864Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T20:57:30.864Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T20:57:30.866Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T20:57:30.881Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 14.5547ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 14.5547ms"}}
[debug] [2024-11-16T20:57:30.881Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T20:57:30.881Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T20:57:30.882Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T20:57:30.882Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:30.888Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:30.888Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:30.888Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:30.888Z"],"workRunningCount":1}
[debug] [2024-11-16T20:57:30.888Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T20:57:30.892Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T20:57:30.892Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T20:57:30.892Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T20:57:30.893Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '82FVAyu1hXQITmAboaNkItV2DAxD' } {"user":"  data: { userId: '82FVAyu1hXQITmAboaNkItV2DAxD' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '82FVAyu1hXQITmAboaNkItV2DAxD' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: '82FVAyu1hXQITmAboaNkItV2DAxD', {"user":"  userId: '82FVAyu1hXQITmAboaNkItV2DAxD',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '82FVAyu1hXQITmAboaNkItV2DAxD',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-16T20:57:30.954Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 61.1354ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 61.1354ms"}}
[debug] [2024-11-16T20:57:30.954Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T20:57:30.954Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T20:57:30.954Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T20:57:30.954Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:32.832Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:32.832Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:32.832Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:32.832Z"],"workRunningCount":1}
[debug] [2024-11-16T20:57:32.832Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T20:57:32.833Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T20:57:32.833Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T20:57:32.833Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T20:57:32.834Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T20:57:32.835Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T20:57:32.835Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:32.832Z"],"workRunningCount":1}
[debug] [2024-11-16T20:57:32.835Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:32.832Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T20:57:32.835Z"],"workRunningCount":2}
[debug] [2024-11-16T20:57:32.835Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T20:57:32.836Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T20:57:32.836Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T20:57:32.836Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T20:57:32.837Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '82FVAyu1hXQITmAboaNkItV2DAxD' } {"user":"  data: { userId: '82FVAyu1hXQITmAboaNkItV2DAxD' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '82FVAyu1hXQITmAboaNkItV2DAxD' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-16T20:57:32.851Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 14.6087ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 14.6087ms"}}
[debug] [2024-11-16T20:57:32.852Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T20:57:32.852Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T20:57:32.852Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T20:57:32.852Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:32.832Z"],"workRunningCount":1}
[debug] [2024-11-16T20:57:32.854Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T20:57:32.854Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:32.832Z"],"workRunningCount":1}
[debug] [2024-11-16T20:57:32.854Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:32.832Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T20:57:32.854Z"],"workRunningCount":2}
[debug] [2024-11-16T20:57:32.854Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T20:57:32.856Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T20:57:32.856Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T20:57:32.856Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T20:57:32.857Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: '82FVAyu1hXQITmAboaNkItV2DAxD', {"user":"  userId: '82FVAyu1hXQITmAboaNkItV2DAxD',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '82FVAyu1hXQITmAboaNkItV2DAxD',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-16T20:57:32.867Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 33.6233ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 33.6233ms"}}
[debug] [2024-11-16T20:57:32.868Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T20:57:32.868Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T20:57:32.868Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T20:57:32.868Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T20:57:32.854Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 38 32 46 56 41 79 75 31 68 58 51 49 54 6d 41 62 6f 61 4e 6b 49 74 56 32 44 41 78 44 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 38 32 46 56 41 79 75 31 68 58 51 49 54 6d 41 62 6f 61 4e 6b 49 74 56 32 44 41 78 44 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 38 32 46 56 41 79 75 31 68 58 51 49 54 6d 41 62 6f 61 4e 6b 49 74 56 32 44 41 78 44 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '82FVAyu1hXQITmAboaNkItV2DAxD', token: [Object] }, {"user":"    auth: { uid: '82FVAyu1hXQITmAboaNkItV2DAxD', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '82FVAyu1hXQITmAboaNkItV2DAxD', token: [Object] },"}}
[info] >      data: { userId: '82FVAyu1hXQITmAboaNkItV2DAxD', chatId: 'default-chat' } {"user":"    data: { userId: '82FVAyu1hXQITmAboaNkItV2DAxD', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: '82FVAyu1hXQITmAboaNkItV2DAxD', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '82FVAyu1hXQITmAboaNkItV2DAxD', {"user":"  userId: '82FVAyu1hXQITmAboaNkItV2DAxD',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '82FVAyu1hXQITmAboaNkItV2DAxD',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 82FVAyu1hXQITmAboaNkItV2DAxD { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: 82FVAyu1hXQITmAboaNkItV2DAxD { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 82FVAyu1hXQITmAboaNkItV2DAxD { totalNodes: 0, totalLinks: 0 }"}}
[debug] [2024-11-16T20:57:32.916Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 59.734ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 59.734ms"}}
[debug] [2024-11-16T20:57:32.917Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T20:57:32.917Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T20:57:32.917Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T20:57:32.917Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:59.630Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-16T20:57:59.630Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"c40c1c15-6d74-45a6-a2f1-3a1ff27842b5","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-16T20:57:59.630Z","data":{"uid":"RhQ3keZIqgDoTd6VuJ4AUpyUmdYZ","email":"olive.chicken.705@example.com","emailVerified":true,"displayName":"Moly","metadata":{"creationTime":"2024-11-16T20:57:59.630Z","lastSignInTime":"2024-11-16T20:57:59.630Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"2190843014105487835596370651363639217801","federatedId":"2190843014105487835596370651363639217801","displayName":"Moly","email":"olive.chicken.705@example.com","screenName":"chicken_olive"}]}}
[debug] [2024-11-16T20:57:59.637Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-16T20:57:59.637Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-16T20:57:59.699Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:59.699Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:59.699Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:59.699Z"],"workRunningCount":1}
[debug] [2024-11-16T20:57:59.699Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T20:57:59.703Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T20:57:59.703Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T20:57:59.703Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T20:57:59.704Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T20:57:59.708Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 3.591ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 3.591ms"}}
[debug] [2024-11-16T20:57:59.708Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T20:57:59.709Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T20:57:59.709Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T20:57:59.709Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:59.730Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:59.730Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T20:57:59.730Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T20:57:59.730Z"],"workRunningCount":1}
[debug] [2024-11-16T20:57:59.730Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T20:57:59.732Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T20:57:59.732Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T20:57:59.732Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T20:57:59.733Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'RhQ3keZIqgDoTd6VuJ4AUpyUmdYZ' } {"user":"  data: { userId: 'RhQ3keZIqgDoTd6VuJ4AUpyUmdYZ' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'RhQ3keZIqgDoTd6VuJ4AUpyUmdYZ' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: 'RhQ3keZIqgDoTd6VuJ4AUpyUmdYZ', {"user":"  userId: 'RhQ3keZIqgDoTd6VuJ4AUpyUmdYZ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'RhQ3keZIqgDoTd6VuJ4AUpyUmdYZ',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-16T20:57:59.753Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 20.514ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 20.514ms"}}
[debug] [2024-11-16T20:57:59.754Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T20:57:59.754Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T20:57:59.754Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T20:57:59.754Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:12:59.424Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-16T21:12:59.424Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"4818990b-b34b-4bad-b5fa-e1b7e2e3d64a","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-16T21:12:59.423Z","data":{"uid":"N8UnVUM0gVu4D2SSh2mvtSpggNVp","email":"grass.raccoon.158@example.com","emailVerified":true,"displayName":"Robert","metadata":{"creationTime":"2024-11-16T21:12:59.423Z","lastSignInTime":"2024-11-16T21:12:59.423Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"7337377191813862243166431664123242529734","federatedId":"7337377191813862243166431664123242529734","displayName":"Robert","email":"grass.raccoon.158@example.com","screenName":"raccoon_grass"}]}}
[debug] [2024-11-16T21:12:59.427Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-16T21:12:59.428Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-16T21:12:59.517Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:12:59.517Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:12:59.517Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:12:59.517Z"],"workRunningCount":1}
[debug] [2024-11-16T21:12:59.518Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:12:59.520Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:12:59.521Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:12:59.521Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:12:59.521Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T21:12:59.524Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 2.5491ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 2.5491ms"}}
[debug] [2024-11-16T21:12:59.524Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:12:59.524Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:12:59.524Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:12:59.525Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:12:59.545Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:12:59.545Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:12:59.545Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:12:59.545Z"],"workRunningCount":1}
[debug] [2024-11-16T21:12:59.545Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:12:59.547Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:12:59.547Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:12:59.547Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:12:59.548Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' } {"user":"  data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-16T21:12:59.567Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 19.1407ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 19.1407ms"}}
[debug] [2024-11-16T21:12:59.567Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:12:59.568Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:12:59.568Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:12:59.568Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:15.522Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:15.522Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:15.522Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:15.522Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:15.522Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T21:13:15.524Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:15.524Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:15.524Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T21:13:15.525Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-16T21:13:15.526Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.526Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:15.522Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:15.526Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:15.522Z","/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.526Z"],"workRunningCount":2}
[debug] [2024-11-16T21:13:15.526Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-16T21:13:15.529Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:15.529Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-16T21:13:15.529Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-16T21:13:15.529Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-16T21:13:15.532Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 7.5339ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 7.5339ms"}}
[debug] [2024-11-16T21:13:15.533Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T21:13:15.533Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:15.533Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:15.533Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.526Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:15.534Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:15.534Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.526Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:15.534Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.526Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:15.534Z"],"workRunningCount":2}
[debug] [2024-11-16T21:13:15.534Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T21:13:15.537Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:15.537Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:15.537Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T21:13:15.537Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', token: [Object] }, {"user":"    auth: { uid: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', token: [Object] },"}}
[info] >      data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', chatId: 'default-chat' } {"user":"    data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T21:13:15.560Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 30.5237ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 30.5237ms"}}
[debug] [2024-11-16T21:13:15.560Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-16T21:13:15.560Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:15.561Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:15.561Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:15.534Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T21:13:15.564Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.564Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:15.534Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:15.565Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:15.534Z","/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.564Z"],"workRunningCount":2}
[debug] [2024-11-16T21:13:15.565Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-16T21:13:15.567Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:15.567Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-16T21:13:15.568Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-16T21:13:15.568Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[info] >  ✅ Profile history saved/updated: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalNodes: 0, totalLinks: 0 }"}}
[debug] [2024-11-16T21:13:15.575Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 38.3644ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 38.3644ms"}}
[debug] [2024-11-16T21:13:15.576Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T21:13:15.576Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:15.576Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:15.577Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.564Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { message: 'Hello I Have a Girlfriend named Moly' } {"user":"  data: { message: 'Hello I Have a Girlfriend named Moly' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { message: 'Hello I Have a Girlfriend named Moly' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 36, {"user":"  messageLength: 36,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 36,"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731791595577-5xexf5cr0 {"user":"🆕 Creating new chat session: chat-1731791595577-5xexf5cr0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731791595577-5xexf5cr0"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731791595577-5xexf5cr0', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731791595577-5xexf5cr0', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731791595577-5xexf5cr0', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: Hello I Have a Girlfriend named Moly {"user":"💬 Sending message to Gemini: Hello I Have a Girlfriend named Moly","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: Hello I Have a Girlfriend named Moly"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731791595577-5xexf5cr0', {"user":"  chatId: 'chat-1731791595577-5xexf5cr0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731791595577-5xexf5cr0',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 871, timestamp: '2024-11-16T21:13:20.824Z' } {"user":"✅ Response received: { responseLength: 871, timestamp: '2024-11-16T21:13:20.824Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 871, timestamp: '2024-11-16T21:13:20.824Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\n" + {"user":"  message: \"That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\\n\" +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      "* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\n" + {"user":"    \"* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\\n\" +"}}
[info] >      '* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\n' + {"user":"    '* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\\n' +"}}
[info] >      "* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\n" + {"user":"    \"* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\\n\" +"}}
[info] >      '* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\n' + {"user":"    '* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\\n' +"}}
[info] >      '* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\n' + {"user":"    '* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      "The more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\n", {"user":"    \"The more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"The more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\\n\","}}
[info] >    userMessage: 'Hello I Have a Girlfriend named Moly', {"user":"  userMessage: 'Hello I Have a Girlfriend named Moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'Hello I Have a Girlfriend named Moly',"}}
[info] >    timestamp: '2024-11-16T21:13:20.824Z', {"user":"  timestamp: '2024-11-16T21:13:20.824Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-16T21:13:20.824Z',"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    chatId: 'chat-1731791595577-5xexf5cr0' {"user":"  chatId: 'chat-1731791595577-5xexf5cr0'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731791595577-5xexf5cr0'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    chatId: 'chat-1731791595577-5xexf5cr0', {"user":"  chatId: 'chat-1731791595577-5xexf5cr0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731791595577-5xexf5cr0',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-16T21:13:20.824Z', {"user":"  timestamp: '2024-11-16T21:13:20.824Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-16T21:13:20.824Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T21:13:20.835Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-16T21:13:20.835Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.564Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:20.835Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.564Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-16T21:13:20.835Z"],"workRunningCount":2}
[debug] [2024-11-16T21:13:20.835Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-16T21:13:20.836Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:20.837Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-16T21:13:20.837Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-16T21:13:20.837Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 1107 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 1107 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 1107 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"      userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >        chatId: 'chat-1731791595577-5xexf5cr0', {"user":"      chatId: 'chat-1731791595577-5xexf5cr0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731791595577-5xexf5cr0',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    chatId: 'chat-1731791595577-5xexf5cr0', {"user":"  chatId: 'chat-1731791595577-5xexf5cr0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731791595577-5xexf5cr0',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Found existing profile: { nodesCount: 0, linksCount: 0 } {"user":"📄 Found existing profile: { nodesCount: 0, linksCount: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Found existing profile: { nodesCount: 0, linksCount: 0 }"}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T21:13:28.682Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 7844.4095ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 7844.4095ms"}}
[debug] [2024-11-16T21:13:28.682Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE"}}
[debug] [2024-11-16T21:13:28.682Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:28.682Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:28.682Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.564Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [Array] } {"user":"    analysis: { nodes: [Array], links: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [Array] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "N8UnVUM0gVu4D2SSh2mvtSpggNVp", {"user":"  \"userId\": \"N8UnVUM0gVu4D2SSh2mvtSpggNVp\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"N8UnVUM0gVu4D2SSh2mvtSpggNVp\","}}
[info] >    "chatId": "chat-1731791595577-5xexf5cr0", {"user":"  \"chatId\": \"chat-1731791595577-5xexf5cr0\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731791595577-5xexf5cr0\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "Hello I Have a Girlfriend named Moly", {"user":"      \"content\": \"Hello I Have a Girlfriend named Moly\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Hello I Have a Girlfriend named Moly\","}}
[info] >        "timestamp": "2024-11-16T21:13:28.684Z" {"user":"      \"timestamp\": \"2024-11-16T21:13:28.684Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-16T21:13:28.684Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\n\n* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\n* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\n* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\n* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\n* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\n\n\nThe more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\n", {"user":"      \"content\": \"That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\\n\\n* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\\n* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\\n* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\\n* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\\n* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\\n\\n\\nThe more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\\n\\n* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\\n* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\\n* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\\n* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\\n* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\\n\\n\\nThe more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\\n\","}}
[info] >        "timestamp": "2024-11-16T21:13:28.684Z" {"user":"      \"timestamp\": \"2024-11-16T21:13:28.684Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-16T21:13:28.684Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-16T21:13:28.684Z", {"user":"  \"timestamp\": \"2024-11-16T21:13:28.684Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-16T21:13:28.684Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "N8UnVUM0gVu4D2SSh2mvtSpggNVp", {"user":"    \"uid\": \"N8UnVUM0gVu4D2SSh2mvtSpggNVp\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"N8UnVUM0gVu4D2SSh2mvtSpggNVp\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T21:13:28.703Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-16T21:13:28.703Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.564Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:28.703Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.564Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-16T21:13:28.703Z"],"workRunningCount":2}
[debug] [2024-11-16T21:13:28.703Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-16T21:13:28.705Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:28.705Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:28.705Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-16T21:13:28.706Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 1146 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 1146 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 1146 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"      userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >        chatId: 'chat-1731791595577-5xexf5cr0', {"user":"      chatId: 'chat-1731791595577-5xexf5cr0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731791595577-5xexf5cr0',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-16T21:13:28.684Z' {"user":"      timestamp: '2024-11-16T21:13:28.684Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T21:13:28.684Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    chatId: 'chat-1731791595577-5xexf5cr0', {"user":"  chatId: 'chat-1731791595577-5xexf5cr0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731791595577-5xexf5cr0',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731791595577-5xexf5cr0 { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731791595577-5xexf5cr0 { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731791595577-5xexf5cr0 { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-16T21:13:28.784Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 78.7527ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 78.7527ms"}}
[debug] [2024-11-16T21:13:28.785Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE"}}
[debug] [2024-11-16T21:13:28.785Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:28.785Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:28.785Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-16T21:13:15.564Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-16T21:13:28.788Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 13219.6511ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 13219.6511ms"}}
[debug] [2024-11-16T21:13:28.788Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-16T21:13:28.788Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:28.788Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:28.788Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:28.792Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:28.792Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:28.792Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:28.792Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:28.792Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:13:28.794Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:28.794Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:28.794Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:13:28.795Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T21:13:28.797Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 2.1435ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 2.1435ms"}}
[debug] [2024-11-16T21:13:28.797Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:13:28.797Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:28.797Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:28.798Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:28.798Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:28.798Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:28.798Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:28.798Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:28.798Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:13:28.801Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:28.801Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:28.801Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:13:28.801Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' } {"user":"  data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-16T21:13:28.816Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:28.816Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:28.798Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:28.817Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:28.798Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:28.816Z"],"workRunningCount":2}
[debug] [2024-11-16T21:13:28.817Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T21:13:28.819Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:28.819Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:28.819Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T21:13:28.820Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-16T21:13:28.757Z', {"user":"  createdAt: '2024-11-16T21:13:28.757Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-16T21:13:28.757Z',"}}
[info] >    lastUpdated: '2024-11-16T21:13:28.757Z', {"user":"  lastUpdated: '2024-11-16T21:13:28.757Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-16T21:13:28.757Z',"}}
[info] >    chatId: 'chat-1731791595577-5xexf5cr0', {"user":"  chatId: 'chat-1731791595577-5xexf5cr0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731791595577-5xexf5cr0',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello I Have a Girlfriend named Moly', {"user":"      content: 'Hello I Have a Girlfriend named Moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello I Have a Girlfriend named Moly',"}}
[info] >        timestamp: '2024-11-16T21:13:28.684Z' {"user":"      timestamp: '2024-11-16T21:13:28.684Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T21:13:28.684Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\n" + {"user":"      content: \"That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\n" + {"user":"        \"* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\\n\" +"}}
[info] >          '* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\n' + {"user":"        '* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\\n' +"}}
[info] >          "* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\n" + {"user":"        \"* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\\n\" +"}}
[info] >          '* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\n' + {"user":"        '* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\\n' +"}}
[info] >          '* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\n' + {"user":"        '* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\n", {"user":"        \"The more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\\n\","}}
[info] >        timestamp: '2024-11-16T21:13:28.684Z' {"user":"      timestamp: '2024-11-16T21:13:28.684Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T21:13:28.684Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-16T21:13:28.838Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 36.6264ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 36.6264ms"}}
[debug] [2024-11-16T21:13:28.838Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:13:28.838Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:28.838Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:28.839Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:28.816Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:28.839Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 19.9177ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 19.9177ms"}}
[debug] [2024-11-16T21:13:28.840Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T21:13:28.840Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:28.841Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:28.841Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:28.842Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:28.842Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:28.843Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:28.842Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:28.843Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T21:13:28.845Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:28.845Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:28.845Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T21:13:28.845Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', token: [Object] }, {"user":"    auth: { uid: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"      userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >        chatId: 'chat-1731791595577-5xexf5cr0' {"user":"      chatId: 'chat-1731791595577-5xexf5cr0'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731791595577-5xexf5cr0'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-16T21:13:28.883Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 37.1491ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 37.1491ms"}}
[debug] [2024-11-16T21:13:28.884Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T21:13:28.884Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:28.884Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:28.884Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:54.208Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:54.208Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:54.209Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:54.208Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:54.209Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:13:54.214Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:54.215Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:54.215Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:13:54.216Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T21:13:54.218Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:54.218Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:54.208Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:54.218Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:54.208Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:54.218Z"],"workRunningCount":2}
[debug] [2024-11-16T21:13:54.219Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T21:13:54.223Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:54.224Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:54.224Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T21:13:54.225Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-16T21:13:54.228Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 12.2757ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 12.2757ms"}}
[debug] [2024-11-16T21:13:54.229Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:13:54.229Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:54.229Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:54.229Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:54.218Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:54.230Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 5.146ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 5.146ms"}}
[debug] [2024-11-16T21:13:54.231Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T21:13:54.231Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:54.231Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:54.231Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:54.233Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:54.233Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:13:54.233Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:54.233Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:54.233Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:13:54.236Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:54.236Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:54.236Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:13:54.237Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T21:13:54.238Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:54.238Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:54.233Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:54.238Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:13:54.233Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:54.238Z"],"workRunningCount":2}
[debug] [2024-11-16T21:13:54.238Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-16T21:13:54.241Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:13:54.241Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-16T21:13:54.241Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-16T21:13:54.247Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' } {"user":"  data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 4e 38 55 6e 56 55 4d 30 67 56 75 34 44 32 53 53 68 32 6d 76 74 53 70 67 67 4e 56 70 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', token: [Object] }, {"user":"    auth: { uid: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', token: [Object] },"}}
[info] >      data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', chatId: 'default-chat' } {"user":"    data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-16T21:13:28.757Z', {"user":"  createdAt: '2024-11-16T21:13:28.757Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-16T21:13:28.757Z',"}}
[info] >    lastUpdated: '2024-11-16T21:13:28.757Z', {"user":"  lastUpdated: '2024-11-16T21:13:28.757Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-16T21:13:28.757Z',"}}
[info] >    chatId: 'chat-1731791595577-5xexf5cr0', {"user":"  chatId: 'chat-1731791595577-5xexf5cr0',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731791595577-5xexf5cr0',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello I Have a Girlfriend named Moly', {"user":"      content: 'Hello I Have a Girlfriend named Moly',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello I Have a Girlfriend named Moly',"}}
[info] >        timestamp: '2024-11-16T21:13:28.684Z' {"user":"      timestamp: '2024-11-16T21:13:28.684Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T21:13:28.684Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\n" + {"user":"      content: \"That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"That's wonderful!  To help me understand your relationship with Moly and offer helpful advice, tell me more.  For example:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\n" + {"user":"        \"* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **How long have you been together?**  Knowing the length of your relationship helps understand the stage you're in.\\n\" +"}}
[info] >          '* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\n' + {"user":"        '* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **What are some of your favorite things about your relationship with Moly?**  Focusing on the positives helps build appreciation.\\n' +"}}
[info] >          "* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\n" + {"user":"        \"* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **Are there any challenges you're currently facing?**  This is where I can offer specific strategies and support.\\n\" +"}}
[info] >          '* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\n' + {"user":"        '* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **What aspects of your relationship would you like to improve?**  Knowing your goals helps guide the conversation.\\n' +"}}
[info] >          '* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\n' + {"user":"        '* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **What are your communication styles like?**  Understanding communication dynamics is crucial for healthy relationships.\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\n", {"user":"        \"The more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you provide, the better I can assist you.  Don't hesitate to share as much or as little as you feel comfortable with.\\n\","}}
[info] >        timestamp: '2024-11-16T21:13:28.684Z' {"user":"      timestamp: '2024-11-16T21:13:28.684Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-16T21:13:28.684Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp' {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-16T21:13:54.316Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 79.8804ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 79.8804ms"}}
[debug] [2024-11-16T21:13:54.317Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:13:54.317Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:54.317Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:54.318Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-16T21:13:54.238Z"],"workRunningCount":1}
[debug] [2024-11-16T21:13:54.320Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 73.4128ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 73.4128ms"}}
[debug] [2024-11-16T21:13:54.322Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-16T21:13:54.322Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:13:54.322Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:13:54.322Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp', {"user":"  userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'N8UnVUM0gVu4D2SSh2mvtSpggNVp',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: N8UnVUM0gVu4D2SSh2mvtSpggNVp { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-16T21:14:13.399Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-16T21:14:13.399Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"eadfa5b6-501c-494c-bc7c-ce8aabe8f67c","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-16T21:14:13.399Z","data":{"uid":"bMJJm1bYpP8CuMwaLfxuMBdC72Re","email":"olive.peach.960@example.com","emailVerified":true,"displayName":"Moly","metadata":{"creationTime":"2024-11-16T21:14:13.399Z","lastSignInTime":"2024-11-16T21:14:13.399Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"5667002226489266587433220026919051211710","federatedId":"5667002226489266587433220026919051211710","displayName":"Moly","email":"olive.peach.960@example.com","screenName":"peach_olive"}]}}
[debug] [2024-11-16T21:14:13.405Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-16T21:14:13.405Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-16T21:14:13.498Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:14:13.498Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:14:13.498Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:14:13.498Z"],"workRunningCount":1}
[debug] [2024-11-16T21:14:13.498Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:14:13.502Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:14:13.502Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:14:13.502Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:14:13.503Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T21:14:13.506Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 3.1579ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 3.1579ms"}}
[debug] [2024-11-16T21:14:13.507Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:14:13.507Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:14:13.507Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:14:13.507Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:14:13.528Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:14:13.528Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:14:13.528Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:14:13.528Z"],"workRunningCount":1}
[debug] [2024-11-16T21:14:13.529Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:14:13.531Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:14:13.531Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:14:13.531Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:14:13.532Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' } {"user":"  data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-16T21:14:13.560Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 27.9954ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 27.9954ms"}}
[debug] [2024-11-16T21:14:13.560Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:14:13.560Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:14:13.560Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:14:13.560Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:14:57.016Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:14:57.016Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:14:57.017Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:14:57.016Z"],"workRunningCount":1}
[debug] [2024-11-16T21:14:57.017Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:14:57.019Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:14:57.020Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:14:57.020Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:14:57.021Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-16T21:14:57.024Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 2.6269ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 2.6269ms"}}
[debug] [2024-11-16T21:14:57.025Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:14:57.025Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:14:57.025Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:14:57.025Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:14:57.028Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:14:57.028Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-16T21:14:57.028Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-16T21:14:57.028Z"],"workRunningCount":1}
[debug] [2024-11-16T21:14:57.028Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-16T21:14:57.030Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-16T21:14:57.031Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-16T21:14:57.031Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-16T21:14:57.031Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' } {"user":"  data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-16T21:14:57.055Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 24.0036ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 24.0036ms"}}
[debug] [2024-11-16T21:14:57.056Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-16T21:14:57.056Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-16T21:14:57.056Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-16T21:14:57.056Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:35:37.762Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.760Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:35:37.768Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.760Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:37.769Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:35:37.783Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:37.785Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:35:37.786Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:35:37.790Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-17T02:35:37.793Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:37.793Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.760Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:37.793Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.760Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:37.793Z"],"workRunningCount":2}
[debug] [2024-11-17T02:35:37.794Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:35:37.798Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:37.798Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:35:37.798Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:35:37.799Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:35:37.810Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 20.3151ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 20.3151ms"}}
[debug] [2024-11-17T02:35:37.812Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:35:37.812Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:37.812Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:37.813Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:37.793Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:37.816Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:37.793Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:37.816Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:37.793Z","/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z"],"workRunningCount":2}
[debug] [2024-11-17T02:35:37.816Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:35:37.823Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:37.824Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:35:37.824Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:35:37.825Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-17T02:35:37.826Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 41.6999ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 41.6999ms"}}
[debug] [2024-11-17T02:35:37.842Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:35:37.842Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:37.842Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:37.842Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:37.844Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:37.843Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:37.844Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:37.843Z"],"workRunningCount":2}
[debug] [2024-11-17T02:35:37.844Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:35:37.847Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:37.847Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:35:37.847Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:35:37.848Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { message: 'My Name is Moly And I have a boyfriend Robert' } {"user":"  data: { message: 'My Name is Moly And I have a boyfriend Robert' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { message: 'My Name is Moly And I have a boyfriend Robert' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 45, {"user":"  messageLength: 45,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 45,"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731810937833-zyx330hdr {"user":"🆕 Creating new chat session: chat-1731810937833-zyx330hdr","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731810937833-zyx330hdr"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731810937833-zyx330hdr', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731810937833-zyx330hdr', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731810937833-zyx330hdr', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: My Name is Moly And I have a boyfriend Robert {"user":"💬 Sending message to Gemini: My Name is Moly And I have a boyfriend Robert","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: My Name is Moly And I have a boyfriend Robert"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', token: [Object] }, {"user":"    auth: { uid: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', token: [Object] },"}}
[info] >      data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', chatId: 'default-chat' } {"user":"    data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalNodes: 0, totalLinks: 0 }"}}
[debug] [2024-11-17T02:35:38.041Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 193.3503ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 193.3503ms"}}
[debug] [2024-11-17T02:35:38.042Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:35:38.043Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:38.043Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:38.043Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z"],"workRunningCount":1}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731810937833-zyx330hdr', {"user":"  chatId: 'chat-1731810937833-zyx330hdr',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810937833-zyx330hdr',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 1056, timestamp: '2024-11-17T02:35:43.552Z' } {"user":"✅ Response received: { responseLength: 1056, timestamp: '2024-11-17T02:35:43.552Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 1056, timestamp: '2024-11-17T02:35:43.552Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\n" + {"user":"  message: \"It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\\n\" +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\n' + {"user":"    '* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\n' + {"user":"    '* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\n' + {"user":"    '* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\n' + {"user":"    '* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      "The more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\n", {"user":"    \"The more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"The more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\\n\","}}
[info] >    userMessage: 'My Name is Moly And I have a boyfriend Robert', {"user":"  userMessage: 'My Name is Moly And I have a boyfriend Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'My Name is Moly And I have a boyfriend Robert',"}}
[info] >    timestamp: '2024-11-17T02:35:43.553Z', {"user":"  timestamp: '2024-11-17T02:35:43.553Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-17T02:35:43.553Z',"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    chatId: 'chat-1731810937833-zyx330hdr' {"user":"  chatId: 'chat-1731810937833-zyx330hdr'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810937833-zyx330hdr'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    chatId: 'chat-1731810937833-zyx330hdr', {"user":"  chatId: 'chat-1731810937833-zyx330hdr',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810937833-zyx330hdr',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-17T02:35:43.553Z', {"user":"  timestamp: '2024-11-17T02:35:43.553Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-17T02:35:43.553Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:35:43.580Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-17T02:35:43.580Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:43.580Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-17T02:35:43.580Z"],"workRunningCount":2}
[debug] [2024-11-17T02:35:43.580Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-17T02:35:43.584Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:43.584Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-17T02:35:43.585Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-17T02:35:43.585Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 1304 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 1304 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 1304 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"      userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >        chatId: 'chat-1731810937833-zyx330hdr', {"user":"      chatId: 'chat-1731810937833-zyx330hdr',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810937833-zyx330hdr',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    chatId: 'chat-1731810937833-zyx330hdr', {"user":"  chatId: 'chat-1731810937833-zyx330hdr',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810937833-zyx330hdr',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Found existing profile: { nodesCount: 0, linksCount: 0 } {"user":"📄 Found existing profile: { nodesCount: 0, linksCount: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Found existing profile: { nodesCount: 0, linksCount: 0 }"}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:35:50.626Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 7040.7285ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 7040.7285ms"}}
[debug] [2024-11-17T02:35:50.627Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE"}}
[debug] [2024-11-17T02:35:50.628Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:50.629Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:50.629Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [Array] } {"user":"    analysis: { nodes: [Array], links: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [Array] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "bMJJm1bYpP8CuMwaLfxuMBdC72Re", {"user":"  \"userId\": \"bMJJm1bYpP8CuMwaLfxuMBdC72Re\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"bMJJm1bYpP8CuMwaLfxuMBdC72Re\","}}
[info] >    "chatId": "chat-1731810937833-zyx330hdr", {"user":"  \"chatId\": \"chat-1731810937833-zyx330hdr\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731810937833-zyx330hdr\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "My Name is Moly And I have a boyfriend Robert", {"user":"      \"content\": \"My Name is Moly And I have a boyfriend Robert\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"My Name is Moly And I have a boyfriend Robert\","}}
[info] >        "timestamp": "2024-11-17T02:35:50.630Z" {"user":"      \"timestamp\": \"2024-11-17T02:35:50.630Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-17T02:35:50.630Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\n\n* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\n\n* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\n\n* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\n\n* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\n\nThe more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\n", {"user":"      \"content\": \"It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\\n\\n* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\\n\\n* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\\n\\n* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\\n\\n* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\\n\\nThe more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\\n\\n* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\\n\\n* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\\n\\n* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\\n\\n* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\\n\\nThe more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\\n\","}}
[info] >        "timestamp": "2024-11-17T02:35:50.630Z" {"user":"      \"timestamp\": \"2024-11-17T02:35:50.630Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-17T02:35:50.630Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-17T02:35:50.630Z", {"user":"  \"timestamp\": \"2024-11-17T02:35:50.630Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-17T02:35:50.630Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "bMJJm1bYpP8CuMwaLfxuMBdC72Re", {"user":"    \"uid\": \"bMJJm1bYpP8CuMwaLfxuMBdC72Re\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"bMJJm1bYpP8CuMwaLfxuMBdC72Re\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:35:50.674Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-17T02:35:50.674Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:50.674Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-17T02:35:50.674Z"],"workRunningCount":2}
[debug] [2024-11-17T02:35:50.675Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-17T02:35:50.678Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:50.678Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:35:50.678Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-17T02:35:50.679Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 1343 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 1343 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 1343 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"      userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >        chatId: 'chat-1731810937833-zyx330hdr', {"user":"      chatId: 'chat-1731810937833-zyx330hdr',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810937833-zyx330hdr',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-17T02:35:50.630Z' {"user":"      timestamp: '2024-11-17T02:35:50.630Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:35:50.630Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    chatId: 'chat-1731810937833-zyx330hdr', {"user":"  chatId: 'chat-1731810937833-zyx330hdr',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810937833-zyx330hdr',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731810937833-zyx330hdr { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731810937833-zyx330hdr { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731810937833-zyx330hdr { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-17T02:35:50.789Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 110.0511ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 110.0511ms"}}
[debug] [2024-11-17T02:35:50.790Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE"}}
[debug] [2024-11-17T02:35:50.790Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:50.790Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:50.791Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:35:37.816Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:35:50.797Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 12972.3894ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 12972.3894ms"}}
[debug] [2024-11-17T02:35:50.798Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:35:50.798Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:50.798Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:50.798Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:35:50.804Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.804Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:35:50.804Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.804Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:50.805Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:35:50.808Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:50.808Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:35:50.808Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:35:50.810Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:35:50.827Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 17.9303ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 17.9303ms"}}
[debug] [2024-11-17T02:35:50.828Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:35:50.829Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:50.829Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:50.829Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:35:50.830Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.830Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:35:50.830Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.830Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:50.830Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:35:50.834Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:50.834Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:35:50.834Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:35:50.835Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' } {"user":"  data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:35:50.853Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:50.853Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.830Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:50.853Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.830Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:50.853Z"],"workRunningCount":2}
[debug] [2024-11-17T02:35:50.853Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:35:50.857Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:50.857Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:35:50.857Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:35:50.859Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:35:50.868Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 9.7465ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 9.7465ms"}}
[debug] [2024-11-17T02:35:50.869Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:35:50.870Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:50.870Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:50.870Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.830Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:50.871Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:50.871Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.830Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:50.871Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.830Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:35:50.871Z"],"workRunningCount":2}
[debug] [2024-11-17T02:35:50.871Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:35:50.874Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:35:50.874Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:35:50.875Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:35:50.875Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', token: [Object] }, {"user":"    auth: { uid: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"      userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >        chatId: 'chat-1731810937833-zyx330hdr' {"user":"      chatId: 'chat-1731810937833-zyx330hdr'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810937833-zyx330hdr'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:35:50.751Z', {"user":"  createdAt: '2024-11-17T02:35:50.751Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:35:50.751Z',"}}
[info] >    lastUpdated: '2024-11-17T02:35:50.751Z', {"user":"  lastUpdated: '2024-11-17T02:35:50.751Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:35:50.751Z',"}}
[info] >    chatId: 'chat-1731810937833-zyx330hdr', {"user":"  chatId: 'chat-1731810937833-zyx330hdr',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810937833-zyx330hdr',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'My Name is Moly And I have a boyfriend Robert', {"user":"      content: 'My Name is Moly And I have a boyfriend Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'My Name is Moly And I have a boyfriend Robert',"}}
[info] >        timestamp: '2024-11-17T02:35:50.630Z' {"user":"      timestamp: '2024-11-17T02:35:50.630Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:35:50.630Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\n" + {"user":"      content: \"It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\n' + {"user":"        '* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\n' + {"user":"        '* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\n' + {"user":"        '* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\n' + {"user":"        '* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\n", {"user":"        \"The more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\\n\","}}
[info] >        timestamp: '2024-11-17T02:35:50.630Z' {"user":"      timestamp: '2024-11-17T02:35:50.630Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:35:50.630Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T02:35:50.960Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 85.2147ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 85.2147ms"}}
[debug] [2024-11-17T02:35:50.962Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:35:50.962Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:50.962Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:50.962Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:35:50.830Z"],"workRunningCount":1}
[debug] [2024-11-17T02:35:50.963Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 128.7194ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 128.7194ms"}}
[debug] [2024-11-17T02:35:50.965Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:35:50.965Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:35:50.965Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:35:50.966Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-17T02:36:02.651Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:36:02.651Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:36:02.651Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:36:02.651Z"],"workRunningCount":1}
[debug] [2024-11-17T02:36:02.651Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:36:02.654Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:36:02.654Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:36:02.655Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:36:02.656Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:36:02.658Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:36:02.658Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:36:02.651Z"],"workRunningCount":1}
[debug] [2024-11-17T02:36:02.658Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:36:02.651Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:36:02.658Z"],"workRunningCount":2}
[debug] [2024-11-17T02:36:02.658Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:36:02.662Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:36:02.662Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:36:02.662Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:36:02.663Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:36:02.666Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 10.9208ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 10.9208ms"}}
[debug] [2024-11-17T02:36:02.668Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:36:02.668Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:36:02.668Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:36:02.668Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:36:02.658Z"],"workRunningCount":1}
[debug] [2024-11-17T02:36:02.669Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 6.5462ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 6.5462ms"}}
[debug] [2024-11-17T02:36:02.670Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:36:02.670Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:36:02.670Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:36:02.670Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:36:02.671Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:36:02.671Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:36:02.671Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:36:02.671Z"],"workRunningCount":1}
[debug] [2024-11-17T02:36:02.671Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:36:02.674Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:36:02.675Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:36:02.675Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:36:02.676Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:36:02.678Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:36:02.678Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:36:02.671Z"],"workRunningCount":1}
[debug] [2024-11-17T02:36:02.678Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:36:02.671Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:36:02.678Z"],"workRunningCount":2}
[debug] [2024-11-17T02:36:02.679Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:36:02.683Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:36:02.683Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:36:02.683Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:36:02.683Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' } {"user":"  data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 62 4d 4a 4a 6d 31 62 59 70 50 38 43 75 4d 77 61 4c 66 78 75 4d 42 64 43 37 32 52 65 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', token: [Object] }, {"user":"    auth: { uid: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"      userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho' {"user":"      chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:35:50.751Z', {"user":"  createdAt: '2024-11-17T02:35:50.751Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:35:50.751Z',"}}
[info] >    lastUpdated: '2024-11-17T02:35:50.751Z', {"user":"  lastUpdated: '2024-11-17T02:35:50.751Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:35:50.751Z',"}}
[info] >    chatId: 'chat-1731810937833-zyx330hdr', {"user":"  chatId: 'chat-1731810937833-zyx330hdr',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810937833-zyx330hdr',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'My Name is Moly And I have a boyfriend Robert', {"user":"      content: 'My Name is Moly And I have a boyfriend Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'My Name is Moly And I have a boyfriend Robert',"}}
[info] >        timestamp: '2024-11-17T02:35:50.630Z' {"user":"      timestamp: '2024-11-17T02:35:50.630Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:35:50.630Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\n" + {"user":"      content: \"It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Moly.  To help me understand your relationship with Robert, I need some more information.  Thinking about your relationship with Robert, tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\n' + {"user":"        '* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good things:** What are some of the things you appreciate about Robert and your relationship? What are your favorite aspects? What makes you happy in the relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\n' + {"user":"        '* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The challenges:** Are there any areas of conflict or disagreement? What are some things that are causing stress or unhappiness?  Be as specific as possible.  (Example:  communication styles, differing expectations about the future, family issues, financial matters, intimacy levels etc.)\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\n' + {"user":"        '* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and goals for your relationship with Robert?  Where do you see yourselves in the future?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\n' + {"user":"        '* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your feelings:** How are you feeling about your relationship overall?  Are you happy, content, anxious, frustrated, or something else?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\n", {"user":"        \"The more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more detail you can provide, the better I can assist you.  Remember, there's no right or wrong answer –  honest reflection is key.\\n\","}}
[info] >        timestamp: '2024-11-17T02:35:50.630Z' {"user":"      timestamp: '2024-11-17T02:35:50.630Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:35:50.630Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re' {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T02:36:02.753Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 77.0187ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 77.0187ms"}}
[debug] [2024-11-17T02:36:02.753Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:36:02.753Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:36:02.754Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:36:02.754Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:36:02.678Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re', {"user":"  userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'bMJJm1bYpP8CuMwaLfxuMBdC72Re',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: bMJJm1bYpP8CuMwaLfxuMBdC72Re { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-17T02:36:02.762Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 78.6364ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 78.6364ms"}}
[debug] [2024-11-17T02:36:02.763Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:36:02.763Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:36:02.763Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:36:02.763Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:37:06.602Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-17T02:37:06.602Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"a48c3159-1504-4f75-9d57-16d0b01ff4de","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-17T02:37:06.601Z","data":{"uid":"5opkU7BKiJ0IQEm7MP6bT4haBZcK","email":"otter.peach.447@example.com","emailVerified":true,"displayName":"Rithipolmoly Khun","metadata":{"creationTime":"2024-11-17T02:37:06.600Z","lastSignInTime":"2024-11-17T02:37:06.600Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"7900497342178440795995455369344410232739","federatedId":"7900497342178440795995455369344410232739","displayName":"Rithipolmoly Khun","email":"otter.peach.447@example.com","screenName":"peach_otter"}]}}
[debug] [2024-11-17T02:37:06.609Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-17T02:37:06.609Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-17T02:37:06.748Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:37:06.747Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:37:06.748Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:37:06.747Z"],"workRunningCount":1}
[debug] [2024-11-17T02:37:06.748Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:37:06.753Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:37:06.753Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:37:06.753Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:37:06.754Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:37:06.758Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 3.8642ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 3.8642ms"}}
[debug] [2024-11-17T02:37:06.759Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:37:06.759Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:37:06.759Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:37:06.759Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:37:06.793Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:37:06.793Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:37:06.793Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:37:06.793Z"],"workRunningCount":1}
[debug] [2024-11-17T02:37:06.793Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:37:06.797Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:37:06.797Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:37:06.797Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:37:06.798Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' } {"user":"  data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-17T02:37:06.837Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 38.6522ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 38.6522ms"}}
[debug] [2024-11-17T02:37:06.837Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:37:06.838Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:37:06.838Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:37:06.838Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:00.866Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:00.866Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:00.867Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:00.866Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:00.867Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:38:00.871Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:00.872Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:38:00.872Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:38:00.873Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:38:00.874Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.874Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:00.866Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:00.874Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:00.866Z","/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.874Z"],"workRunningCount":2}
[debug] [2024-11-17T02:38:00.874Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:38:00.878Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:00.878Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:38:00.878Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:38:00.879Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-17T02:38:00.885Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 12.0893ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 12.0893ms"}}
[debug] [2024-11-17T02:38:00.886Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:38:00.886Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:00.886Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:00.886Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.874Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:00.887Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 7.7361ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 7.7361ms"}}
[debug] [2024-11-17T02:38:00.888Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:38:00.888Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:00.888Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:00.888Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:00.889Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:00.889Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:00.889Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:00.889Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:00.889Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:38:00.893Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:00.893Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:38:00.893Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:38:00.894Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:38:00.897Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.897Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:00.889Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:00.897Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:00.889Z","/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.897Z"],"workRunningCount":2}
[debug] [2024-11-17T02:38:00.897Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:38:00.901Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:00.902Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:38:00.902Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:38:00.903Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho' {"user":"      chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"    message: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >      chatId: 'chat-1731810962643-3dy3qdyho' {"user":"    chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731810962643-3dy3qdyho {"user":"📝 Using chat ID: chat-1731810962643-3dy3qdyho","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731810962643-3dy3qdyho"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 65, {"user":"  messageLength: 65,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 65,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731810962643-3dy3qdyho {"user":"🆕 Creating new chat session: chat-1731810962643-3dy3qdyho","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731810962643-3dy3qdyho"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731810962643-3dy3qdyho', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731810962643-3dy3qdyho', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731810962643-3dy3qdyho', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: Hello my name is Rithipolmoly and i have a boyfriend named Robert {"user":"💬 Sending message to Gemini: Hello my name is Rithipolmoly and i have a boyfriend named Robert","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: Hello my name is Rithipolmoly and i have a boyfriend named Robert"}}
[debug] [2024-11-17T02:38:00.961Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 67.0651ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 67.0651ms"}}
[debug] [2024-11-17T02:38:00.962Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:38:00.962Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:00.963Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:00.963Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.897Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 0, totalLinks: 0 }"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 1054, timestamp: '2024-11-17T02:38:06.088Z' } {"user":"✅ Response received: { responseLength: 1054, timestamp: '2024-11-17T02:38:06.088Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 1054, timestamp: '2024-11-17T02:38:06.088Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"  message: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      '* **The length of your relationship:** How long have you been together?\n' + {"user":"    '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >      '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"    '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >      "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"    \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >      '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"    '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >      '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"    '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"    \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >    userMessage: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"  userMessage: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >    timestamp: '2024-11-17T02:38:06.088Z', {"user":"  timestamp: '2024-11-17T02:38:06.088Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-17T02:38:06.088Z',"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-17T02:38:06.088Z', {"user":"  timestamp: '2024-11-17T02:38:06.088Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-17T02:38:06.088Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:38:06.114Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-17T02:38:06.114Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.897Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:06.115Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.897Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-17T02:38:06.114Z"],"workRunningCount":2}
[debug] [2024-11-17T02:38:06.115Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-17T02:38:06.116Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:06.116Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-17T02:38:06.117Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-17T02:38:06.117Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 1318 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 1318 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 1318 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho', {"user":"      chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Found existing profile: { nodesCount: 0, linksCount: 0 } {"user":"📄 Found existing profile: { nodesCount: 0, linksCount: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Found existing profile: { nodesCount: 0, linksCount: 0 }"}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:38:16.720Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 10603.2525ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 10603.2525ms"}}
[debug] [2024-11-17T02:38:16.722Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE"}}
[debug] [2024-11-17T02:38:16.722Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:16.722Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:16.722Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.897Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { {"user":"    analysis: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: {"}}
[info] >        nodes: [Array], {"user":"      nodes: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       nodes: [Array],"}}
[info] >        links: [Array], {"user":"      links: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       links: [Array],"}}
[info] >        metadata: [Object], {"user":"      metadata: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       metadata: [Object],"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "5opkU7BKiJ0IQEm7MP6bT4haBZcK", {"user":"  \"userId\": \"5opkU7BKiJ0IQEm7MP6bT4haBZcK\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"5opkU7BKiJ0IQEm7MP6bT4haBZcK\","}}
[info] >    "chatId": "chat-1731810962643-3dy3qdyho", {"user":"  \"chatId\": \"chat-1731810962643-3dy3qdyho\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731810962643-3dy3qdyho\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "Hello my name is Rithipolmoly and i have a boyfriend named Robert", {"user":"      \"content\": \"Hello my name is Rithipolmoly and i have a boyfriend named Robert\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Hello my name is Rithipolmoly and i have a boyfriend named Robert\","}}
[info] >        "timestamp": "2024-11-17T02:38:16.723Z" {"user":"      \"timestamp\": \"2024-11-17T02:38:16.723Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-17T02:38:16.723Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n\n* **The length of your relationship:** How long have you been together?\n* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n\nThe more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"      \"content\": \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\\n* **The length of your relationship:** How long have you been together?\\n* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n\\nThe more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\\n* **The length of your relationship:** How long have you been together?\\n* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n\\nThe more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        "timestamp": "2024-11-17T02:38:16.723Z" {"user":"      \"timestamp\": \"2024-11-17T02:38:16.723Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-17T02:38:16.723Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-17T02:38:16.723Z", {"user":"  \"timestamp\": \"2024-11-17T02:38:16.723Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-17T02:38:16.723Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "5opkU7BKiJ0IQEm7MP6bT4haBZcK", {"user":"    \"uid\": \"5opkU7BKiJ0IQEm7MP6bT4haBZcK\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"5opkU7BKiJ0IQEm7MP6bT4haBZcK\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:38:16.780Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-17T02:38:16.780Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.897Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:16.780Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.897Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-17T02:38:16.780Z"],"workRunningCount":2}
[debug] [2024-11-17T02:38:16.781Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-17T02:38:16.784Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:16.785Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:38:16.785Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-17T02:38:16.786Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 1357 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 1357 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 1357 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho', {"user":"      chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731810962643-3dy3qdyho { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731810962643-3dy3qdyho { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731810962643-3dy3qdyho { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-17T02:38:16.849Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 63.6047ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 63.6047ms"}}
[debug] [2024-11-17T02:38:16.851Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE"}}
[debug] [2024-11-17T02:38:16.851Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:16.851Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:16.851Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:00.897Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:38:16.856Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 15952.6708ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 15952.6708ms"}}
[debug] [2024-11-17T02:38:16.857Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:38:16.857Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:16.857Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:16.857Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:16.864Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:38:16.864Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:16.864Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:38:16.864Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:16.864Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:38:16.869Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:16.869Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:38:16.869Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:38:16.870Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:38:16.876Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 6.1398ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 6.1398ms"}}
[debug] [2024-11-17T02:38:16.877Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:38:16.877Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:16.878Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:16.878Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:16.879Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:38:16.879Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:16.880Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:38:16.879Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:16.880Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:38:16.883Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:16.884Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:38:16.884Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:38:16.885Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' } {"user":"  data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-17T02:38:16.898Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:16.898Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:38:16.879Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:16.898Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:38:16.879Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:16.898Z"],"workRunningCount":2}
[debug] [2024-11-17T02:38:16.898Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:38:16.902Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:16.902Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:38:16.903Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:38:16.904Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:38:16.910Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 6.1264ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 6.1264ms"}}
[debug] [2024-11-17T02:38:16.911Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:38:16.911Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:16.911Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:16.911Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:38:16.879Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:16.912Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:16.912Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:38:16.879Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:16.912Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:38:16.879Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:16.912Z"],"workRunningCount":2}
[debug] [2024-11-17T02:38:16.912Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:38:16.917Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:16.917Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:38:16.917Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:38:16.918Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho' {"user":"      chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:38:16.979Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 94.3923ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 94.3923ms"}}
[debug] [2024-11-17T02:38:16.980Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:38:16.980Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:16.980Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:16.980Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:16.912Z"],"workRunningCount":1}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:38:16.809Z', {"user":"  createdAt: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:38:16.809Z',"}}
[info] >    lastUpdated: '2024-11-17T02:38:16.809Z', {"user":"  lastUpdated: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:38:16.809Z',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"      content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"      content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The length of your relationship:** How long have you been together?\n' + {"user":"        '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >          '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"        '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >          "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"        \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >          '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"        '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"        '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"        \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T02:38:17.013Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 95.3285ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 95.3285ms"}}
[debug] [2024-11-17T02:38:17.014Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:38:17.014Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:17.015Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:17.015Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-17T02:38:47.261Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:47.261Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:47.261Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:47.261Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:47.262Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:38:47.266Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:47.266Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:38:47.266Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:38:47.268Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:38:47.270Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:47.270Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:47.261Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:47.270Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:47.261Z","/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:47.270Z"],"workRunningCount":2}
[debug] [2024-11-17T02:38:47.270Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:38:47.274Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:47.274Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:38:47.275Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:38:47.276Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-17T02:38:47.281Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 13.2553ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 13.2553ms"}}
[debug] [2024-11-17T02:38:47.282Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:38:47.282Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:47.283Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:47.283Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:47.270Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:47.284Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 8.6562ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 8.6562ms"}}
[debug] [2024-11-17T02:38:47.285Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:38:47.286Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:47.286Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:47.286Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:47.287Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:47.287Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:47.287Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:47.287Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:47.287Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:38:47.291Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:47.291Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:38:47.291Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:38:47.292Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:38:47.296Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:47.296Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:47.287Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:47.296Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:38:47.287Z","/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:47.296Z"],"workRunningCount":2}
[debug] [2024-11-17T02:38:47.296Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:38:47.300Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:47.301Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:38:47.301Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:38:47.302Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho' {"user":"      chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'I Also have a mother who is a cook', {"user":"    message: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'I Also have a mother who is a cook',"}}
[info] >      chatId: 'chat-1731810962643-3dy3qdyho' {"user":"    chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731810962643-3dy3qdyho {"user":"📝 Using chat ID: chat-1731810962643-3dy3qdyho","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731810962643-3dy3qdyho"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 34, {"user":"  messageLength: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 34,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: I Also have a mother who is a cook {"user":"💬 Sending message to Gemini: I Also have a mother who is a cook","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: I Also have a mother who is a cook"}}
[debug] [2024-11-17T02:38:47.381Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 89.0818ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 89.0818ms"}}
[debug] [2024-11-17T02:38:47.382Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:38:47.382Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:47.383Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:47.383Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:47.296Z"],"workRunningCount":1}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }"}}
[info] >  💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}} {"user":"💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}"}}
[info] >      at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:27) {"user":"    at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      ... 6 lines matching cause stack trace ... {"user":"    ... 6 lines matching cause stack trace ...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     ... 6 lines matching cause stack trace ..."}}
[info] >      at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"    at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >    stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:38:47.524Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 222.2691ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 222.2691ms"}}
[debug] [2024-11-17T02:38:47.525Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:38:47.525Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:47.525Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:47.525Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:52.543Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:52.542Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:52.543Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:52.542Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:52.543Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:38:52.544Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:52.544Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:38:52.544Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:38:52.545Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-17T02:38:52.549Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 4.6321ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 4.6321ms"}}
[debug] [2024-11-17T02:38:52.550Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:38:52.550Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:52.551Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:52.551Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:52.553Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:52.553Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:52.554Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:52.553Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:52.554Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:38:52.555Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:52.555Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:38:52.555Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:38:52.556Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'I Also have a mother who is a cook', {"user":"    message: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'I Also have a mother who is a cook',"}}
[info] >      chatId: 'chat-1731810962643-3dy3qdyho' {"user":"    chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731810962643-3dy3qdyho {"user":"📝 Using chat ID: chat-1731810962643-3dy3qdyho","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731810962643-3dy3qdyho"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 34, {"user":"  messageLength: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 34,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: I Also have a mother who is a cook {"user":"💬 Sending message to Gemini: I Also have a mother who is a cook","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: I Also have a mother who is a cook"}}
[info] >  💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}} {"user":"💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}"}}
[info] >      at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:27) {"user":"    at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      ... 6 lines matching cause stack trace ... {"user":"    ... 6 lines matching cause stack trace ...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     ... 6 lines matching cause stack trace ..."}}
[info] >      at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"    at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >    stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:38:52.863Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 307.0041ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 307.0041ms"}}
[debug] [2024-11-17T02:38:52.864Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:38:52.864Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:52.864Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:52.864Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:57.872Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:57.872Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:57.873Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:57.872Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:57.873Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:38:57.876Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:57.876Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:38:57.876Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:38:57.877Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-17T02:38:57.880Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 3.7152ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 3.7152ms"}}
[debug] [2024-11-17T02:38:57.881Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:38:57.882Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:57.882Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:57.882Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:57.883Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:57.883Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:38:57.883Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:38:57.883Z"],"workRunningCount":1}
[debug] [2024-11-17T02:38:57.883Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:38:57.885Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:38:57.885Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:38:57.885Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:38:57.886Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'I Also have a mother who is a cook', {"user":"    message: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'I Also have a mother who is a cook',"}}
[info] >      chatId: 'chat-1731810962643-3dy3qdyho' {"user":"    chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731810962643-3dy3qdyho {"user":"📝 Using chat ID: chat-1731810962643-3dy3qdyho","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731810962643-3dy3qdyho"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 34, {"user":"  messageLength: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 34,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: I Also have a mother who is a cook {"user":"💬 Sending message to Gemini: I Also have a mother who is a cook","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: I Also have a mother who is a cook"}}
[info] >  💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}} {"user":"💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}"}}
[info] >      at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:27) {"user":"    at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      ... 6 lines matching cause stack trace ... {"user":"    ... 6 lines matching cause stack trace ...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     ... 6 lines matching cause stack trace ..."}}
[info] >      at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"    at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >    stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:38:58.201Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 314.8996ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 314.8996ms"}}
[debug] [2024-11-17T02:38:58.202Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:38:58.202Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:38:58.202Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:38:58.202Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:39:03.214Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:39:03.214Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:39:03.215Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:39:03.214Z"],"workRunningCount":1}
[debug] [2024-11-17T02:39:03.215Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:39:03.219Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:39:03.219Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:39:03.219Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:39:03.220Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-17T02:39:03.223Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 3.1478ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 3.1478ms"}}
[debug] [2024-11-17T02:39:03.223Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:39:03.224Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:39:03.224Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:39:03.224Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:39:03.226Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:39:03.226Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:39:03.227Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:39:03.226Z"],"workRunningCount":1}
[debug] [2024-11-17T02:39:03.227Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:39:03.231Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:39:03.231Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:39:03.231Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:39:03.232Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'I Also have a mother who is a cook', {"user":"    message: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'I Also have a mother who is a cook',"}}
[info] >      chatId: 'chat-1731810962643-3dy3qdyho' {"user":"    chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731810962643-3dy3qdyho {"user":"📝 Using chat ID: chat-1731810962643-3dy3qdyho","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731810962643-3dy3qdyho"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 34, {"user":"  messageLength: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 34,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: I Also have a mother who is a cook {"user":"💬 Sending message to Gemini: I Also have a mother who is a cook","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: I Also have a mother who is a cook"}}
[info] >  💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {"error":{"code":429,"message":"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","status":"RESOURCE_EXHAUSTED"}} {"user":"💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💥 Chat processing error: ClientError: [VertexAI.ClientError]: got status: 429 Too Many Requests. {\"error\":{\"code\":429,\"message\":\"Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.\",\"status\":\"RESOURCE_EXHAUSTED\"}}"}}
[info] >      at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:27) {"user":"    at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:27)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >      ... 6 lines matching cause stack trace ... {"user":"    ... 6 lines matching cause stack trace ...","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     ... 6 lines matching cause stack trace ..."}}
[info] >      at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"    at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >    stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   stackTrace: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff. {"user":"  [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   [cause]: GoogleApiError: Online prediction request quota exceeded for gemini-1.5-flash. Please try again later with backoff."}}
[info] >        at throwErrorIfNotOK (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\post_fetch_processing.js:32:66) {"user":"      at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at throwErrorIfNotOK (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\post_fetch_processing.js:32:66)"}}
[info] >        at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[info] >        at async generateContent (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\functions\generate_content.js:58:5) {"user":"      at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async generateContent (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\functions\\generate_content.js:58:5)"}}
[info] >        at async ChatSessionPreview.sendMessage (C:\Users\Rob\Apps\not-alone\functions\node_modules\@google-cloud\vertexai\build\src\models\chat_session.js:241:39) {"user":"      at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async ChatSessionPreview.sendMessage (C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\@google-cloud\\vertexai\\build\\src\\models\\chat_session.js:241:39)"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\lib\index.js:151:24 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js:151:24"}}
[info] >        at async C:\Users\Rob\Apps\not-alone\functions\node_modules\firebase-functions\lib\common\providers\https.js:467:26 {"user":"      at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\common\\providers\\https.js:467:26"}}
[info] >        at async runFunction (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:506:9) {"user":"      at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runFunction (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:506:9)"}}
[info] >        at async runHTTPS (C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:531:5) {"user":"      at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async runHTTPS (C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:531:5)"}}
[info] >        at async C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\emulator\functionsEmulatorRuntime.js:694:21 { {"user":"      at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       at async C:\\Users\\Rob\\AppData\\Roaming\\npm\\node_modules\\firebase-tools\\lib\\emulator\\functionsEmulatorRuntime.js:694:21 {"}}
[info] >      code: 429, {"user":"    code: 429,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 429,"}}
[info] >      status: 'RESOURCE_EXHAUSTED', {"user":"    status: 'RESOURCE_EXHAUSTED',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     status: 'RESOURCE_EXHAUSTED',"}}
[info] >      errorDetails: undefined {"user":"    errorDetails: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     errorDetails: undefined"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:39:03.635Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 403.27ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 403.27ms"}}
[debug] [2024-11-17T02:39:03.636Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:39:03.636Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:39:03.636Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:39:03.636Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:39:15.918Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:39:15.918Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:39:15.919Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:39:15.918Z"],"workRunningCount":1}
[debug] [2024-11-17T02:39:15.919Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:39:15.923Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:39:15.924Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:39:15.924Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:39:15.925Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:39:15.929Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 4.3235ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 4.3235ms"}}
[debug] [2024-11-17T02:39:15.931Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:39:15.931Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:39:15.931Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:39:15.931Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:39:15.934Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:39:15.933Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:39:15.934Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:39:15.933Z"],"workRunningCount":1}
[debug] [2024-11-17T02:39:15.934Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:39:15.937Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:39:15.937Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:39:15.937Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:39:15.938Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:39:15.940Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:39:15.940Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:39:15.933Z"],"workRunningCount":1}
[debug] [2024-11-17T02:39:15.941Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:39:15.933Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:39:15.940Z"],"workRunningCount":2}
[debug] [2024-11-17T02:39:15.941Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:39:15.945Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:39:15.945Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:39:15.945Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:39:15.946Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:39:15.951Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 12.9335ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 12.9335ms"}}
[debug] [2024-11-17T02:39:15.952Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:39:15.952Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:39:15.953Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:39:15.953Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:39:15.940Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' } {"user":"  data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:39:15.959Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:39:15.959Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:39:15.940Z"],"workRunningCount":1}
[debug] [2024-11-17T02:39:15.959Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:39:15.940Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:39:15.959Z"],"workRunningCount":2}
[debug] [2024-11-17T02:39:15.959Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:39:15.962Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:39:15.963Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:39:15.963Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:39:15.964Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731811155905-u2tupgjvl' {"user":"      chatId: 'chat-1731811155905-u2tupgjvl'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731811155905-u2tupgjvl'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:38:16.809Z', {"user":"  createdAt: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:38:16.809Z',"}}
[info] >    lastUpdated: '2024-11-17T02:38:16.809Z', {"user":"  lastUpdated: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:38:16.809Z',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"      content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"      content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The length of your relationship:** How long have you been together?\n' + {"user":"        '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >          '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"        '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >          "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"        \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >          '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"        '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"        '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"        \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T02:39:16.041Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 94.9385ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 94.9385ms"}}
[debug] [2024-11-17T02:39:16.042Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:39:16.042Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:39:16.042Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:39:16.042Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:39:15.959Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }"}}
[debug] [2024-11-17T02:39:16.050Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 86.5482ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 86.5482ms"}}
[debug] [2024-11-17T02:39:16.051Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:39:16.051Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:39:16.052Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:39:16.052Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:21.678Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:21.678Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:21.678Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:21.678Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:21.678Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:41:21.683Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:21.683Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:21.683Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:41:21.684Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:41:21.686Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:21.686Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:21.678Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:21.686Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:21.678Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:21.686Z"],"workRunningCount":2}
[debug] [2024-11-17T02:41:21.686Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:41:21.690Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:21.690Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:21.690Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:41:21.691Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:41:21.692Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 8.6036ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 8.6036ms"}}
[debug] [2024-11-17T02:41:21.693Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:41:21.694Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:21.694Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:21.694Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:21.686Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:21.697Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 6.1982ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 6.1982ms"}}
[debug] [2024-11-17T02:41:21.698Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:41:21.698Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:21.698Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:21.698Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:21.699Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:21.699Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:21.699Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:21.699Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:21.699Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:41:21.703Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:21.704Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:21.704Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:41:21.704Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:41:21.706Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:21.706Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:21.699Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:21.706Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:21.699Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:21.706Z"],"workRunningCount":2}
[debug] [2024-11-17T02:41:21.706Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:41:21.709Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:21.709Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:21.709Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:41:21.710Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >      chatId: 'chat-1731810962643-3dy3qdyho' {"user":"    chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho' {"user":"      chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[debug] [2024-11-17T02:41:21.762Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 52.6733ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 52.6733ms"}}
[debug] [2024-11-17T02:41:21.764Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:41:21.764Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:21.765Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:21.765Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:21.699Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:41:21.786Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 82.1466ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 82.1466ms"}}
[debug] [2024-11-17T02:41:21.787Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:41:21.787Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:21.788Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:21.788Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:38:16.809Z', {"user":"  createdAt: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:38:16.809Z',"}}
[info] >    lastUpdated: '2024-11-17T02:38:16.809Z', {"user":"  lastUpdated: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:38:16.809Z',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"      content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"      content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The length of your relationship:** How long have you been together?\n' + {"user":"        '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >          '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"        '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >          "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"        \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >          '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"        '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"        '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"        \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'chat-1731810962643-3dy3qdyho' } {"user":"✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'chat-1731810962643-3dy3qdyho' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'chat-1731810962643-3dy3qdyho' }"}}
[debug] [2024-11-17T02:41:31.584Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:31.584Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:31.584Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:31.584Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:31.584Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:41:31.586Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:31.587Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:31.587Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:41:31.587Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:41:31.589Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.589Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:31.584Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:31.589Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:31.584Z","/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.589Z"],"workRunningCount":2}
[debug] [2024-11-17T02:41:31.589Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:41:31.593Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:31.593Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:41:31.593Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:41:31.594Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[debug] [2024-11-17T02:41:31.599Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 11.4641ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 11.4641ms"}}
[debug] [2024-11-17T02:41:31.600Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:41:31.600Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:31.600Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:31.600Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.589Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:31.602Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 8.0397ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 8.0397ms"}}
[debug] [2024-11-17T02:41:31.603Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:41:31.603Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:31.603Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:31.603Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:31.603Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:31.603Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:31.604Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:31.603Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:31.604Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:41:31.606Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:31.607Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:31.607Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:41:31.607Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:41:31.610Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.610Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:31.603Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:31.610Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:31.603Z","/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.610Z"],"workRunningCount":2}
[debug] [2024-11-17T02:41:31.610Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T02:41:31.614Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:31.614Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T02:41:31.614Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T02:41:31.615Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho' {"user":"      chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      message: 'I Also have a mother who is a cook', {"user":"    message: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'I Also have a mother who is a cook',"}}
[info] >      chatId: 'chat-1731810962643-3dy3qdyho' {"user":"    chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731810962643-3dy3qdyho {"user":"📝 Using chat ID: chat-1731810962643-3dy3qdyho","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731810962643-3dy3qdyho"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 34, {"user":"  messageLength: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 34,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: I Also have a mother who is a cook {"user":"💬 Sending message to Gemini: I Also have a mother who is a cook","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: I Also have a mother who is a cook"}}
[debug] [2024-11-17T02:41:31.667Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 59.487ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 59.487ms"}}
[debug] [2024-11-17T02:41:31.668Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:41:31.668Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:31.669Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:31.669Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.610Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 2, {"user":"  nodesCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 2,"}}
[info] >    linksCount: 1 {"user":"  linksCount: 1","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 1"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 2, totalLinks: 1 }"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    historyLength: 12, {"user":"  historyLength: 12,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 12,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 567, timestamp: '2024-11-17T02:41:34.995Z' } {"user":"✅ Response received: { responseLength: 567, timestamp: '2024-11-17T02:41:34.995Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 567, timestamp: '2024-11-17T02:41:34.995Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\n" + {"user":"  message: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +"}}
[info] >      '\n' + {"user":"    '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     '\\n' +"}}
[info] >      "To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\n", {"user":"    \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\","}}
[info] >    userMessage: 'I Also have a mother who is a cook', {"user":"  userMessage: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'I Also have a mother who is a cook',"}}
[info] >    timestamp: '2024-11-17T02:41:34.995Z', {"user":"  timestamp: '2024-11-17T02:41:34.995Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-17T02:41:34.995Z',"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-17T02:41:34.996Z', {"user":"  timestamp: '2024-11-17T02:41:34.996Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-17T02:41:34.996Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:41:35.018Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-17T02:41:35.018Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.610Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:35.018Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.610Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-17T02:41:35.018Z"],"workRunningCount":2}
[debug] [2024-11-17T02:41:35.018Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-17T02:41:35.019Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:35.020Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-17T02:41:35.020Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-17T02:41:35.021Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 794 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 794 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 794 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho', {"user":"      chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Found existing profile: { nodesCount: 2, linksCount: 1 } {"user":"📄 Found existing profile: { nodesCount: 2, linksCount: 1 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Found existing profile: { nodesCount: 2, linksCount: 1 }"}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 3, {"user":"  nodesCount: 3,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 3,"}}
[info] >    linksCount: 2 {"user":"  linksCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:41:46.009Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 10988.67ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 10988.67ms"}}
[debug] [2024-11-17T02:41:46.010Z] [worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-5dd89bd2-027a-455b-b16f-ceac21bff45f]: IDLE"}}
[debug] [2024-11-17T02:41:46.010Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:46.010Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:46.010Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.610Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [Array] } {"user":"    analysis: { nodes: [Array], links: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [Array] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "5opkU7BKiJ0IQEm7MP6bT4haBZcK", {"user":"  \"userId\": \"5opkU7BKiJ0IQEm7MP6bT4haBZcK\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"5opkU7BKiJ0IQEm7MP6bT4haBZcK\","}}
[info] >    "chatId": "chat-1731810962643-3dy3qdyho", {"user":"  \"chatId\": \"chat-1731810962643-3dy3qdyho\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731810962643-3dy3qdyho\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "I Also have a mother who is a cook", {"user":"      \"content\": \"I Also have a mother who is a cook\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"I Also have a mother who is a cook\","}}
[info] >        "timestamp": "2024-11-17T02:41:46.012Z" {"user":"      \"timestamp\": \"2024-11-17T02:41:46.012Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-17T02:41:46.012Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\n\nTo best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\n", {"user":"      \"content\": \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\\nTo best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\\nTo best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\","}}
[info] >        "timestamp": "2024-11-17T02:41:46.012Z" {"user":"      \"timestamp\": \"2024-11-17T02:41:46.012Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-17T02:41:46.012Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-17T02:41:46.012Z", {"user":"  \"timestamp\": \"2024-11-17T02:41:46.012Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-17T02:41:46.012Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "5opkU7BKiJ0IQEm7MP6bT4haBZcK", {"user":"    \"uid\": \"5opkU7BKiJ0IQEm7MP6bT4haBZcK\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"5opkU7BKiJ0IQEm7MP6bT4haBZcK\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:41:46.064Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-17T02:41:46.064Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.610Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:46.064Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.610Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-17T02:41:46.064Z"],"workRunningCount":2}
[debug] [2024-11-17T02:41:46.064Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-17T02:41:46.069Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:46.069Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:46.069Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-17T02:41:46.070Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 833 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 833 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 833 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho', {"user":"      chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731810962643-3dy3qdyho { totalMessageCount: 4, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731810962643-3dy3qdyho { totalMessageCount: 4, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731810962643-3dy3qdyho { totalMessageCount: 4, newMessagesAdded: 2 }"}}
[debug] [2024-11-17T02:41:46.156Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 86.3226ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 86.3226ms"}}
[debug] [2024-11-17T02:41:46.158Z] [worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-6243033f-6e68-4411-8284-c80cf620139b]: IDLE"}}
[debug] [2024-11-17T02:41:46.158Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:46.158Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:46.158Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T02:41:31.610Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 4 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 4 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 4 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:41:46.163Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 14547.9172ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 14547.9172ms"}}
[debug] [2024-11-17T02:41:46.164Z] [worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-03e03ed7-1ac1-4980-919b-2bfbf5c34519]: IDLE"}}
[debug] [2024-11-17T02:41:46.164Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:46.165Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:46.165Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:46.173Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:46.173Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:46.173Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:46.173Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:46.173Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:41:46.178Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:46.178Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:46.178Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:41:46.179Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:41:46.184Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 5.3119ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 5.3119ms"}}
[debug] [2024-11-17T02:41:46.186Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:41:46.186Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:46.186Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:46.186Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:46.187Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:46.187Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:46.187Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:41:46.187Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:46.187Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:41:46.192Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:46.192Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:46.192Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:41:46.194Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' } {"user":"  data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:41:46.225Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 31.5139ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 31.5139ms"}}
[debug] [2024-11-17T02:41:46.227Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:41:46.228Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:46.228Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:46.228Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:38:16.809Z', {"user":"  createdAt: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:38:16.809Z',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    lastUpdated: '2024-11-17T02:41:46.117Z', {"user":"  lastUpdated: '2024-11-17T02:41:46.117Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:41:46.117Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"      content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"      content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The length of your relationship:** How long have you been together?\n' + {"user":"        '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >          '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"        '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >          "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"        \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >          '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"        '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"        '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"        \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'I Also have a mother who is a cook', {"user":"      content: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'I Also have a mother who is a cook',"}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\n" + {"user":"      content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\n", {"user":"        \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\","}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T02:41:46.264Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:46.264Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:46.264Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:46.264Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:46.264Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:41:46.267Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:46.268Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:46.268Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:41:46.270Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:41:46.275Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 5.9698ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 5.9698ms"}}
[debug] [2024-11-17T02:41:46.276Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:41:46.277Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:46.277Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:46.277Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:46.279Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:46.279Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:41:46.279Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:41:46.279Z"],"workRunningCount":1}
[debug] [2024-11-17T02:41:46.279Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:41:46.284Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:41:46.284Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:41:46.284Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:41:46.285Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho' {"user":"      chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T02:41:46.336Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 51.3111ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 51.3111ms"}}
[debug] [2024-11-17T02:41:46.338Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:41:46.339Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:41:46.339Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:41:46.339Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 3, {"user":"  nodesCount: 3,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 3,"}}
[info] >    linksCount: 2 {"user":"  linksCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }"}}
[debug] [2024-11-17T02:46:25.441Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:46:25.441Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:46:25.441Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:46:25.441Z"],"workRunningCount":1}
[debug] [2024-11-17T02:46:25.441Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:46:25.446Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:46:25.446Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:46:25.446Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:46:25.447Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:46:25.448Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:46:25.448Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:46:25.441Z"],"workRunningCount":1}
[debug] [2024-11-17T02:46:25.448Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:46:25.441Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:46:25.448Z"],"workRunningCount":2}
[debug] [2024-11-17T02:46:25.449Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:46:25.451Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:46:25.451Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:46:25.451Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:46:25.452Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T02:46:25.454Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 7.1474ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 7.1474ms"}}
[debug] [2024-11-17T02:46:25.455Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:46:25.455Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:46:25.455Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:46:25.455Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:46:25.448Z"],"workRunningCount":1}
[debug] [2024-11-17T02:46:25.457Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.9993ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.9993ms"}}
[debug] [2024-11-17T02:46:25.458Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:46:25.458Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:46:25.458Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:46:25.458Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:46:25.459Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:46:25.459Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T02:46:25.459Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:46:25.459Z"],"workRunningCount":1}
[debug] [2024-11-17T02:46:25.459Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T02:46:25.462Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:46:25.462Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T02:46:25.462Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T02:46:25.463Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T02:46:25.464Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:46:25.464Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:46:25.459Z"],"workRunningCount":1}
[debug] [2024-11-17T02:46:25.465Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T02:46:25.459Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:46:25.464Z"],"workRunningCount":2}
[debug] [2024-11-17T02:46:25.465Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T02:46:25.469Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T02:46:25.469Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T02:46:25.469Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T02:46:25.470Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' } {"user":"  data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731811585434-u59ox0hdx' {"user":"      chatId: 'chat-1731811585434-u59ox0hdx'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731811585434-u59ox0hdx'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:38:16.809Z', {"user":"  createdAt: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:38:16.809Z',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    lastUpdated: '2024-11-17T02:41:46.117Z', {"user":"  lastUpdated: '2024-11-17T02:41:46.117Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:41:46.117Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"      content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"      content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The length of your relationship:** How long have you been together?\n' + {"user":"        '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >          '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"        '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >          "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"        \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >          '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"        '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"        '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"        \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'I Also have a mother who is a cook', {"user":"      content: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'I Also have a mother who is a cook',"}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\n" + {"user":"      content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\n", {"user":"        \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\","}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T02:46:25.543Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 80.4882ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 80.4882ms"}}
[debug] [2024-11-17T02:46:25.544Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T02:46:25.544Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:46:25.544Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:46:25.544Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T02:46:25.464Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 3, {"user":"  nodesCount: 3,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 3,"}}
[info] >    linksCount: 2 {"user":"  linksCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }"}}
[debug] [2024-11-17T02:46:25.552Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 82.3448ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 82.3448ms"}}
[debug] [2024-11-17T02:46:25.553Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T02:46:25.553Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T02:46:25.553Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T02:46:25.553Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:13:45.113Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:13:45.113Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:13:45.118Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:13:45.113Z"],"workRunningCount":1}
[debug] [2024-11-17T05:13:45.118Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T05:13:45.131Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:13:45.132Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T05:13:45.132Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T05:13:45.136Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T05:13:45.140Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:13:45.140Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:13:45.113Z"],"workRunningCount":1}
[debug] [2024-11-17T05:13:45.141Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:13:45.113Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:13:45.140Z"],"workRunningCount":2}
[debug] [2024-11-17T05:13:45.141Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T05:13:45.144Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:13:45.144Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T05:13:45.144Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T05:13:45.145Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T05:13:45.159Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 23.1006ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 23.1006ms"}}
[debug] [2024-11-17T05:13:45.160Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T05:13:45.161Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:13:45.161Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:13:45.161Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:13:45.140Z"],"workRunningCount":1}
[debug] [2024-11-17T05:13:45.162Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:13:45.162Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:13:45.140Z"],"workRunningCount":1}
[debug] [2024-11-17T05:13:45.163Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:13:45.140Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:13:45.162Z"],"workRunningCount":2}
[debug] [2024-11-17T05:13:45.163Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T05:13:45.166Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:13:45.166Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T05:13:45.166Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T05:13:45.167Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T05:13:45.169Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 24.1663ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 24.1663ms"}}
[debug] [2024-11-17T05:13:45.170Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T05:13:45.170Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:13:45.170Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:13:45.170Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:13:45.162Z"],"workRunningCount":1}
[debug] [2024-11-17T05:13:45.171Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:13:45.171Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:13:45.162Z"],"workRunningCount":1}
[debug] [2024-11-17T05:13:45.171Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:13:45.162Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:13:45.171Z"],"workRunningCount":2}
[debug] [2024-11-17T05:13:45.171Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T05:13:45.174Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:13:45.175Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T05:13:45.175Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T05:13:45.177Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >      chatId: 'chat-1731810962643-3dy3qdyho' {"user":"    chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731810962643-3dy3qdyho' {"user":"      chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 3, {"user":"  nodesCount: 3,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 3,"}}
[info] >    linksCount: 2 {"user":"  linksCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho' {"user":"  chatId: 'chat-1731810962643-3dy3qdyho'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T05:13:45.393Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 226.1723ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 226.1723ms"}}
[debug] [2024-11-17T05:13:45.395Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T05:13:45.395Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:13:45.395Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:13:45.395Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:13:45.171Z"],"workRunningCount":1}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:38:16.809Z', {"user":"  createdAt: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:38:16.809Z',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    lastUpdated: '2024-11-17T02:41:46.117Z', {"user":"  lastUpdated: '2024-11-17T02:41:46.117Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:41:46.117Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"      content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"      content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The length of your relationship:** How long have you been together?\n' + {"user":"        '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >          '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"        '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >          "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"        \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >          '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"        '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"        '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"        \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'I Also have a mother who is a cook', {"user":"      content: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'I Also have a mother who is a cook',"}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\n" + {"user":"      content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\n", {"user":"        \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\","}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'chat-1731810962643-3dy3qdyho' } {"user":"✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'chat-1731810962643-3dy3qdyho' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'chat-1731810962643-3dy3qdyho' }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }"}}
[debug] [2024-11-17T05:13:45.438Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 262.1981ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 262.1981ms"}}
[debug] [2024-11-17T05:13:45.439Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T05:13:45.440Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:13:45.440Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:13:45.440Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:18:50.683Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:18:50.683Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:18:50.684Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:18:50.683Z"],"workRunningCount":1}
[debug] [2024-11-17T05:18:50.684Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T05:18:50.687Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:18:50.688Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T05:18:50.688Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T05:18:50.689Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T05:18:50.690Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:18:50.690Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:18:50.683Z"],"workRunningCount":1}
[debug] [2024-11-17T05:18:50.691Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:18:50.683Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:18:50.690Z"],"workRunningCount":2}
[debug] [2024-11-17T05:18:50.691Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T05:18:50.694Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:18:50.694Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T05:18:50.694Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T05:18:50.695Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T05:18:50.697Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 8.6549ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 8.6549ms"}}
[debug] [2024-11-17T05:18:50.698Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T05:18:50.698Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:18:50.698Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:18:50.698Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:18:50.690Z"],"workRunningCount":1}
[debug] [2024-11-17T05:18:50.699Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 4.3237ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 4.3237ms"}}
[debug] [2024-11-17T05:18:50.700Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T05:18:50.700Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:18:50.700Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:18:50.700Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:18:50.701Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:18:50.701Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:18:50.701Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:18:50.701Z"],"workRunningCount":1}
[debug] [2024-11-17T05:18:50.701Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T05:18:50.704Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:18:50.704Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T05:18:50.704Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T05:18:50.705Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T05:18:50.707Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:18:50.707Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:18:50.701Z"],"workRunningCount":1}
[debug] [2024-11-17T05:18:50.707Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:18:50.701Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:18:50.707Z"],"workRunningCount":2}
[debug] [2024-11-17T05:18:50.707Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T05:18:50.711Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:18:50.711Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T05:18:50.711Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T05:18:50.712Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' } {"user":"  data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"      userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >        chatId: 'chat-1731820730677-2qe98ouw0' {"user":"      chatId: 'chat-1731820730677-2qe98ouw0'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731820730677-2qe98ouw0'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:38:16.809Z', {"user":"  createdAt: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:38:16.809Z',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    lastUpdated: '2024-11-17T02:41:46.117Z', {"user":"  lastUpdated: '2024-11-17T02:41:46.117Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:41:46.117Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"      content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"      content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The length of your relationship:** How long have you been together?\n' + {"user":"        '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >          '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"        '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >          "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"        \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >          '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"        '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"        '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"        \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'I Also have a mother who is a cook', {"user":"      content: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'I Also have a mother who is a cook',"}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\n" + {"user":"      content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\n", {"user":"        \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\","}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T05:18:50.799Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 94.1442ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 94.1442ms"}}
[debug] [2024-11-17T05:18:50.800Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T05:18:50.800Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:18:50.800Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:18:50.800Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:18:50.707Z"],"workRunningCount":1}
[debug] [2024-11-17T05:18:50.802Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 89.7209ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 89.7209ms"}}
[debug] [2024-11-17T05:18:50.803Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T05:18:50.803Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:18:50.803Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:18:50.803Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 3, {"user":"  nodesCount: 3,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 3,"}}
[info] >    linksCount: 2 {"user":"  linksCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }"}}
[debug] [2024-11-17T05:43:58.700Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:43:58.700Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:43:58.701Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:43:58.700Z"],"workRunningCount":1}
[debug] [2024-11-17T05:43:58.701Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T05:43:58.706Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:43:58.706Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T05:43:58.707Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T05:43:58.708Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T05:43:58.711Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:43:58.711Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:43:58.700Z"],"workRunningCount":1}
[debug] [2024-11-17T05:43:58.711Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:43:58.700Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:43:58.711Z"],"workRunningCount":2}
[debug] [2024-11-17T05:43:58.712Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T05:43:58.715Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:43:58.716Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T05:43:58.716Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T05:43:58.717Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[debug] [2024-11-17T05:43:58.720Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 11.9743ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 11.9743ms"}}
[debug] [2024-11-17T05:43:58.721Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T05:43:58.721Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:43:58.721Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:43:58.722Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:43:58.711Z"],"workRunningCount":1}
[debug] [2024-11-17T05:43:58.723Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 6.5375ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 6.5375ms"}}
[debug] [2024-11-17T05:43:58.724Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T05:43:58.724Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:43:58.724Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:43:58.725Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:43:58.728Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:43:58.728Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:43:58.728Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:43:58.728Z"],"workRunningCount":1}
[debug] [2024-11-17T05:43:58.729Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T05:43:58.733Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:43:58.733Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T05:43:58.733Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T05:43:58.734Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T05:43:58.736Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:43:58.735Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:43:58.728Z"],"workRunningCount":1}
[debug] [2024-11-17T05:43:58.736Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:43:58.728Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:43:58.735Z"],"workRunningCount":2}
[debug] [2024-11-17T05:43:58.736Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T05:43:58.740Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:43:58.740Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T05:43:58.741Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T05:43:58.742Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' } {"user":"  data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', chatId: 'default-chat' } {"user":"    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:38:16.809Z', {"user":"  createdAt: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:38:16.809Z',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    lastUpdated: '2024-11-17T02:41:46.117Z', {"user":"  lastUpdated: '2024-11-17T02:41:46.117Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:41:46.117Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"      content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"      content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The length of your relationship:** How long have you been together?\n' + {"user":"        '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >          '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"        '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >          "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"        \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >          '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"        '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"        '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"        \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'I Also have a mother who is a cook', {"user":"      content: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'I Also have a mother who is a cook',"}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\n" + {"user":"      content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\n", {"user":"        \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\","}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T05:43:58.845Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 110.9057ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 110.9057ms"}}
[debug] [2024-11-17T05:43:58.847Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T05:43:58.847Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:43:58.847Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:43:58.848Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:43:58.735Z"],"workRunningCount":1}
[debug] [2024-11-17T05:43:58.849Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 107.3213ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 107.3213ms"}}
[debug] [2024-11-17T05:43:58.850Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T05:43:58.850Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:43:58.850Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:43:58.850Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 3, {"user":"  nodesCount: 3,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 3,"}}
[info] >    linksCount: 2 {"user":"  linksCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }"}}
[debug] [2024-11-17T05:44:00.524Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:44:00.524Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T05:44:00.524Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:44:00.524Z"],"workRunningCount":1}
[debug] [2024-11-17T05:44:00.524Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T05:44:00.525Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:44:00.526Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T05:44:00.526Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T05:44:00.527Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: BUSY"}}
[debug] [2024-11-17T05:44:00.530Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:44:00.530Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:44:00.524Z"],"workRunningCount":1}
[debug] [2024-11-17T05:44:00.531Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T05:44:00.524Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:44:00.530Z"],"workRunningCount":2}
[debug] [2024-11-17T05:44:00.531Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T05:44:00.532Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T05:44:00.532Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T05:44:00.532Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T05:44:00.533Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' } {"user":"  data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 35 6f 70 6b 55 37 42 4b 69 4a 30 49 51 45 6d 37 4d 50 36 62 54 34 68 61 42 5a 63 4b 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] }, {"user":"    auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', token: [Object] },"}}
[info] >      data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', chatId: 'default-chat' } {"user":"    data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T02:38:16.809Z', {"user":"  createdAt: '2024-11-17T02:38:16.809Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T02:38:16.809Z',"}}
[info] >    chatId: 'chat-1731810962643-3dy3qdyho', {"user":"  chatId: 'chat-1731810962643-3dy3qdyho',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731810962643-3dy3qdyho',"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    lastUpdated: '2024-11-17T02:41:46.117Z', {"user":"  lastUpdated: '2024-11-17T02:41:46.117Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T02:41:46.117Z',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert', {"user":"      content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Hello my name is Rithipolmoly and i have a boyfriend named Robert',"}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\n" + {"user":"      content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"It's nice to meet you, Rithipolmoly!  It sounds like you're in a relationship with Robert. To help me understand your relationship better and offer helpful advice, could you tell me more about it?  For example, you could tell me about:\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          '* **The length of your relationship:** How long have you been together?\n' + {"user":"        '* **The length of your relationship:** How long have you been together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The length of your relationship:** How long have you been together?\\n' +"}}
[info] >          '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\n' + {"user":"        '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **The good parts:** What do you enjoy most about your relationship with Robert?  What are his best qualities? What are your favorite things to do together?\\n' +"}}
[info] >          "* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\n" + {"user":"        \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"* **The challenges:** Are there any difficulties or disagreements you're facing?  What are your biggest concerns about the relationship?\\n\" +"}}
[info] >          '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\n' + {"user":"        '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your communication style:** How do you and Robert typically communicate?  Do you feel heard and understood?\\n' +"}}
[info] >          '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\n' + {"user":"        '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '* **Your expectations:** What are your hopes and expectations for the future of your relationship?\\n' +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\n", {"user":"        \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"The more information you share, the better I can assist you in understanding and improving your relationship with Robert.  Remember, I'm here to offer support and guidance, not judgment.  Let's work together to explore your relationship.\\n\","}}
[info] >        timestamp: '2024-11-17T02:38:16.723Z' {"user":"      timestamp: '2024-11-17T02:38:16.723Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:38:16.723Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'I Also have a mother who is a cook', {"user":"      content: 'I Also have a mother who is a cook',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'I Also have a mother who is a cook',"}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: "That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\n" + {"user":"      content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: \"That's lovely!  It's great to have a supportive mother, and a cook in the family is always a plus.  While this information tells me something about your family life, it doesn't directly relate to your relationship with Robert.\\n\" +"}}
[info] >          '\n' + {"user":"        '\\n' +","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         '\\n' +"}}
[info] >          "To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\n", {"user":"        \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m         \"To best help you understand and improve your relationship with *Robert*,  it would be helpful if you could focus on sharing details about that specific relationship, as outlined in my previous response.  We can discuss your family relationships later if you'd like, but for now, let's concentrate on your relationship with your boyfriend.\\n\","}}
[info] >        timestamp: '2024-11-17T02:41:46.012Z' {"user":"      timestamp: '2024-11-17T02:41:46.012Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T02:41:46.012Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T05:44:00.651Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 123.5849ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 123.5849ms"}}
[debug] [2024-11-17T05:44:00.652Z] [worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-1b23899c-7806-4d27-8e99-52679eed106e]: IDLE"}}
[debug] [2024-11-17T05:44:00.652Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:44:00.653Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:44:00.653Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T05:44:00.530Z"],"workRunningCount":1}
[debug] [2024-11-17T05:44:00.655Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 121.9065ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 121.9065ms"}}
[debug] [2024-11-17T05:44:00.656Z] [worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-b37cc335-50d0-438d-866d-892d31c7bf83]: IDLE"}}
[debug] [2024-11-17T05:44:00.656Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T05:44:00.656Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T05:44:00.657Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK', {"user":"  userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: '5opkU7BKiJ0IQEm7MP6bT4haBZcK',"}}
[info] >    nodesCount: 3, {"user":"  nodesCount: 3,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 3,"}}
[info] >    linksCount: 2 {"user":"  linksCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 } {"user":"✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: 5opkU7BKiJ0IQEm7MP6bT4haBZcK { totalNodes: 3, totalLinks: 2 }"}}
