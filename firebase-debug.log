[debug] [2024-11-17T07:31:13.225Z] ----------------------------------------------------------------------
[debug] [2024-11-17T07:31:13.228Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js emulators:start
[debug] [2024-11-17T07:31:13.229Z] CLI Version:   13.24.2
[debug] [2024-11-17T07:31:13.229Z] Platform:      win32
[debug] [2024-11-17T07:31:13.229Z] Node Version:  v20.18.0
[debug] [2024-11-17T07:31:13.230Z] Time:          Sun Nov 17 2024 18:31:13 GMT+1100 (Australian Eastern Daylight Time)
[debug] [2024-11-17T07:31:13.230Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-11-17T07:31:13.388Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-11-17T07:31:13.389Z] > authorizing via signed-in user (lisakhun58@gmail.com)
[debug] [2024-11-17T07:31:13.513Z] java version "21.0.5" 2024-10-15 LTS

[debug] [2024-11-17T07:31:13.514Z] Java(TM) SE Runtime Environment (build 21.0.5+9-LTS-239)
Java HotSpot(TM) 64-Bit Server VM (build 21.0.5+9-LTS-239, mixed mode, sharing)

[debug] [2024-11-17T07:31:13.541Z] Parsed Java major version: 21
[info] i  emulators: Starting emulators: auth, functions, firestore, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, extensions"}}
[debug] [2024-11-17T07:31:13.544Z] Checked if tokens are valid: true, expires at: 1731830496279
[debug] [2024-11-17T07:31:13.545Z] Checked if tokens are valid: true, expires at: 1731830496279
[debug] [2024-11-17T07:31:13.547Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc [none]
[debug] [2024-11-17T07:31:14.058Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc 200
[debug] [2024-11-17T07:31:14.058Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc {"projectId":"notalone-de4fc","projectNumber":"784029337452","displayName":"NotAlone","name":"projects/notalone-de4fc","resources":{"hostingSite":"notalone-de4fc"},"state":"ACTIVE","etag":"1_570ddbb0-4c2c-4e94-b3b3-0005c847d3e1"}
[debug] [2024-11-17T07:31:14.075Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-17T07:31:14.076Z] [auth] Authentication Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-17T07:31:14.076Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-17T07:31:14.076Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-17T07:31:14.076Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}]},"metadata":{"message":"assigned listening specs for emulators"}}
[warn] !  emulators: It seems that you are running multiple instances of the emulator suite for project notalone-de4fc. This may result in unexpected behavior. 
[debug] [2024-11-17T07:31:14.083Z] [hub] writing locator at C:\Users\Rob\AppData\Local\Temp\hub-notalone-de4fc.json
[debug] [2024-11-17T07:31:14.093Z] [Extensions] Started Extensions emulator, this is a noop.
[debug] [2024-11-17T07:31:14.099Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-17T07:31:14.099Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-17T07:31:14.099Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-17T07:31:14.099Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mdatabase, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2024-11-17T07:31:14.105Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-17T07:31:14.108Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[debug] [2024-11-17T07:31:14.109Z] Checked if tokens are valid: true, expires at: 1731830496279
[debug] [2024-11-17T07:31:14.109Z] Checked if tokens are valid: true, expires at: 1731830496279
[debug] [2024-11-17T07:31:14.109Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig [none]
[debug] [2024-11-17T07:31:14.707Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig 200
[debug] [2024-11-17T07:31:14.707Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig {"projectId":"notalone-de4fc","storageBucket":"notalone-de4fc.firebasestorage.app"}
[debug] [2024-11-17T07:31:14.729Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-11-17T07:31:14.729Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2024-11-17T07:31:14.729Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","C:\\Users\\Rob\\.cache\\firebase\\emulators\\cloud-firestore-emulator-v1.19.8.jar","--host","127.0.0.1","--port",8080,"--websocket_port",9150,"--project_id","notalone-de4fc","--rules","C:\\Users\\Rob\\Apps\\not-alone\\firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false,"shell":false,"port":8080} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"C:\\\\Users\\\\Rob\\\\.cache\\\\firebase\\\\emulators\\\\cloud-firestore-emulator-v1.19.8.jar\",\"--host\",\"127.0.0.1\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"notalone-de4fc\",\"--rules\",\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false,\"shell\":false,\"port\":8080}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[info] +  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2024-11-17T07:31:26.625Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-11-17T07:31:26.626Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2024-11-17T07:31:26.626Z] Starting Emulator UI with command {"binary":"node","args":["C:\\Users\\Rob\\.cache\\firebase\\emulators\\ui-v1.14.0\\server\\server.mjs"],"optionalArgs":[],"joinArgs":false,"shell":false,"port":4000} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"C:\\\\Users\\\\Rob\\\\.cache\\\\firebase\\\\emulators\\\\ui-v1.14.0\\\\server\\\\server.mjs\"],\"optionalArgs\":[],\"joinArgs\":false,\"shell\":false,\"port\":4000}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2024-11-17T07:31:26.784Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2024-11-17T07:31:26.784Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[debug] [2024-11-17T07:31:26.839Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "C:\Users\Rob\Apps\not-alone\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\Rob\\Apps\\not-alone\\functions\" for Cloud Functions..."}}
[debug] [2024-11-17T07:31:26.847Z] Validating nodejs source
[debug] [2024-11-17T07:31:27.785Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-17T07:31:27.785Z] Building nodejs source
[debug] [2024-11-17T07:31:27.786Z] Failed to find version of module node: reached end of search path C:\Users\Rob\Apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-17T07:31:27.788Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-17T07:31:27.799Z] Found firebase-functions binary at 'C:\Users\Rob\Apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8406

[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-17T07:31:28.559Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"deleteChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"deleteChatHistory"},"analyzeProfileFromChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"analyzeProfileFromChat"},"saveProfileHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveProfileHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-17T07:31:32.614Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-17T07:31:32.615Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat."}}
[info] +  functions[us-central1-saveChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveChatHistory)."}}
[info] +  functions[us-central1-getChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/getChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/getChatHistory)."}}
[info] +  functions[us-central1-deleteChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/deleteChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/deleteChatHistory)."}}
[info] +  functions[us-central1-analyzeProfileFromChat]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/analyzeProfileFromChat). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/analyzeProfileFromChat)."}}
[info] +  functions[us-central1-saveProfileHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveProfileHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveProfileHistory)."}}
[info] +  functions[us-central1-processChat]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/processChat). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/processChat)."}}
[debug] [2024-11-17T07:31:32.633Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬──────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI              │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Authentication │ 127.0.0.1:9099 │ http://127.0.0.1:4000/auth       │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Firestore      │ 127.0.0.1:8080 │ http://127.0.0.1:4000/firestore  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Extensions     │ 127.0.0.1:5001 │ http://127.0.0.1:4000/extensions │
└────────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150
┌─────────────────────────┬───────────────┬─────────────────────┐
│ Extension Instance Name │ Extension Ref │ View in Emulator UI │
└─────────────────────────┴───────────────┴─────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2024-11-17T07:40:47.977Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-17T07:40:47.978Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"ff4bcdf5-daa8-4d32-bebe-a7c388e5289f","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-17T07:40:47.977Z","data":{"uid":"mPfERVEdL6cz2BVhZCyPbTRt6Ru2","email":"orange.grass.187@example.com","emailVerified":true,"displayName":"Orange Grass","metadata":{"creationTime":"2024-11-17T07:40:47.976Z","lastSignInTime":"2024-11-17T07:40:47.976Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"4268336961423265007271960236849096517548","federatedId":"4268336961423265007271960236849096517548","displayName":"Orange Grass","email":"orange.grass.187@example.com","screenName":"grass_orange"}]}}
[debug] [2024-11-17T07:40:47.989Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-17T07:40:47.989Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-17T07:40:48.061Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:48.061Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T07:40:48.062Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:48.061Z"],"workRunningCount":1}
[debug] [2024-11-17T07:40:48.062Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T07:40:48.066Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:40:48.066Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T07:40:48.080Z] [worker-pool] addWorker(us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-getChatHistory)"}}
[debug] [2024-11-17T07:40:48.081Z] [worker-pool] Adding worker with key us-central1-getChatHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-getChatHistory, total=1"}}
[debug] [2024-11-17T07:40:48.088Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:48.088Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:48.061Z"],"workRunningCount":1}
[debug] [2024-11-17T07:40:48.088Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:48.061Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:48.088Z"],"workRunningCount":2}
[debug] [2024-11-17T07:40:48.088Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T07:40:48.092Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:40:48.093Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T07:40:48.100Z] [worker-pool] addWorker(us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveProfileHistory)"}}
[debug] [2024-11-17T07:40:48.101Z] [worker-pool] Adding worker with key us-central1-saveProfileHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveProfileHistory, total=1"}}
[debug] [2024-11-17T07:40:49.815Z] [runtime-status] [2216] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:49.817Z] [runtime-status] [2216] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:49.817Z] [runtime-status] [2216] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-17T07:40:49.817Z] [runtime-status] [2216] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-17T07:40:49.819Z] [runtime-status] [2216] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:49.961Z] [runtime-status] [18740] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:49.963Z] [runtime-status] [18740] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:49.964Z] [runtime-status] [18740] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-17T07:40:49.964Z] [runtime-status] [18740] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-17T07:40:49.965Z] [runtime-status] [18740] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:50.155Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:48.061Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:48.088Z"],"workRunningCount":2}
[debug] [2024-11-17T07:40:50.156Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:48.061Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:48.088Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z"],"workRunningCount":3}
[debug] [2024-11-17T07:40:50.156Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T07:40:50.157Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:40:50.157Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T07:40:50.164Z] [worker-pool] addWorker(us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveProfileHistory)"}}
[debug] [2024-11-17T07:40:50.164Z] [worker-pool] Adding worker with key us-central1-saveProfileHistory, total=2 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveProfileHistory, total=2"}}
[debug] [2024-11-17T07:40:50.173Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:48.061Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:48.088Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z"],"workRunningCount":3}
[debug] [2024-11-17T07:40:50.174Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:48.061Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:48.088Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z"],"workRunningCount":4}
[debug] [2024-11-17T07:40:50.174Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T07:40:50.175Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:40:50.175Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T07:40:50.183Z] [worker-pool] addWorker(us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-processChat)"}}
[debug] [2024-11-17T07:40:50.184Z] [worker-pool] Adding worker with key us-central1-processChat, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-processChat, total=1"}}
[debug] [2024-11-17T07:40:50.316Z] [runtime-status] [2216] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-17T07:40:50.317Z] [runtime-status] [2216] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-17T07:40:50.318Z] [runtime-status] [2216] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:50.327Z] [runtime-status] [2216] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:50.331Z] [runtime-status] [2216] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:50.332Z] [runtime-status] [2216] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2024-11-17T07:40:50.436Z] [runtime-status] [18740] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-17T07:40:50.436Z] [runtime-status] [18740] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-17T07:40:50.437Z] [runtime-status] [18740] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:50.444Z] [runtime-status] [18740] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:50.448Z] [runtime-status] [18740] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:50.448Z] [runtime-status] [18740] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-17T07:40:50.473Z] [runtime-status] [2216] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-17T07:40:50.493Z] [runtime-status] [2216] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-17T07:40:50.495Z] [runtime-status] [2216] Listening to port: \\?\pipe\fire_emu_461934761e4841cb {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[runtime-status] [2216] Listening to port: \\\\?\\pipe\\fire_emu_461934761e4841cb"}}
[debug] [2024-11-17T07:40:50.508Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE"}}
[debug] [2024-11-17T07:40:50.508Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T07:40:50.510Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: BUSY"}}
[debug] [2024-11-17T07:40:50.516Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 6.4147ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 6.4147ms"}}
[debug] [2024-11-17T07:40:50.517Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE"}}
[debug] [2024-11-17T07:40:50.518Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:40:50.518Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:40:50.518Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:48.088Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z"],"workRunningCount":3}
[debug] [2024-11-17T07:40:50.519Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:50.519Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:48.088Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z"],"workRunningCount":3}
[debug] [2024-11-17T07:40:50.519Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:48.088Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:50.519Z"],"workRunningCount":4}
[debug] [2024-11-17T07:40:50.520Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T07:40:50.520Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:40:50.521Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T07:40:50.521Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T07:40:50.522Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2' } {"user":"  data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-17T07:40:50.601Z] [runtime-status] [18740] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-17T07:40:50.621Z] [runtime-status] [18740] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-17T07:40:50.623Z] [runtime-status] [18740] Listening to port: \\?\pipe\fire_emu_eead47487abacca8 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [18740] Listening to port: \\\\?\\pipe\\fire_emu_eead47487abacca8"}}
[debug] [2024-11-17T07:40:50.637Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE"}}
[debug] [2024-11-17T07:40:50.638Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T07:40:50.638Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY"}}
[debug] [2024-11-17T07:40:50.647Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 8.7535ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 8.7535ms"}}
[debug] [2024-11-17T07:40:50.648Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE"}}
[debug] [2024-11-17T07:40:50.648Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:40:50.648Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:40:50.649Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:50.519Z"],"workRunningCount":3}
[debug] [2024-11-17T07:40:50.650Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.650Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:50.519Z"],"workRunningCount":3}
[debug] [2024-11-17T07:40:50.650Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:40:50.519Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.650Z"],"workRunningCount":4}
[debug] [2024-11-17T07:40:50.650Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T07:40:50.651Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:40:50.651Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T07:40:50.651Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T07:40:50.652Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] }, {"user":"    auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },"}}
[info] >      data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', chatId: 'default-chat' } {"user":"    data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [] {"user":"🔍 Available Collections: []","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: []"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T07:40:52.345Z] [runtime-status] [14608] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.347Z] [runtime-status] [14608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.347Z] [runtime-status] [14608] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-17T07:40:52.348Z] [runtime-status] [14608] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-17T07:40:52.349Z] [runtime-status] [14608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 0, {"user":"  documentsFound: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 0,"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ❗ No chat histories found for user {"user":"❗ No chat histories found for user","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ❗ No chat histories found for user"}}
[debug] [2024-11-17T07:40:52.364Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 1842.4433ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 1842.4433ms"}}
[debug] [2024-11-17T07:40:52.365Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE"}}
[debug] [2024-11-17T07:40:52.365Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:40:52.365Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:40:52.365Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.650Z"],"workRunningCount":3}
[info] >  ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 0, totalLinks: 0 }"}}
[debug] [2024-11-17T07:40:52.369Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 1717.3712ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 1717.3712ms"}}
[debug] [2024-11-17T07:40:52.370Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE"}}
[debug] [2024-11-17T07:40:52.370Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:40:52.370Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:40:52.371Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:50.155Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z"],"workRunningCount":2}
[debug] [2024-11-17T07:40:52.442Z] [runtime-status] [27512] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.445Z] [runtime-status] [27512] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.446Z] [runtime-status] [27512] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-17T07:40:52.446Z] [runtime-status] [27512] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-17T07:40:52.446Z] [runtime-status] [27512] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.733Z] [runtime-status] [14608] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-17T07:40:52.733Z] [runtime-status] [14608] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-17T07:40:52.734Z] [runtime-status] [14608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.740Z] [runtime-status] [14608] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.744Z] [runtime-status] [14608] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.744Z] [runtime-status] [14608] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[debug] [2024-11-17T07:40:52.828Z] [runtime-status] [27512] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-17T07:40:52.828Z] [runtime-status] [27512] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-17T07:40:52.829Z] [runtime-status] [27512] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.836Z] [runtime-status] [27512] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.839Z] [runtime-status] [27512] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:52.840Z] [runtime-status] [27512] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-17T07:40:52.873Z] [runtime-status] [14608] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-17T07:40:52.896Z] [runtime-status] [14608] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-17T07:40:52.896Z] [runtime-status] [14608] Listening to port: \\?\pipe\fire_emu_b248bd4bdf7aa968 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[runtime-status] [14608] Listening to port: \\\\?\\pipe\\fire_emu_b248bd4bdf7aa968"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-17T07:40:52.964Z] [runtime-status] [27512] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-17T07:40:52.990Z] [runtime-status] [27512] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-17T07:40:52.992Z] [runtime-status] [27512] Listening to port: \\?\pipe\fire_emu_3bd224f7e40ee1cf {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [27512] Listening to port: \\\\?\\pipe\\fire_emu_3bd224f7e40ee1cf"}}
[debug] [2024-11-17T07:40:52.998Z] [worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: IDLE"}}
[debug] [2024-11-17T07:40:52.998Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T07:40:52.999Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY"}}
[debug] [2024-11-17T07:40:53.001Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 2.3681ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 2.3681ms"}}
[debug] [2024-11-17T07:40:53.002Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE"}}
[debug] [2024-11-17T07:40:53.002Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:40:53.002Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:40:53.002Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z"],"workRunningCount":1}
[debug] [2024-11-17T07:40:53.004Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:53.004Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z"],"workRunningCount":1}
[debug] [2024-11-17T07:40:53.004Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:50.173Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:53.004Z"],"workRunningCount":2}
[debug] [2024-11-17T07:40:53.005Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T07:40:53.006Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:40:53.006Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T07:40:53.006Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T07:40:53.007Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] }, {"user":"    auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },"}}
[info] >      data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', chatId: 'default-chat' } {"user":"    data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    nodesCount: 0, {"user":"  nodesCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 0,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T07:40:53.048Z] [worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: IDLE"}}
[debug] [2024-11-17T07:40:53.049Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T07:40:53.049Z] [worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: BUSY"}}
[debug] [2024-11-17T07:40:53.056Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 7.1246ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 7.1246ms"}}
[debug] [2024-11-17T07:40:53.057Z] [worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: IDLE"}}
[debug] [2024-11-17T07:40:53.057Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:40:53.057Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:40:53.057Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:53.004Z"],"workRunningCount":1}
[debug] [2024-11-17T07:40:53.058Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:53.058Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:53.004Z"],"workRunningCount":1}
[debug] [2024-11-17T07:40:53.058Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:40:53.004Z","/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:53.058Z"],"workRunningCount":2}
[debug] [2024-11-17T07:40:53.058Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-17T07:40:53.059Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:40:53.060Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-17T07:40:53.060Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-17T07:40:53.061Z] [worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: BUSY"}}
[info] >  ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 0, totalLinks: 0 } {"user":"✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 0, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 0, totalLinks: 0 }"}}
[debug] [2024-11-17T07:40:53.063Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 56.2182ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 56.2182ms"}}
[debug] [2024-11-17T07:40:53.064Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE"}}
[debug] [2024-11-17T07:40:53.064Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:40:53.064Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:40:53.064Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:53.058Z"],"workRunningCount":1}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { auth: 'Authenticated', data: { message: 'aloha' } } {"user":"🚀 Incoming request: { auth: 'Authenticated', data: { message: 'aloha' } }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: { auth: 'Authenticated', data: { message: 'aloha' } }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 5, {"user":"  messageLength: 5,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 5,"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731829253091-dria2uhgs {"user":"🆕 Creating new chat session: chat-1731829253091-dria2uhgs","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731829253091-dria2uhgs"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731829253091-dria2uhgs', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731829253091-dria2uhgs', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731829253091-dria2uhgs', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: aloha {"user":"💬 Sending message to Gemini: aloha","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: aloha"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731829253091-dria2uhgs', {"user":"  chatId: 'chat-1731829253091-dria2uhgs',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731829253091-dria2uhgs',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 285, timestamp: '2024-11-17T07:40:55.683Z' } {"user":"✅ Response received: { responseLength: 285, timestamp: '2024-11-17T07:40:55.683Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 285, timestamp: '2024-11-17T07:40:55.683Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: 'Aloha to you too!  How can I help you today?  To best assist you with your relationships, I need some information.  Are you thinking about a specific relationship – romantic, familial, platonic, or professional?  Or are you interested in a more general overview of your relationships?\n', {"user":"  message: 'Aloha to you too!  How can I help you today?  To best assist you with your relationships, I need some information.  Are you thinking about a specific relationship – romantic, familial, platonic, or professional?  Or are you interested in a more general overview of your relationships?\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'Aloha to you too!  How can I help you today?  To best assist you with your relationships, I need some information.  Are you thinking about a specific relationship – romantic, familial, platonic, or professional?  Or are you interested in a more general overview of your relationships?\\n',"}}
[info] >    userMessage: 'aloha', {"user":"  userMessage: 'aloha',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'aloha',"}}
[info] >    timestamp: '2024-11-17T07:40:55.684Z', {"user":"  timestamp: '2024-11-17T07:40:55.684Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-17T07:40:55.684Z',"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    chatId: 'chat-1731829253091-dria2uhgs' {"user":"  chatId: 'chat-1731829253091-dria2uhgs'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731829253091-dria2uhgs'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history and analyze profile: { {"user":"🔍 Attempting to save chat history and analyze profile: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history and analyze profile: {"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    chatId: 'chat-1731829253091-dria2uhgs', {"user":"  chatId: 'chat-1731829253091-dria2uhgs',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731829253091-dria2uhgs',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-17T07:40:55.684Z', {"user":"  timestamp: '2024-11-17T07:40:55.684Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-17T07:40:55.684Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T07:40:55.695Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-17T07:40:55.695Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:53.058Z"],"workRunningCount":1}
[debug] [2024-11-17T07:40:55.695Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:53.058Z","/notalone-de4fc/us-central1/analyzeProfileFromChat-2024-11-17T07:40:55.695Z"],"workRunningCount":2}
[debug] [2024-11-17T07:40:55.695Z] Accepted request POST /notalone-de4fc/us-central1/analyzeProfileFromChat --> us-central1-analyzeProfileFromChat
[debug] [2024-11-17T07:40:55.697Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:40:55.697Z] [functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/analyzeProfileFromChat, mapping to path=/"}}
[debug] [2024-11-17T07:40:55.705Z] [worker-pool] addWorker(us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-analyzeProfileFromChat)"}}
[debug] [2024-11-17T07:40:55.705Z] [worker-pool] Adding worker with key us-central1-analyzeProfileFromChat, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-analyzeProfileFromChat, total=1"}}
[debug] [2024-11-17T07:40:57.256Z] [runtime-status] [26540] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:57.258Z] [runtime-status] [26540] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:57.258Z] [runtime-status] [26540] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-17T07:40:57.259Z] [runtime-status] [26540] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-17T07:40:57.259Z] [runtime-status] [26540] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:57.570Z] [runtime-status] [26540] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-17T07:40:57.570Z] [runtime-status] [26540] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-17T07:40:57.571Z] [runtime-status] [26540] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:57.576Z] [runtime-status] [26540] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:57.579Z] [runtime-status] [26540] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:40:57.579Z] [runtime-status] [26540] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-17T07:40:57.687Z] [runtime-status] [26540] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-17T07:40:57.706Z] [runtime-status] [26540] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-17T07:40:57.707Z] [runtime-status] [26540] Listening to port: \\?\pipe\fire_emu_66ce55fc7e370f53 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[runtime-status] [26540] Listening to port: \\\\?\\pipe\\fire_emu_66ce55fc7e370f53"}}
[debug] [2024-11-17T07:40:57.792Z] [worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: IDLE"}}
[debug] [2024-11-17T07:40:57.792Z] [worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-analyzeProfileFromChat)"}}
[info] i  functions: Beginning execution of "us-central1-analyzeProfileFromChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Beginning execution of \"us-central1-analyzeProfileFromChat\""}}
[debug] [2024-11-17T07:40:57.792Z] [worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Analyzing Profile from Chat History { {"user":"🔍 Analyzing Profile from Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Analyzing Profile from Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 483 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 483 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 483 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"      userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >        chatId: 'chat-1731829253091-dria2uhgs', {"user":"      chatId: 'chat-1731829253091-dria2uhgs',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731829253091-dria2uhgs',"}}
[info] >        messages: [Array] {"user":"      messages: [Array]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array]"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    chatId: 'chat-1731829253091-dria2uhgs', {"user":"  chatId: 'chat-1731829253091-dria2uhgs',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731829253091-dria2uhgs',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Found existing profile: { nodesCount: 0, linksCount: 0 } {"user":"📄 Found existing profile: { nodesCount: 0, linksCount: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Found existing profile: { nodesCount: 0, linksCount: 0 }"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  ✅ Profile Analysis Saved: { {"user":"✅ Profile Analysis Saved: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile Analysis Saved: {"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T07:41:02.173Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-analyzeProfileFromChat" in 4380.7058ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finished \"us-central1-analyzeProfileFromChat\" in 4380.7058ms"}}
[debug] [2024-11-17T07:41:02.173Z] [worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: IDLE"}}
[debug] [2024-11-17T07:41:02.173Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:02.174Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:02.174Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:53.058Z"],"workRunningCount":1}
[info] >  ✅ Profile analysis result: { {"user":"✅ Profile analysis result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile analysis result: {"}}
[info] >    data: { {"user":"  data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: {"}}
[info] >      success: true, {"user":"    success: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     success: true,"}}
[info] >      message: 'Profile analysis completed and saved', {"user":"    message: 'Profile analysis completed and saved',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Profile analysis completed and saved',"}}
[info] >      analysis: { nodes: [Array], links: [] } {"user":"    analysis: { nodes: [Array], links: [] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     analysis: { nodes: [Array], links: [] }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "mPfERVEdL6cz2BVhZCyPbTRt6Ru2", {"user":"  \"userId\": \"mPfERVEdL6cz2BVhZCyPbTRt6Ru2\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"mPfERVEdL6cz2BVhZCyPbTRt6Ru2\","}}
[info] >    "chatId": "chat-1731829253091-dria2uhgs", {"user":"  \"chatId\": \"chat-1731829253091-dria2uhgs\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731829253091-dria2uhgs\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "aloha", {"user":"      \"content\": \"aloha\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"aloha\","}}
[info] >        "timestamp": "2024-11-17T07:41:02.179Z" {"user":"      \"timestamp\": \"2024-11-17T07:41:02.179Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-17T07:41:02.179Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Aloha to you too!  How can I help you today?  To best assist you with your relationships, I need some information.  Are you thinking about a specific relationship – romantic, familial, platonic, or professional?  Or are you interested in a more general overview of your relationships?\n", {"user":"      \"content\": \"Aloha to you too!  How can I help you today?  To best assist you with your relationships, I need some information.  Are you thinking about a specific relationship – romantic, familial, platonic, or professional?  Or are you interested in a more general overview of your relationships?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Aloha to you too!  How can I help you today?  To best assist you with your relationships, I need some information.  Are you thinking about a specific relationship – romantic, familial, platonic, or professional?  Or are you interested in a more general overview of your relationships?\\n\","}}
[info] >        "timestamp": "2024-11-17T07:41:02.179Z" {"user":"      \"timestamp\": \"2024-11-17T07:41:02.179Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-17T07:41:02.179Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-17T07:41:02.179Z", {"user":"  \"timestamp\": \"2024-11-17T07:41:02.179Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-17T07:41:02.179Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "mPfERVEdL6cz2BVhZCyPbTRt6Ru2", {"user":"    \"uid\": \"mPfERVEdL6cz2BVhZCyPbTRt6Ru2\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"mPfERVEdL6cz2BVhZCyPbTRt6Ru2\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T07:41:02.206Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-17T07:41:02.206Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:53.058Z"],"workRunningCount":1}
[debug] [2024-11-17T07:41:02.206Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:53.058Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-17T07:41:02.206Z"],"workRunningCount":2}
[debug] [2024-11-17T07:41:02.206Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-17T07:41:02.209Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:41:02.209Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-17T07:41:02.216Z] [worker-pool] addWorker(us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveChatHistory)"}}
[debug] [2024-11-17T07:41:02.217Z] [worker-pool] Adding worker with key us-central1-saveChatHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveChatHistory, total=1"}}
[debug] [2024-11-17T07:41:03.967Z] [runtime-status] [26092] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:41:03.969Z] [runtime-status] [26092] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:41:03.969Z] [runtime-status] [26092] Found local functions config: C:\Users\Rob\Apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Found local functions config: C:\\Users\\Rob\\Apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-17T07:41:03.969Z] [runtime-status] [26092] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-17T07:41:03.970Z] [runtime-status] [26092] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:41:04.344Z] [runtime-status] [26092] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-17T07:41:04.345Z] [runtime-status] [26092] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-17T07:41:04.346Z] [runtime-status] [26092] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:41:04.351Z] [runtime-status] [26092] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-17T07:41:04.355Z] [runtime-status] [26092] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-17T07:41:04.356Z] [runtime-status] [26092] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\Apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-17T07:41:04.478Z] [runtime-status] [26092] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-17T07:41:04.498Z] [runtime-status] [26092] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\Apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\Apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-17T07:41:04.499Z] [runtime-status] [26092] Listening to port: \\?\pipe\fire_emu_02209d6abfa95dd4 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [26092] Listening to port: \\\\?\\pipe\\fire_emu_02209d6abfa95dd4"}}
[debug] [2024-11-17T07:41:04.525Z] [worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: IDLE"}}
[debug] [2024-11-17T07:41:04.525Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-17T07:41:04.526Z] [worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 522 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 522 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 522 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"      userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >        chatId: 'chat-1731829253091-dria2uhgs', {"user":"      chatId: 'chat-1731829253091-dria2uhgs',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731829253091-dria2uhgs',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-17T07:41:02.179Z' {"user":"      timestamp: '2024-11-17T07:41:02.179Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T07:41:02.179Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    chatId: 'chat-1731829253091-dria2uhgs', {"user":"  chatId: 'chat-1731829253091-dria2uhgs',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731829253091-dria2uhgs',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731829253091-dria2uhgs { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731829253091-dria2uhgs { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731829253091-dria2uhgs { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-17T07:41:05.012Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 486.6301ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 486.6301ms"}}
[debug] [2024-11-17T07:41:05.013Z] [worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: IDLE"}}
[debug] [2024-11-17T07:41:05.013Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:05.013Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:05.013Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-17T07:40:53.058Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-17T07:41:05.016Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 11956.0931ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 11956.0931ms"}}
[debug] [2024-11-17T07:41:05.017Z] [worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: IDLE"}}
[debug] [2024-11-17T07:41:05.017Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:05.017Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:05.017Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T07:41:05.024Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.024Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T07:41:05.024Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.024Z"],"workRunningCount":1}
[debug] [2024-11-17T07:41:05.024Z] Accepted request OPTIONS /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T07:41:05.025Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:41:05.026Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T07:41:05.026Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T07:41:05.026Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: BUSY"}}
[debug] [2024-11-17T07:41:05.030Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.030Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.024Z"],"workRunningCount":1}
[debug] [2024-11-17T07:41:05.030Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.024Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.030Z"],"workRunningCount":2}
[debug] [2024-11-17T07:41:05.030Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T07:41:05.033Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:41:05.033Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T07:41:05.033Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T07:41:05.034Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY"}}
[debug] [2024-11-17T07:41:05.036Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 9.9852ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 9.9852ms"}}
[debug] [2024-11-17T07:41:05.037Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE"}}
[debug] [2024-11-17T07:41:05.037Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:05.037Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:05.037Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.030Z"],"workRunningCount":1}
[debug] [2024-11-17T07:41:05.039Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 5.1878ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 5.1878ms"}}
[debug] [2024-11-17T07:41:05.040Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE"}}
[debug] [2024-11-17T07:41:05.040Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:05.040Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:05.040Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T07:41:05.041Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.041Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T07:41:05.041Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.041Z"],"workRunningCount":1}
[debug] [2024-11-17T07:41:05.041Z] Accepted request OPTIONS /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T07:41:05.043Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:41:05.043Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T07:41:05.043Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T07:41:05.044Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY"}}
[debug] [2024-11-17T07:41:05.045Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.045Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.041Z"],"workRunningCount":1}
[debug] [2024-11-17T07:41:05.045Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.041Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.045Z"],"workRunningCount":2}
[debug] [2024-11-17T07:41:05.045Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T07:41:05.048Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:41:05.048Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T07:41:05.048Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T07:41:05.048Z] [worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: BUSY"}}
[debug] [2024-11-17T07:41:05.050Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.050Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.041Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.045Z"],"workRunningCount":2}
[debug] [2024-11-17T07:41:05.050Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.041Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.045Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.050Z"],"workRunningCount":3}
[debug] [2024-11-17T07:41:05.050Z] Accepted request POST /notalone-de4fc/us-central1/getChatHistory --> us-central1-getChatHistory
[debug] [2024-11-17T07:41:05.052Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:41:05.053Z] [functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/getChatHistory, mapping to path=/"}}
[debug] [2024-11-17T07:41:05.053Z] [worker-pool] submitRequest(triggerId=us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-getChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-getChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-getChatHistory\""}}
[debug] [2024-11-17T07:41:05.053Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: BUSY"}}
[debug] [2024-11-17T07:41:05.054Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 10.7988ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 10.7988ms"}}
[debug] [2024-11-17T07:41:05.056Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE"}}
[debug] [2024-11-17T07:41:05.056Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:05.056Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:05.056Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.045Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.050Z"],"workRunningCount":2}
[debug] [2024-11-17T07:41:05.058Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.058Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.045Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.050Z"],"workRunningCount":2}
[debug] [2024-11-17T07:41:05.058Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.045Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.050Z","/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.058Z"],"workRunningCount":3}
[debug] [2024-11-17T07:41:05.059Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T07:41:05.061Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:41:05.062Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T07:41:05.062Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T07:41:05.062Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2' } {"user":"  data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] }, {"user":"    auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"      userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >        chatId: 'chat-1731829253091-dria2uhgs' {"user":"      chatId: 'chat-1731829253091-dria2uhgs'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731829253091-dria2uhgs'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 24 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 24 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 24 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] }, {"user":"    auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },"}}
[info] >      data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', chatId: 'default-chat' } {"user":"    data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', chatId: 'default-chat' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: { userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', chatId: 'default-chat' }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Available Collections: [ 'chat_histories', 'profile_histories' ] {"user":"🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Available Collections: [ 'chat_histories', 'profile_histories' ]"}}
[info] >  🔎 Querying chat_histories collection { {"user":"🔎 Querying chat_histories collection {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔎 Querying chat_histories collection {"}}
[info] >    documentsFound: 1, {"user":"  documentsFound: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   documentsFound: 1,"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📄 Individual Chat Document: { {"user":"📄 Individual Chat Document: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 📄 Individual Chat Document: {"}}
[info] >    createdAt: '2024-11-17T07:41:04.987Z', {"user":"  createdAt: '2024-11-17T07:41:04.987Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   createdAt: '2024-11-17T07:41:04.987Z',"}}
[info] >    lastUpdated: '2024-11-17T07:41:04.987Z', {"user":"  lastUpdated: '2024-11-17T07:41:04.987Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastUpdated: '2024-11-17T07:41:04.987Z',"}}
[info] >    chatId: 'chat-1731829253091-dria2uhgs', {"user":"  chatId: 'chat-1731829253091-dria2uhgs',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731829253091-dria2uhgs',"}}
[info] >    messages: [ {"user":"  messages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messages: ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'user', {"user":"      role: 'user',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'user',"}}
[info] >        content: 'aloha', {"user":"      content: 'aloha',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'aloha',"}}
[info] >        timestamp: '2024-11-17T07:41:02.179Z' {"user":"      timestamp: '2024-11-17T07:41:02.179Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T07:41:02.179Z'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        role: 'model', {"user":"      role: 'model',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       role: 'model',"}}
[info] >        content: 'Aloha to you too!  How can I help you today?  To best assist you with your relationships, I need some information.  Are you thinking about a specific relationship – romantic, familial, platonic, or professional?  Or are you interested in a more general overview of your relationships?\n', {"user":"      content: 'Aloha to you too!  How can I help you today?  To best assist you with your relationships, I need some information.  Are you thinking about a specific relationship – romantic, familial, platonic, or professional?  Or are you interested in a more general overview of your relationships?\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       content: 'Aloha to you too!  How can I help you today?  To best assist you with your relationships, I need some information.  Are you thinking about a specific relationship – romantic, familial, platonic, or professional?  Or are you interested in a more general overview of your relationships?\\n',"}}
[info] >        timestamp: '2024-11-17T07:41:02.179Z' {"user":"      timestamp: '2024-11-17T07:41:02.179Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-17T07:41:02.179Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2' {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-17T07:41:05.144Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 81.994ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 81.994ms"}}
[debug] [2024-11-17T07:41:05.145Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE"}}
[debug] [2024-11-17T07:41:05.145Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:05.145Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:05.145Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.045Z","/notalone-de4fc/us-central1/getChatHistory-2024-11-17T07:41:05.050Z"],"workRunningCount":2}
[info] >  ✅ Retrieved chat histories for user: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalChats: 1, chatId: 'All chats' } {"user":"✅ Retrieved chat histories for user: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalChats: 1, chatId: 'All chats' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Retrieved chat histories for user: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalChats: 1, chatId: 'All chats' }"}}
[debug] [2024-11-17T07:41:05.150Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-getChatHistory" in 96.8475ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finished \"us-central1-getChatHistory\" in 96.8475ms"}}
[debug] [2024-11-17T07:41:05.151Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: IDLE"}}
[debug] [2024-11-17T07:41:05.151Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:05.151Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:05.151Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.045Z"],"workRunningCount":1}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-17T07:41:05.524Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 475.57ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 475.57ms"}}
[debug] [2024-11-17T07:41:05.525Z] [worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: IDLE"}}
[debug] [2024-11-17T07:41:05.525Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:05.525Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:05.525Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T07:41:05.535Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.535Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T07:41:05.536Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/saveProfileHistory-2024-11-17T07:41:05.535Z"],"workRunningCount":1}
[debug] [2024-11-17T07:41:05.536Z] Accepted request POST /notalone-de4fc/us-central1/saveProfileHistory --> us-central1-saveProfileHistory
[debug] [2024-11-17T07:41:05.536Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-17T07:41:05.536Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveProfileHistory, mapping to path=/"}}
[debug] [2024-11-17T07:41:05.537Z] [worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveProfileHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveProfileHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveProfileHistory\""}}
[debug] [2024-11-17T07:41:05.537Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Profile History { {"user":"🔍 Saving Profile History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Profile History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 40 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 40 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 6d 50 66 45 52 56 45 64 4c 36 63 7a 32 42 56 68 5a 43 79 50 62 54 52 74 36 52 75 32 22 2c 22 ... 40 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 34, {"user":"      [Symbol(kHeadersCount)]: 34,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 34,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] }, {"user":"    auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     auth: { uid: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', token: [Object] },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"      userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >        chatId: 'chat-1731829253091-dria2uhgs' {"user":"      chatId: 'chat-1731829253091-dria2uhgs'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731829253091-dria2uhgs'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Profile Data: { {"user":"🔍 Extracted Profile Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Profile Data: {"}}
[info] >    userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2', {"user":"  userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'mPfERVEdL6cz2BVhZCyPbTRt6Ru2',"}}
[info] >    nodesCount: 1, {"user":"  nodesCount: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   nodesCount: 1,"}}
[info] >    linksCount: 0 {"user":"  linksCount: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   linksCount: 0"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 1, totalLinks: 0 } {"user":"✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 1, totalLinks: 0 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Profile history saved/updated: mPfERVEdL6cz2BVhZCyPbTRt6Ru2 { totalNodes: 1, totalLinks: 0 }"}}
[debug] [2024-11-17T07:41:05.575Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveProfileHistory" in 38.0976ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finished \"us-central1-saveProfileHistory\" in 38.0976ms"}}
[debug] [2024-11-17T07:41:05.576Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: IDLE"}}
[debug] [2024-11-17T07:41:05.576Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-17T07:41:05.576Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-17T07:41:05.576Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-17T07:42:29.144Z] File C:\Users\Rob\Apps\not-alone\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2024-11-17T07:42:30.146Z] Validating nodejs source
[debug] [2024-11-17T07:42:31.303Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-17T07:42:31.303Z] Building nodejs source
[debug] [2024-11-17T07:42:31.303Z] Failed to find version of module node: reached end of search path C:\Users\Rob\Apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-17T07:42:31.305Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-17T07:42:31.315Z] Found firebase-functions binary at 'C:\Users\Rob\Apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8082

[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-17T07:42:32.147Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"deleteChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"deleteChatHistory"},"analyzeProfileFromChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"analyzeProfileFromChat"},"saveProfileHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveProfileHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-17T07:42:36.189Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-17T07:42:36.189Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat."}}
[debug] [2024-11-17T07:42:36.191Z] [worker-pool] Shutting down IDLE worker (us-central1-getChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-getChatHistory)"}}
[debug] [2024-11-17T07:42:36.191Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: FINISHING"}}
[debug] [2024-11-17T07:42:36.191Z] [worker-pool] Shutting down IDLE worker (us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-saveProfileHistory)"}}
[debug] [2024-11-17T07:42:36.191Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: FINISHING"}}
[debug] [2024-11-17T07:42:36.191Z] [worker-pool] Shutting down IDLE worker (us-central1-saveProfileHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-saveProfileHistory)"}}
[debug] [2024-11-17T07:42:36.191Z] [worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: FINISHING"}}
[debug] [2024-11-17T07:42:36.191Z] [worker-pool] Shutting down IDLE worker (us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-processChat)"}}
[debug] [2024-11-17T07:42:36.192Z] [worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: FINISHING"}}
[debug] [2024-11-17T07:42:36.192Z] [worker-pool] Shutting down IDLE worker (us-central1-analyzeProfileFromChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-analyzeProfileFromChat)"}}
[debug] [2024-11-17T07:42:36.192Z] [worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: FINISHING"}}
[debug] [2024-11-17T07:42:36.192Z] [worker-pool] Shutting down IDLE worker (us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-saveChatHistory)"}}
[debug] [2024-11-17T07:42:36.192Z] [worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: FINISHING"}}
[debug] [2024-11-17T07:42:36.214Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: exited"}}
[debug] [2024-11-17T07:42:36.214Z] [worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-getChatHistory"},"extension":{},"message":"[worker-us-central1-getChatHistory-d860f4a4-4232-4427-909e-be7a14828f87]: FINISHED"}}
[debug] [2024-11-17T07:42:36.215Z] [worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: exited"}}
[debug] [2024-11-17T07:42:36.215Z] [worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-d4429856-54d8-4940-88a0-610f3d9ff38e]: FINISHED"}}
[debug] [2024-11-17T07:42:36.216Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: exited"}}
[debug] [2024-11-17T07:42:36.216Z] [worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-4463b433-96b0-43ce-86b9-fa28c7588f71]: FINISHED"}}
[debug] [2024-11-17T07:42:36.217Z] [worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: exited"}}
[debug] [2024-11-17T07:42:36.217Z] [worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveProfileHistory"},"extension":{},"message":"[worker-us-central1-saveProfileHistory-485b5373-e44b-42d5-891c-92905cec1b28]: FINISHED"}}
[debug] [2024-11-17T07:42:36.217Z] [worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: exited"}}
[debug] [2024-11-17T07:42:36.217Z] [worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-4a8974e1-41da-4917-97cd-834fdee3b395]: FINISHED"}}
[debug] [2024-11-17T07:42:36.218Z] [worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: exited"}}
[debug] [2024-11-17T07:42:36.219Z] [worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-analyzeProfileFromChat"},"extension":{},"message":"[worker-us-central1-analyzeProfileFromChat-eb1a7985-0fe1-4206-b443-c4e913d5ec71]: FINISHED"}}
[debug] [2024-11-17T07:42:57.016Z] File C:\Users\Rob\Apps\not-alone\functions\lib\index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js.map changed, reloading triggers"}}
[debug] [2024-11-17T07:42:57.018Z] File C:\Users\Rob\Apps\not-alone\functions\lib\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\Apps\\not-alone\\functions\\lib\\index.js changed, reloading triggers"}}
[debug] [2024-11-17T07:42:58.031Z] Validating nodejs source
[debug] [2024-11-17T07:42:59.101Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-17T07:42:59.101Z] Building nodejs source
[debug] [2024-11-17T07:42:59.101Z] Failed to find version of module node: reached end of search path C:\Users\Rob\Apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-17T07:42:59.103Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-17T07:42:59.113Z] Found firebase-functions binary at 'C:\Users\Rob\Apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8699

[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-17T07:42:59.979Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"deleteChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"deleteChatHistory"},"analyzeProfileFromChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"analyzeProfileFromChat"},"saveProfileHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveProfileHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-17T07:43:04.021Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-17T07:43:04.022Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, deleteChatHistory, analyzeProfileFromChat, saveProfileHistory, processChat."}}
