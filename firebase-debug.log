[debug] [2024-11-13T12:15:11.189Z] ----------------------------------------------------------------------
[debug] [2024-11-13T12:15:11.193Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\Rob\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js emulators:start
[debug] [2024-11-13T12:15:11.193Z] CLI Version:   13.24.2
[debug] [2024-11-13T12:15:11.194Z] Platform:      win32
[debug] [2024-11-13T12:15:11.194Z] Node Version:  v20.18.0
[debug] [2024-11-13T12:15:11.194Z] Time:          Wed Nov 13 2024 23:15:11 GMT+1100 (Australian Eastern Daylight Time)
[debug] [2024-11-13T12:15:11.194Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-11-13T12:15:11.358Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-11-13T12:15:11.358Z] > authorizing via signed-in user (lisakhun58@gmail.com)
[debug] [2024-11-13T12:15:11.586Z] java version "21.0.5" 2024-10-15 LTS

[debug] [2024-11-13T12:15:11.587Z] Java(TM) SE Runtime Environment (build 21.0.5+9-LTS-239)
Java HotSpot(TM) 64-Bit Server VM (build 21.0.5+9-LTS-239, mixed mode, sharing)

[debug] [2024-11-13T12:15:11.614Z] Parsed Java major version: 21
[info] i  emulators: Starting emulators: auth, functions, firestore, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, extensions"}}
[debug] [2024-11-13T12:15:11.617Z] Checked if tokens are valid: false, expires at: 1731483404063
[debug] [2024-11-13T12:15:11.617Z] Checked if tokens are valid: false, expires at: 1731483404063
[debug] [2024-11-13T12:15:11.618Z] > refreshing access token with scopes: []
[debug] [2024-11-13T12:15:11.620Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2024-11-13T12:15:11.620Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-11-13T12:15:11.914Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2024-11-13T12:15:11.914Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-11-13T12:15:11.925Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc [none]
[debug] [2024-11-13T12:15:12.546Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc 200
[debug] [2024-11-13T12:15:12.547Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc {"projectId":"notalone-de4fc","projectNumber":"784029337452","displayName":"NotAlone","name":"projects/notalone-de4fc","resources":{"hostingSite":"notalone-de4fc"},"state":"ACTIVE","etag":"1_570ddbb0-4c2c-4e94-b3b3-0005c847d3e1"}
[debug] [2024-11-13T12:15:12.564Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-13T12:15:12.565Z] [auth] Authentication Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-13T12:15:12.565Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-13T12:15:12.565Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-13T12:15:12.565Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2024-11-13T12:15:12.571Z] [hub] writing locator at C:\Users\Rob\AppData\Local\Temp\hub-notalone-de4fc.json
[debug] [2024-11-13T12:15:12.581Z] [Extensions] Started Extensions emulator, this is a noop.
[debug] [2024-11-13T12:15:12.588Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-13T12:15:12.588Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-13T12:15:12.588Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2024-11-13T12:15:12.589Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mdatabase, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2024-11-13T12:15:12.594Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-13T12:15:12.597Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[debug] [2024-11-13T12:15:12.598Z] Checked if tokens are valid: true, expires at: 1731503709914
[debug] [2024-11-13T12:15:12.598Z] Checked if tokens are valid: true, expires at: 1731503709914
[debug] [2024-11-13T12:15:12.598Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig [none]
[debug] [2024-11-13T12:15:13.264Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig 200
[debug] [2024-11-13T12:15:13.264Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/notalone-de4fc/adminSdkConfig {"projectId":"notalone-de4fc","storageBucket":"notalone-de4fc.firebasestorage.app"}
[debug] [2024-11-13T12:15:13.288Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-11-13T12:15:13.289Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2024-11-13T12:15:13.289Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","C:\\Users\\Rob\\.cache\\firebase\\emulators\\cloud-firestore-emulator-v1.19.8.jar","--host","127.0.0.1","--port",8080,"--websocket_port",9150,"--project_id","notalone-de4fc","--rules","C:\\Users\\Rob\\apps\\not-alone\\firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false,"shell":false,"port":8080} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"C:\\\\Users\\\\Rob\\\\.cache\\\\firebase\\\\emulators\\\\cloud-firestore-emulator-v1.19.8.jar\",\"--host\",\"127.0.0.1\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"notalone-de4fc\",\"--rules\",\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false,\"shell\":false,\"port\":8080}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[info] +  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2024-11-13T12:15:23.755Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2024-11-13T12:15:23.756Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2024-11-13T12:15:23.756Z] Starting Emulator UI with command {"binary":"node","args":["C:\\Users\\Rob\\.cache\\firebase\\emulators\\ui-v1.14.0\\server\\server.mjs"],"optionalArgs":[],"joinArgs":false,"shell":false,"port":4000} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"C:\\\\Users\\\\Rob\\\\.cache\\\\firebase\\\\emulators\\\\ui-v1.14.0\\\\server\\\\server.mjs\"],\"optionalArgs\":[],\"joinArgs\":false,\"shell\":false,\"port\":4000}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2024-11-13T12:15:23.922Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2024-11-13T12:15:23.922Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[debug] [2024-11-13T12:15:23.972Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "C:\Users\Rob\apps\not-alone\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\Rob\\apps\\not-alone\\functions\" for Cloud Functions..."}}
[debug] [2024-11-13T12:15:23.980Z] Validating nodejs source
[debug] [2024-11-13T12:15:25.177Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-13T12:15:25.177Z] Building nodejs source
[debug] [2024-11-13T12:15:25.177Z] Failed to find version of module node: reached end of search path C:\Users\Rob\apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-13T12:15:25.180Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-13T12:15:25.191Z] Found firebase-functions binary at 'C:\Users\Rob\apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8621

[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-13T12:15:26.256Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-13T12:15:30.299Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-13T12:15:30.300Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, processChat."}}
[info] +  functions[us-central1-saveChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/saveChatHistory)."}}
[info] +  functions[us-central1-getChatHistory]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/getChatHistory). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/getChatHistory)."}}
[info] +  functions[us-central1-processChat]: http function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/processChat). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/notalone-de4fc/us-central1/processChat)."}}
[debug] [2024-11-13T12:15:30.311Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬──────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI              │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Authentication │ 127.0.0.1:9099 │ http://127.0.0.1:4000/auth       │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Firestore      │ 127.0.0.1:8080 │ http://127.0.0.1:4000/firestore  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Extensions     │ 127.0.0.1:5001 │ http://127.0.0.1:4000/extensions │
└────────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150
┌─────────────────────────┬───────────────┬─────────────────────┐
│ Extension Instance Name │ Extension Ref │ View in Emulator UI │
└─────────────────────────┴───────────────┴─────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2024-11-13T12:19:41.352Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast [none]
[debug] [2024-11-13T12:19:41.352Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"eventId":"630ab240-cede-443a-bb2f-acf3f29d0057","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/notalone-de4fc","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2024-11-13T12:19:41.352Z","data":{"uid":"eH24VXyrqOIVZsy1yLfwgK25TCo9","email":"olive.algae.516@example.com","emailVerified":true,"displayName":"Olive Algae","metadata":{"creationTime":"2024-11-13T12:19:41.350Z","lastSignInTime":"2024-11-13T12:19:41.350Z"},"customClaims":{},"providerData":[{"providerId":"google.com","rawId":"7733166422773480900513275694337522482486","federatedId":"7733166422773480900513275694337522482486","displayName":"Olive Algae","email":"olive.algae.516@example.com","screenName":"algae_olive"}]}}
[debug] [2024-11-13T12:19:41.365Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast 200
[debug] [2024-11-13T12:19:41.365Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/notalone-de4fc/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2024-11-13T12:19:43.748Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:19:43.748Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:19:43.748Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:19:43.748Z"],"workRunningCount":1}
[debug] [2024-11-13T12:19:43.749Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-13T12:19:43.752Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-13T12:19:43.752Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-13T12:19:43.763Z] [worker-pool] addWorker(us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-processChat)"}}
[debug] [2024-11-13T12:19:43.764Z] [worker-pool] Adding worker with key us-central1-processChat, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-processChat, total=1"}}
[debug] [2024-11-13T12:19:45.660Z] [runtime-status] [29072] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:45.661Z] [runtime-status] [29072] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:45.661Z] [runtime-status] [29072] Found local functions config: C:\Users\Rob\apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Found local functions config: C:\\Users\\Rob\\apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-13T12:19:45.662Z] [runtime-status] [29072] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-13T12:19:45.662Z] [runtime-status] [29072] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:46.007Z] [runtime-status] [29072] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-13T12:19:46.007Z] [runtime-status] [29072] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-13T12:19:46.007Z] [runtime-status] [29072] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:46.014Z] [runtime-status] [29072] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:46.016Z] [runtime-status] [29072] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:46.017Z] [runtime-status] [29072] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-13T12:19:46.126Z] [runtime-status] [29072] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-13T12:19:46.140Z] [runtime-status] [29072] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-13T12:19:46.141Z] [runtime-status] [29072] Listening to port: \\?\pipe\fire_emu_ad018d97912b6f75 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[runtime-status] [29072] Listening to port: \\\\?\\pipe\\fire_emu_ad018d97912b6f75"}}
[debug] [2024-11-13T12:19:46.201Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE"}}
[debug] [2024-11-13T12:19:46.201Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-13T12:19:46.202Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY"}}
[debug] [2024-11-13T12:19:46.207Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 5.5501ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 5.5501ms"}}
[debug] [2024-11-13T12:19:46.208Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE"}}
[debug] [2024-11-13T12:19:46.208Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-13T12:19:46.208Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-13T12:19:46.208Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:19:46.209Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:19:46.209Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:19:46.209Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:19:46.209Z"],"workRunningCount":1}
[debug] [2024-11-13T12:19:46.210Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-13T12:19:46.210Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-13T12:19:46.210Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-13T12:19:46.211Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-13T12:19:46.211Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } } {"user":"🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 5, {"user":"  messageLength: 5,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 5,"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731500386228-1pfejwsus {"user":"🆕 Creating new chat session: chat-1731500386228-1pfejwsus","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731500386228-1pfejwsus"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731500386228-1pfejwsus', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731500386228-1pfejwsus', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731500386228-1pfejwsus', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: hello {"user":"💬 Sending message to Gemini: hello","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: hello"}}
[warn] !  Google API requested!
   - URL: "https://oauth2.googleapis.com/token"
   - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Google API requested!\n   - URL: \"https://oauth2.googleapis.com/token\"\n   - Be careful, this may be a production service."}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731500386228-1pfejwsus', {"user":"  chatId: 'chat-1731500386228-1pfejwsus',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500386228-1pfejwsus',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 229, timestamp: '2024-11-13T12:19:48.571Z' } {"user":"✅ Response received: { responseLength: 229, timestamp: '2024-11-13T12:19:48.571Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 229, timestamp: '2024-11-13T12:19:48.571Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: 'Hello there!  How can I help you today?  Are you looking for advice on a specific relationship issue, or would you like to explore relationship dynamics in general?  The more information you give me, the better I can assist you.\n', {"user":"  message: 'Hello there!  How can I help you today?  Are you looking for advice on a specific relationship issue, or would you like to explore relationship dynamics in general?  The more information you give me, the better I can assist you.\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'Hello there!  How can I help you today?  Are you looking for advice on a specific relationship issue, or would you like to explore relationship dynamics in general?  The more information you give me, the better I can assist you.\\n',"}}
[info] >    userMessage: 'hello', {"user":"  userMessage: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'hello',"}}
[info] >    timestamp: '2024-11-13T12:19:48.572Z', {"user":"  timestamp: '2024-11-13T12:19:48.572Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-13T12:19:48.572Z',"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500386228-1pfejwsus' {"user":"  chatId: 'chat-1731500386228-1pfejwsus'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500386228-1pfejwsus'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history with DETAILED logging: { {"user":"🔍 Attempting to save chat history with DETAILED logging: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history with DETAILED logging: {"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500386228-1pfejwsus', {"user":"  chatId: 'chat-1731500386228-1pfejwsus',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500386228-1pfejwsus',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-13T12:19:48.572Z', {"user":"  timestamp: '2024-11-13T12:19:48.572Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-13T12:19:48.572Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "eH24VXyrqOIVZsy1yLfwgK25TCo9", {"user":"  \"userId\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\","}}
[info] >    "chatId": "chat-1731500386228-1pfejwsus", {"user":"  \"chatId\": \"chat-1731500386228-1pfejwsus\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731500386228-1pfejwsus\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "hello", {"user":"      \"content\": \"hello\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"hello\","}}
[info] >        "timestamp": "2024-11-13T12:19:48.575Z" {"user":"      \"timestamp\": \"2024-11-13T12:19:48.575Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-13T12:19:48.575Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Hello there!  How can I help you today?  Are you looking for advice on a specific relationship issue, or would you like to explore relationship dynamics in general?  The more information you give me, the better I can assist you.\n", {"user":"      \"content\": \"Hello there!  How can I help you today?  Are you looking for advice on a specific relationship issue, or would you like to explore relationship dynamics in general?  The more information you give me, the better I can assist you.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Hello there!  How can I help you today?  Are you looking for advice on a specific relationship issue, or would you like to explore relationship dynamics in general?  The more information you give me, the better I can assist you.\\n\","}}
[info] >        "timestamp": "2024-11-13T12:19:48.575Z" {"user":"      \"timestamp\": \"2024-11-13T12:19:48.575Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-13T12:19:48.575Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-13T12:19:48.575Z", {"user":"  \"timestamp\": \"2024-11-13T12:19:48.575Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-13T12:19:48.575Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "eH24VXyrqOIVZsy1yLfwgK25TCo9", {"user":"    \"uid\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-13T12:19:48.616Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-13T12:19:48.616Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:19:46.209Z"],"workRunningCount":1}
[debug] [2024-11-13T12:19:48.616Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:19:46.209Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-13T12:19:48.616Z"],"workRunningCount":2}
[debug] [2024-11-13T12:19:48.617Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-13T12:19:48.617Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-13T12:19:48.618Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-13T12:19:48.626Z] [worker-pool] addWorker(us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-saveChatHistory)"}}
[debug] [2024-11-13T12:19:48.627Z] [worker-pool] Adding worker with key us-central1-saveChatHistory, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-saveChatHistory, total=1"}}
[debug] [2024-11-13T12:19:50.364Z] [runtime-status] [25412] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:50.366Z] [runtime-status] [25412] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:50.367Z] [runtime-status] [25412] Found local functions config: C:\Users\Rob\apps\not-alone\functions/.runtimeconfig.json {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Found local functions config: C:\\Users\\Rob\\apps\\not-alone\\functions/.runtimeconfig.json"}}
[debug] [2024-11-13T12:19:50.367Z] [runtime-status] [25412] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2024-11-13T12:19:50.367Z] [runtime-status] [25412] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:50.741Z] [runtime-status] [25412] Checked functions.config() {"config":{"vertex":{"project":"notalone-de4fc","location":"australia-southeast1","model":"gemini-1.5-flash-002"},"environment":{"mode":"development"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Checked functions.config() {\"config\":{\"vertex\":{\"project\":\"notalone-de4fc\",\"location\":\"australia-southeast1\",\"model\":\"gemini-1.5-flash-002\"},\"environment\":{\"mode\":\"development\"}}}"}}
[debug] [2024-11-13T12:19:50.741Z] [runtime-status] [25412] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}}"}}
[debug] [2024-11-13T12:19:50.742Z] [runtime-status] [25412] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:50.748Z] [runtime-status] [25412] Resolved module firebase-admin {"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:50.750Z] [runtime-status] [25412] Resolved module firebase-functions {"declared":true,"installed":true,"version":"6.1.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-functions\\lib\\v2\\index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"6.1.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-functions\\\\lib\\\\v2\\\\index.js\"}"}}
[debug] [2024-11-13T12:19:50.751Z] [runtime-status] [25412] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"12.7.0","resolution":"C:\\Users\\Rob\\apps\\not-alone\\functions\\node_modules\\firebase-admin\\lib\\index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"12.7.0\",\"resolution\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\\\\node_modules\\\\firebase-admin\\\\lib\\\\index.js\"}}"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[debug] [2024-11-13T12:19:50.867Z] [runtime-status] [25412] initializeApp(DEFAULT) {"storageBucket":"notalone-de4fc.firebasestorage.app","projectId":"notalone-de4fc"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] initializeApp(DEFAULT) {\"storageBucket\":\"notalone-de4fc.firebasestorage.app\",\"projectId\":\"notalone-de4fc\"}"}}
[info] >  Connecting to Firestore Emulator: localhost:8080 {"user":"Connecting to Firestore Emulator: localhost:8080","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m Connecting to Firestore Emulator: localhost:8080"}}
[debug] [2024-11-13T12:19:50.880Z] [runtime-status] [25412] Functions runtime initialized. {"cwd":"C:\\Users\\Rob\\apps\\not-alone\\functions","node_version":"20.18.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Functions runtime initialized. {\"cwd\":\"C:\\\\Users\\\\Rob\\\\apps\\\\not-alone\\\\functions\",\"node_version\":\"20.18.0\"}"}}
[debug] [2024-11-13T12:19:50.881Z] [runtime-status] [25412] Listening to port: \\?\pipe\fire_emu_6c1a0d42f7d630f6 {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[runtime-status] [25412] Listening to port: \\\\?\\pipe\\fire_emu_6c1a0d42f7d630f6"}}
[debug] [2024-11-13T12:19:50.925Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: IDLE"}}
[debug] [2024-11-13T12:19:50.925Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-13T12:19:50.926Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 48 32 34 56 58 79 72 71 4f 49 56 5a 73 79 31 79 4c 66 77 67 4b 32 35 54 43 6f 39 22 2c 22 ... 464 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 48 32 34 56 58 79 72 71 4f 49 56 5a 73 79 31 79 4c 66 77 67 4b 32 35 54 43 6f 39 22 2c 22 ... 464 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 48 32 34 56 58 79 72 71 4f 49 56 5a 73 79 31 79 4c 66 77 67 4b 32 35 54 43 6f 39 22 2c 22 ... 464 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"      userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >        chatId: 'chat-1731500386228-1pfejwsus', {"user":"      chatId: 'chat-1731500386228-1pfejwsus',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731500386228-1pfejwsus',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-13T12:19:48.575Z' {"user":"      timestamp: '2024-11-13T12:19:48.575Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-13T12:19:48.575Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500386228-1pfejwsus', {"user":"  chatId: 'chat-1731500386228-1pfejwsus',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500386228-1pfejwsus',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731500386228-1pfejwsus { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731500386228-1pfejwsus { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731500386228-1pfejwsus { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-13T12:19:52.915Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 1989.5151ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 1989.5151ms"}}
[debug] [2024-11-13T12:19:52.916Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: IDLE"}}
[debug] [2024-11-13T12:19:52.917Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-13T12:19:52.917Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-13T12:19:52.917Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:19:46.209Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-13T12:19:52.921Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 6710.2608ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 6710.2608ms"}}
[debug] [2024-11-13T12:19:52.922Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE"}}
[debug] [2024-11-13T12:19:52.923Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-13T12:19:52.923Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-13T12:19:52.923Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:20:21.559Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:20:21.559Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:20:21.560Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:20:21.559Z"],"workRunningCount":1}
[debug] [2024-11-13T12:20:21.560Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-13T12:20:21.562Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-13T12:20:21.563Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-13T12:20:21.563Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-13T12:20:21.564Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY"}}
[debug] [2024-11-13T12:20:21.567Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 4.2367ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 4.2367ms"}}
[debug] [2024-11-13T12:20:21.568Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE"}}
[debug] [2024-11-13T12:20:21.568Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-13T12:20:21.568Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-13T12:20:21.568Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:20:21.569Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:20:21.569Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:20:21.569Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:20:21.569Z"],"workRunningCount":1}
[debug] [2024-11-13T12:20:21.569Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-13T12:20:21.572Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-13T12:20:21.572Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-13T12:20:21.572Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-13T12:20:21.573Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { {"user":"🚀 Incoming request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: {"}}
[info] >    auth: 'Authenticated', {"user":"  auth: 'Authenticated',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   auth: 'Authenticated',"}}
[info] >    data: { message: 'hi', chatId: 'chat-1731500386228-1pfejwsus' } {"user":"  data: { message: 'hi', chatId: 'chat-1731500386228-1pfejwsus' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { message: 'hi', chatId: 'chat-1731500386228-1pfejwsus' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📝 Using chat ID: chat-1731500386228-1pfejwsus {"user":"📝 Using chat ID: chat-1731500386228-1pfejwsus","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: chat-1731500386228-1pfejwsus"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 2, {"user":"  messageLength: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 2,"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500386228-1pfejwsus' {"user":"  chatId: 'chat-1731500386228-1pfejwsus'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500386228-1pfejwsus'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  💬 Sending message to Gemini: hi {"user":"💬 Sending message to Gemini: hi","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: hi"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731500386228-1pfejwsus', {"user":"  chatId: 'chat-1731500386228-1pfejwsus',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500386228-1pfejwsus',"}}
[info] >    historyLength: 8, {"user":"  historyLength: 8,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 8,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] }, {"user":"    { role: 'model', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 36, timestamp: '2024-11-13T12:20:22.548Z' } {"user":"✅ Response received: { responseLength: 36, timestamp: '2024-11-13T12:20:22.548Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 36, timestamp: '2024-11-13T12:20:22.548Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: 'Hi there! How can I help you today?\n', {"user":"  message: 'Hi there! How can I help you today?\\n',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: 'Hi there! How can I help you today?\\n',"}}
[info] >    userMessage: 'hi', {"user":"  userMessage: 'hi',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'hi',"}}
[info] >    timestamp: '2024-11-13T12:20:22.548Z', {"user":"  timestamp: '2024-11-13T12:20:22.548Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-13T12:20:22.548Z',"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500386228-1pfejwsus' {"user":"  chatId: 'chat-1731500386228-1pfejwsus'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500386228-1pfejwsus'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history with DETAILED logging: { {"user":"🔍 Attempting to save chat history with DETAILED logging: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history with DETAILED logging: {"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500386228-1pfejwsus', {"user":"  chatId: 'chat-1731500386228-1pfejwsus',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500386228-1pfejwsus',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-13T12:20:22.548Z', {"user":"  timestamp: '2024-11-13T12:20:22.548Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-13T12:20:22.548Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "eH24VXyrqOIVZsy1yLfwgK25TCo9", {"user":"  \"userId\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\","}}
[info] >    "chatId": "chat-1731500386228-1pfejwsus", {"user":"  \"chatId\": \"chat-1731500386228-1pfejwsus\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731500386228-1pfejwsus\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "hi", {"user":"      \"content\": \"hi\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"hi\","}}
[info] >        "timestamp": "2024-11-13T12:20:22.549Z" {"user":"      \"timestamp\": \"2024-11-13T12:20:22.549Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-13T12:20:22.549Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Hi there! How can I help you today?\n", {"user":"      \"content\": \"Hi there! How can I help you today?\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Hi there! How can I help you today?\\n\","}}
[info] >        "timestamp": "2024-11-13T12:20:22.549Z" {"user":"      \"timestamp\": \"2024-11-13T12:20:22.549Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-13T12:20:22.549Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-13T12:20:22.549Z", {"user":"  \"timestamp\": \"2024-11-13T12:20:22.549Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-13T12:20:22.549Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "eH24VXyrqOIVZsy1yLfwgK25TCo9", {"user":"    \"uid\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-13T12:20:22.604Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-13T12:20:22.604Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:20:21.569Z"],"workRunningCount":1}
[debug] [2024-11-13T12:20:22.604Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:20:21.569Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-13T12:20:22.604Z"],"workRunningCount":2}
[debug] [2024-11-13T12:20:22.604Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-13T12:20:22.605Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-13T12:20:22.605Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-13T12:20:22.605Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-13T12:20:22.606Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 48 32 34 56 58 79 72 71 4f 49 56 5a 73 79 31 79 4c 66 77 67 4b 32 35 54 43 6f 39 22 2c 22 ... 268 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 48 32 34 56 58 79 72 71 4f 49 56 5a 73 79 31 79 4c 66 77 67 4b 32 35 54 43 6f 39 22 2c 22 ... 268 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 48 32 34 56 58 79 72 71 4f 49 56 5a 73 79 31 79 4c 66 77 67 4b 32 35 54 43 6f 39 22 2c 22 ... 268 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"      userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >        chatId: 'chat-1731500386228-1pfejwsus', {"user":"      chatId: 'chat-1731500386228-1pfejwsus',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731500386228-1pfejwsus',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-13T12:20:22.549Z' {"user":"      timestamp: '2024-11-13T12:20:22.549Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-13T12:20:22.549Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500386228-1pfejwsus', {"user":"  chatId: 'chat-1731500386228-1pfejwsus',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500386228-1pfejwsus',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731500386228-1pfejwsus { totalMessageCount: 4, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731500386228-1pfejwsus { totalMessageCount: 4, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731500386228-1pfejwsus { totalMessageCount: 4, newMessagesAdded: 2 }"}}
[debug] [2024-11-13T12:20:22.663Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 57.4895ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 57.4895ms"}}
[debug] [2024-11-13T12:20:22.664Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: IDLE"}}
[debug] [2024-11-13T12:20:22.664Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-13T12:20:22.664Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-13T12:20:22.664Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:20:21.569Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 4 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 4 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 4 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-13T12:20:22.667Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 1094.3527ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 1094.3527ms"}}
[debug] [2024-11-13T12:20:22.668Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE"}}
[debug] [2024-11-13T12:20:22.668Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-13T12:20:22.668Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-13T12:20:22.668Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:23:16.209Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:23:16.209Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:23:16.209Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:23:16.209Z"],"workRunningCount":1}
[debug] [2024-11-13T12:23:16.209Z] Accepted request OPTIONS /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-13T12:23:16.211Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-13T12:23:16.212Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-13T12:23:16.212Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-13T12:23:16.213Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY"}}
[debug] [2024-11-13T12:23:16.217Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 4.7043ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 4.7043ms"}}
[debug] [2024-11-13T12:23:16.220Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE"}}
[debug] [2024-11-13T12:23:16.220Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-13T12:23:16.221Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-13T12:23:16.221Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:23:16.222Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:23:16.222Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:23:16.222Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:23:16.222Z"],"workRunningCount":1}
[debug] [2024-11-13T12:23:16.222Z] Accepted request POST /notalone-de4fc/us-central1/processChat --> us-central1-processChat
[debug] [2024-11-13T12:23:16.227Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-13T12:23:16.227Z] [functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/processChat, mapping to path=/"}}
[debug] [2024-11-13T12:23:16.227Z] [worker-pool] submitRequest(triggerId=us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-processChat)"}}
[info] i  functions: Beginning execution of "us-central1-processChat" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Beginning execution of \"us-central1-processChat\""}}
[debug] [2024-11-13T12:23:16.228Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"VALID"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"VALID\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } } {"user":"🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🚀 Incoming request: { auth: 'Authenticated', data: { message: 'hello' } }"}}
[info] >  📝 Using chat ID: undefined {"user":"📝 Using chat ID: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Using chat ID: undefined"}}
[info] >  📥 Processing request: { {"user":"📥 Processing request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📥 Processing request: {"}}
[info] >    messageLength: 5, {"user":"  messageLength: 5,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageLength: 5,"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: undefined {"user":"  chatId: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🆕 Creating new chat session: chat-1731500596233-g3paf66bd {"user":"🆕 Creating new chat session: chat-1731500596233-g3paf66bd","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🆕 Creating new chat session: chat-1731500596233-g3paf66bd"}}
[info] >  📝 Chat session created: { chatId: 'chat-1731500596233-g3paf66bd', sessionExists: true } {"user":"📝 Chat session created: { chatId: 'chat-1731500596233-g3paf66bd', sessionExists: true }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📝 Chat session created: { chatId: 'chat-1731500596233-g3paf66bd', sessionExists: true }"}}
[info] >  💬 Sending message to Gemini: hello {"user":"💬 Sending message to Gemini: hello","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 💬 Sending message to Gemini: hello"}}
[info] >  📚 Current Chat History: { {"user":"📚 Current Chat History: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📚 Current Chat History: {"}}
[info] >    chatId: 'chat-1731500596233-g3paf66bd', {"user":"  chatId: 'chat-1731500596233-g3paf66bd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500596233-g3paf66bd',"}}
[info] >    historyLength: 6, {"user":"  historyLength: 6,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   historyLength: 6,"}}
[info] >    lastMessages: [ {"user":"  lastMessages: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   lastMessages: ["}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'assistant', parts: [Array] }, {"user":"    { role: 'assistant', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'assistant', parts: [Array] },"}}
[info] >      { role: 'user', parts: [Array] }, {"user":"    { role: 'user', parts: [Array] },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'user', parts: [Array] },"}}
[info] >      { role: 'model', parts: [Array] } {"user":"    { role: 'model', parts: [Array] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     { role: 'model', parts: [Array] }"}}
[info] >    ] {"user":"  ]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ]"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Response received: { responseLength: 117, timestamp: '2024-11-13T12:23:17.609Z' } {"user":"✅ Response received: { responseLength: 117, timestamp: '2024-11-13T12:23:17.609Z' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Response received: { responseLength: 117, timestamp: '2024-11-13T12:23:17.609Z' }"}}
[info] >  📤 Sending response: { {"user":"📤 Sending response: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Sending response: {"}}
[info] >    message: "Hello there!  How can I help you today?  I'm ready to listen and offer advice on any relationship concerns you have.\n", {"user":"  message: \"Hello there!  How can I help you today?  I'm ready to listen and offer advice on any relationship concerns you have.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   message: \"Hello there!  How can I help you today?  I'm ready to listen and offer advice on any relationship concerns you have.\\n\","}}
[info] >    userMessage: 'hello', {"user":"  userMessage: 'hello',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userMessage: 'hello',"}}
[info] >    timestamp: '2024-11-13T12:23:17.609Z', {"user":"  timestamp: '2024-11-13T12:23:17.609Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-13T12:23:17.609Z',"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500596233-g3paf66bd' {"user":"  chatId: 'chat-1731500596233-g3paf66bd'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500596233-g3paf66bd'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Attempting to save chat history with DETAILED logging: { {"user":"🔍 Attempting to save chat history with DETAILED logging: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Attempting to save chat history with DETAILED logging: {"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500596233-g3paf66bd', {"user":"  chatId: 'chat-1731500596233-g3paf66bd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500596233-g3paf66bd',"}}
[info] >    messageCount: 2, {"user":"  messageCount: 2,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   messageCount: 2,"}}
[info] >    timestamp: '2024-11-13T12:23:17.609Z', {"user":"  timestamp: '2024-11-13T12:23:17.609Z',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   timestamp: '2024-11-13T12:23:17.609Z',"}}
[info] >    clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' } {"user":"  clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   clientAppConfig: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔧 Firebase Client Configuration: { {"user":"🔧 Firebase Client Configuration: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Firebase Client Configuration: {"}}
[info] >    projectId: 'notalone-de4fc', {"user":"  projectId: 'notalone-de4fc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   projectId: 'notalone-de4fc',"}}
[info] >    apiKey: 'local-api-key', {"user":"  apiKey: 'local-api-key',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   apiKey: 'local-api-key',"}}
[info] >    authDomain: undefined, {"user":"  authDomain: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   authDomain: undefined,"}}
[info] >    emulatorHost: 'localhost', {"user":"  emulatorHost: 'localhost',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorHost: 'localhost',"}}
[info] >    emulatorPort: 5001 {"user":"  emulatorPort: 5001","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorPort: 5001"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Firebase Functions Object Keys: [ {"user":"🔍 Firebase Functions Object Keys: [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Object Keys: ["}}
[info] >    'app', {"user":"  'app',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'app',"}}
[info] >    'emulatorOrigin', {"user":"  'emulatorOrigin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'emulatorOrigin',"}}
[info] >    'contextProvider', {"user":"  'contextProvider',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'contextProvider',"}}
[info] >    'deleteService', {"user":"  'deleteService',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'deleteService',"}}
[info] >    'cancelAllRequests', {"user":"  'cancelAllRequests',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'cancelAllRequests',"}}
[info] >    'customDomain', {"user":"  'customDomain',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'customDomain',"}}
[info] >    'region' {"user":"  'region'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   'region'"}}
[info] >  ] {"user":"]","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ]"}}
[info] >  🔍 Firebase Functions Instance: FunctionsService { {"user":"🔍 Firebase Functions Instance: FunctionsService {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Firebase Functions Instance: FunctionsService {"}}
[info] >    app: FirebaseAppImpl { {"user":"  app: FirebaseAppImpl {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   app: FirebaseAppImpl {"}}
[info] >      _isDeleted: false, {"user":"    _isDeleted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _isDeleted: false,"}}
[info] >      _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' }, {"user":"    _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _options: { projectId: 'notalone-de4fc', apiKey: 'local-api-key' },"}}
[info] >      _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false }, {"user":"    _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _config: { name: '[DEFAULT]', automaticDataCollectionEnabled: false },"}}
[info] >      _name: '[DEFAULT]', {"user":"    _name: '[DEFAULT]',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _name: '[DEFAULT]',"}}
[info] >      _automaticDataCollectionEnabled: false, {"user":"    _automaticDataCollectionEnabled: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _automaticDataCollectionEnabled: false,"}}
[info] >      _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] } {"user":"    _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     _container: ComponentContainer { name: '[DEFAULT]', providers: [Map] }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    emulatorOrigin: 'http://localhost:5001', {"user":"  emulatorOrigin: 'http://localhost:5001',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   emulatorOrigin: 'http://localhost:5001',"}}
[info] >    contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null }, {"user":"  contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   contextProvider: ContextProvider { auth: null, messaging: null, appCheck: null },"}}
[info] >    deleteService: [Function (anonymous)], {"user":"  deleteService: [Function (anonymous)],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   deleteService: [Function (anonymous)],"}}
[info] >    cancelAllRequests: Promise { <pending> }, {"user":"  cancelAllRequests: Promise { <pending> },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancelAllRequests: Promise { <pending> },"}}
[info] >    customDomain: null, {"user":"  customDomain: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   customDomain: null,"}}
[info] >    region: 'us-central1' {"user":"  region: 'us-central1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   region: 'us-central1'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' } {"user":"🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Admin App Project Configuration: { projectId: 'notalone-de4fc', name: '[DEFAULT]' }"}}
[info] >  🔧 Configured Firebase Functions to use local emulator {"user":"🔧 Configured Firebase Functions to use local emulator","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔧 Configured Firebase Functions to use local emulator"}}
[info] >  🔍 Save Chat History Function Details: { {"user":"🔍 Save Chat History Function Details: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Save Chat History Function Details: {"}}
[info] >    functionExists: true, {"user":"  functionExists: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionExists: true,"}}
[info] >    functionType: 'function', {"user":"  functionType: 'function',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionType: 'function',"}}
[info] >    functionName: 'saveChatHistory' {"user":"  functionName: 'saveChatHistory'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   functionName: 'saveChatHistory'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  📤 Chat History Payload: { {"user":"📤 Chat History Payload: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m 📤 Chat History Payload: {"}}
[info] >    "userId": "eH24VXyrqOIVZsy1yLfwgK25TCo9", {"user":"  \"userId\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"userId\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\","}}
[info] >    "chatId": "chat-1731500596233-g3paf66bd", {"user":"  \"chatId\": \"chat-1731500596233-g3paf66bd\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"chatId\": \"chat-1731500596233-g3paf66bd\","}}
[info] >    "messages": [ {"user":"  \"messages\": [","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"messages\": ["}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "user", {"user":"      \"role\": \"user\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"user\","}}
[info] >        "content": "hello", {"user":"      \"content\": \"hello\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"hello\","}}
[info] >        "timestamp": "2024-11-13T12:23:17.610Z" {"user":"      \"timestamp\": \"2024-11-13T12:23:17.610Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-13T12:23:17.610Z\""}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      { {"user":"    {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     {"}}
[info] >        "role": "model", {"user":"      \"role\": \"model\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"role\": \"model\","}}
[info] >        "content": "Hello there!  How can I help you today?  I'm ready to listen and offer advice on any relationship concerns you have.\n", {"user":"      \"content\": \"Hello there!  How can I help you today?  I'm ready to listen and offer advice on any relationship concerns you have.\\n\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"content\": \"Hello there!  How can I help you today?  I'm ready to listen and offer advice on any relationship concerns you have.\\n\","}}
[info] >        "timestamp": "2024-11-13T12:23:17.610Z" {"user":"      \"timestamp\": \"2024-11-13T12:23:17.610Z\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m       \"timestamp\": \"2024-11-13T12:23:17.610Z\""}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    ], {"user":"  ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   ],"}}
[info] >    "timestamp": "2024-11-13T12:23:17.610Z", {"user":"  \"timestamp\": \"2024-11-13T12:23:17.610Z\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"timestamp\": \"2024-11-13T12:23:17.610Z\","}}
[info] >    "authDetails": { {"user":"  \"authDetails\": {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   \"authDetails\": {"}}
[info] >      "uid": "eH24VXyrqOIVZsy1yLfwgK25TCo9", {"user":"    \"uid\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"uid\": \"eH24VXyrqOIVZsy1yLfwgK25TCo9\","}}
[info] >      "token": "Present" {"user":"    \"token\": \"Present\"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m     \"token\": \"Present\""}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-13T12:23:17.681Z] [work-queue] {"queuedWork":["/notalone-de4fc/us-central1/saveChatHistory-2024-11-13T12:23:17.681Z"],"queueLength":1,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:23:16.222Z"],"workRunningCount":1}
[debug] [2024-11-13T12:23:17.681Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:23:16.222Z","/notalone-de4fc/us-central1/saveChatHistory-2024-11-13T12:23:17.681Z"],"workRunningCount":2}
[debug] [2024-11-13T12:23:17.681Z] Accepted request POST /notalone-de4fc/us-central1/saveChatHistory --> us-central1-saveChatHistory
[debug] [2024-11-13T12:23:17.682Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2024-11-13T12:23:17.682Z] [functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/notalone-de4fc/us-central1/saveChatHistory, mapping to path=/"}}
[debug] [2024-11-13T12:23:17.682Z] [worker-pool] submitRequest(triggerId=us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-saveChatHistory)"}}
[info] i  functions: Beginning execution of "us-central1-saveChatHistory" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Beginning execution of \"us-central1-saveChatHistory\""}}
[debug] [2024-11-13T12:23:17.683Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: BUSY"}}
[info] >  {"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"} {"user":{"verifications":{"app":"MISSING","auth":"MISSING"},"logging.googleapis.com/labels":{"firebase-log-type":"callable-request-verification"},"severity":"DEBUG","message":"Callable request verification passed"},"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m {\"verifications\":{\"app\":\"MISSING\",\"auth\":\"MISSING\"},\"logging.googleapis.com/labels\":{\"firebase-log-type\":\"callable-request-verification\"},\"severity\":\"DEBUG\",\"message\":\"Callable request verification passed\"}"}}
[info] >  🔍 Saving Chat History { {"user":"🔍 Saving Chat History {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Saving Chat History {"}}
[info] >    request: { {"user":"  request: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   request: {"}}
[info] >      rawRequest: IncomingMessage { {"user":"    rawRequest: IncomingMessage {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     rawRequest: IncomingMessage {"}}
[info] >        _events: [Object], {"user":"      _events: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _events: [Object],"}}
[info] >        _readableState: [ReadableState], {"user":"      _readableState: [ReadableState],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _readableState: [ReadableState],"}}
[info] >        _maxListeners: undefined, {"user":"      _maxListeners: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _maxListeners: undefined,"}}
[info] >        socket: [Socket], {"user":"      socket: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       socket: [Socket],"}}
[info] >        httpVersionMajor: 1, {"user":"      httpVersionMajor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMajor: 1,"}}
[info] >        httpVersionMinor: 1, {"user":"      httpVersionMinor: 1,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersionMinor: 1,"}}
[info] >        httpVersion: '1.1', {"user":"      httpVersion: '1.1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       httpVersion: '1.1',"}}
[info] >        complete: true, {"user":"      complete: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       complete: true,"}}
[info] >        rawHeaders: [Array], {"user":"      rawHeaders: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawHeaders: [Array],"}}
[info] >        rawTrailers: [], {"user":"      rawTrailers: [],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawTrailers: [],"}}
[info] >        joinDuplicateHeaders: null, {"user":"      joinDuplicateHeaders: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       joinDuplicateHeaders: null,"}}
[info] >        aborted: false, {"user":"      aborted: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       aborted: false,"}}
[info] >        upgrade: false, {"user":"      upgrade: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       upgrade: false,"}}
[info] >        url: '/', {"user":"      url: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       url: '/',"}}
[info] >        method: 'POST', {"user":"      method: 'POST',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       method: 'POST',"}}
[info] >        statusCode: null, {"user":"      statusCode: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusCode: null,"}}
[info] >        statusMessage: null, {"user":"      statusMessage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       statusMessage: null,"}}
[info] >        client: [Socket], {"user":"      client: [Socket],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       client: [Socket],"}}
[info] >        _consuming: true, {"user":"      _consuming: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _consuming: true,"}}
[info] >        _dumped: false, {"user":"      _dumped: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _dumped: false,"}}
[info] >        next: [Function: next], {"user":"      next: [Function: next],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       next: [Function: next],"}}
[info] >        baseUrl: '', {"user":"      baseUrl: '',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       baseUrl: '',"}}
[info] >        originalUrl: '/', {"user":"      originalUrl: '/',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       originalUrl: '/',"}}
[info] >        _parsedUrl: [Url], {"user":"      _parsedUrl: [Url],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _parsedUrl: [Url],"}}
[info] >        params: [Object], {"user":"      params: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       params: [Object],"}}
[info] >        query: {}, {"user":"      query: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       query: {},"}}
[info] >        res: [ServerResponse], {"user":"      res: [ServerResponse],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       res: [ServerResponse],"}}
[info] >        body: [Object], {"user":"      body: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       body: [Object],"}}
[info] >        _body: true, {"user":"      _body: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _body: true,"}}
[info] >        length: undefined, {"user":"      length: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       length: undefined,"}}
[info] >        _eventsCount: 0, {"user":"      _eventsCount: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       _eventsCount: 0,"}}
[info] >        rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 48 32 34 56 58 79 72 71 4f 49 56 5a 73 79 31 79 4c 66 77 67 4b 32 35 54 43 6f 39 22 2c 22 ... 352 more bytes>, {"user":"      rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 48 32 34 56 58 79 72 71 4f 49 56 5a 73 79 31 79 4c 66 77 67 4b 32 35 54 43 6f 39 22 2c 22 ... 352 more bytes>,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       rawBody: <Buffer 7b 22 64 61 74 61 22 3a 7b 22 75 73 65 72 49 64 22 3a 22 65 48 32 34 56 58 79 72 71 4f 49 56 5a 73 79 31 79 4c 66 77 67 4b 32 35 54 43 6f 39 22 2c 22 ... 352 more bytes>,"}}
[info] >        route: [Route], {"user":"      route: [Route],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       route: [Route],"}}
[info] >        [Symbol(shapeMode)]: true, {"user":"      [Symbol(shapeMode)]: true,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(shapeMode)]: true,"}}
[info] >        [Symbol(kCapture)]: false, {"user":"      [Symbol(kCapture)]: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kCapture)]: false,"}}
[info] >        [Symbol(kHeaders)]: [Object], {"user":"      [Symbol(kHeaders)]: [Object],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeaders)]: [Object],"}}
[info] >        [Symbol(kHeadersCount)]: 18, {"user":"      [Symbol(kHeadersCount)]: 18,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kHeadersCount)]: 18,"}}
[info] >        [Symbol(kTrailers)]: null, {"user":"      [Symbol(kTrailers)]: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailers)]: null,"}}
[info] >        [Symbol(kTrailersCount)]: 0 {"user":"      [Symbol(kTrailersCount)]: 0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       [Symbol(kTrailersCount)]: 0"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      data: { {"user":"    data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     data: {"}}
[info] >        userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"      userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >        chatId: 'chat-1731500596233-g3paf66bd', {"user":"      chatId: 'chat-1731500596233-g3paf66bd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       chatId: 'chat-1731500596233-g3paf66bd',"}}
[info] >        messages: [Array], {"user":"      messages: [Array],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       messages: [Array],"}}
[info] >        timestamp: '2024-11-13T12:23:17.610Z' {"user":"      timestamp: '2024-11-13T12:23:17.610Z'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m       timestamp: '2024-11-13T12:23:17.610Z'"}}
[info] >      } {"user":"    }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m     }"}}
[info] >    } {"user":"  }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  🔍 Extracted Data: { {"user":"🔍 Extracted Data: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m 🔍 Extracted Data: {"}}
[info] >    userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9', {"user":"  userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   userId: 'eH24VXyrqOIVZsy1yLfwgK25TCo9',"}}
[info] >    chatId: 'chat-1731500596233-g3paf66bd', {"user":"  chatId: 'chat-1731500596233-g3paf66bd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   chatId: 'chat-1731500596233-g3paf66bd',"}}
[info] >    messagesCount: 2 {"user":"  messagesCount: 2","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m   messagesCount: 2"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >  ✅ Chat history saved/updated: chat-1731500596233-g3paf66bd { totalMessageCount: 2, newMessagesAdded: 2 } {"user":"✅ Chat history saved/updated: chat-1731500596233-g3paf66bd { totalMessageCount: 2, newMessagesAdded: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history saved/updated: chat-1731500596233-g3paf66bd { totalMessageCount: 2, newMessagesAdded: 2 }"}}
[debug] [2024-11-13T12:23:17.730Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-saveChatHistory" in 47.607ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finished \"us-central1-saveChatHistory\" in 47.607ms"}}
[debug] [2024-11-13T12:23:17.731Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: IDLE"}}
[debug] [2024-11-13T12:23:17.731Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-13T12:23:17.732Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-13T12:23:17.732Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/notalone-de4fc/us-central1/processChat-2024-11-13T12:23:16.222Z"],"workRunningCount":1}
[info] >  ✅ Chat history save result: { {"user":"✅ Chat history save result: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m ✅ Chat history save result: {"}}
[info] >    data: { success: true, message: 'Chat history saved', totalMessages: 2 } {"user":"  data: { success: true, message: 'Chat history saved', totalMessages: 2 }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m   data: { success: true, message: 'Chat history saved', totalMessages: 2 }"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2024-11-13T12:23:17.735Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-processChat" in 1506.9526ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finished \"us-central1-processChat\" in 1506.9526ms"}}
[debug] [2024-11-13T12:23:17.739Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: IDLE"}}
[debug] [2024-11-13T12:23:17.739Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2024-11-13T12:23:17.739Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2024-11-13T12:23:17.739Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2024-11-13T12:24:11.469Z] File C:\Users\Rob\apps\not-alone\functions\lib\chatHistory.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\apps\\not-alone\\functions\\lib\\chatHistory.js.map changed, reloading triggers"}}
[debug] [2024-11-13T12:24:11.470Z] File C:\Users\Rob\apps\not-alone\functions\lib\chatHistory.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\apps\\not-alone\\functions\\lib\\chatHistory.js changed, reloading triggers"}}
[debug] [2024-11-13T12:24:11.484Z] File C:\Users\Rob\apps\not-alone\functions\lib\getChatHistory.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\apps\\not-alone\\functions\\lib\\getChatHistory.js.map changed, reloading triggers"}}
[debug] [2024-11-13T12:24:11.485Z] File C:\Users\Rob\apps\not-alone\functions\lib\getChatHistory.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\apps\\not-alone\\functions\\lib\\getChatHistory.js changed, reloading triggers"}}
[debug] [2024-11-13T12:24:11.517Z] File C:\Users\Rob\apps\not-alone\functions\lib\index.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\apps\\not-alone\\functions\\lib\\index.js.map changed, reloading triggers"}}
[debug] [2024-11-13T12:24:11.520Z] File C:\Users\Rob\apps\not-alone\functions\lib\index.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\Rob\\apps\\not-alone\\functions\\lib\\index.js changed, reloading triggers"}}
[debug] [2024-11-13T12:24:12.536Z] Validating nodejs source
[debug] [2024-11-13T12:24:13.603Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "type": "commonjs",
  "dependencies": {
    "@google-cloud/vertexai": "^1.9.0",
    "firebase": "^11.0.1",
    "firebase-admin": "^12.7.0",
    "firebase-functions": "^6.1.0"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "dotenv": "^16.4.5",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2024-11-13T12:24:13.603Z] Building nodejs source
[debug] [2024-11-13T12:24:13.604Z] Failed to find version of module node: reached end of search path C:\Users\Rob\apps\not-alone\functions\node_modules
[warn] !  functions: Your requested "node" version "18" doesn't match your global version "20". Using node@20 from host. 
[debug] [2024-11-13T12:24:13.605Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-13T12:24:13.620Z] Found firebase-functions binary at 'C:\Users\Rob\apps\not-alone\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8271

[info] 🔧 Configured Firebase Functions to use local emulator

[info] Connecting to Firestore Emulator: localhost:8080

[debug] [2024-11-13T12:24:14.484Z] Got response from /__/functions.yaml {"endpoints":{"saveChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"saveChatHistory"},"getChatHistory":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"getChatHistory"},"processChat":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"processChat"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2024-11-13T12:24:18.511Z] defaultcredentials: writing to file C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json
[debug] [2024-11-13T12:24:18.512Z] Setting GAC to C:\Users\Rob\AppData\Roaming\firebase\lisakhun58_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\Rob\\AppData\\Roaming\\firebase\\lisakhun58_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: saveChatHistory, getChatHistory, processChat. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: saveChatHistory, getChatHistory, processChat."}}
[debug] [2024-11-13T12:24:18.514Z] [worker-pool] Shutting down IDLE worker (us-central1-processChat) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-processChat)"}}
[debug] [2024-11-13T12:24:18.514Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: FINISHING"}}
[debug] [2024-11-13T12:24:18.515Z] [worker-pool] Shutting down IDLE worker (us-central1-saveChatHistory) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-saveChatHistory)"}}
[debug] [2024-11-13T12:24:18.515Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: FINISHING"}}
[debug] [2024-11-13T12:24:18.528Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: exited"}}
[debug] [2024-11-13T12:24:18.529Z] [worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-saveChatHistory"},"extension":{},"message":"[worker-us-central1-saveChatHistory-70fe84d0-9795-4336-9118-80cb1304a266]: FINISHED"}}
[debug] [2024-11-13T12:24:18.529Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: exited"}}
[debug] [2024-11-13T12:24:18.529Z] [worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-processChat"},"extension":{},"message":"[worker-us-central1-processChat-05e1a336-684a-479a-bc64-a10badf097fe]: FINISHED"}}
